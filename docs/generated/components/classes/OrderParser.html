<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>grow-fresh-local-food documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">grow-fresh-local-food documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content class">
                   <div class="content-data">












<ol class="breadcrumb">
  <li class="breadcrumb-item">Classes</li>
  <li class="breadcrumb-item" >OrderParser</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>client/src/modules/orders/services/OrderParser.ts</code>
        </p>






            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#menuDb" >menuDb</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#buildMenuDatabase" >buildMenuDatabase</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#fuzzyMatch" >fuzzyMatch</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#levenshteinDistance" >levenshteinDistance</a>
                            </li>
                            <li>
                                <a href="#parseAIResponse" >parseAIResponse</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#parseLine" >parseLine</a>
                            </li>
                            <li>
                                <a href="#parseUserTranscript" >parseUserTranscript</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#wordToNumber" >wordToNumber</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(menuItems: MenuItem[])</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="19" class="link-to-prism">client/src/modules/orders/services/OrderParser.ts:19</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>menuItems</td>
                                                  
                                                        <td>
                                                                    <code>MenuItem[]</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="menuDb"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>menuDb</b></span>
                        <a href="#menuDb"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/MenuDatabase.html" target="_self" >MenuDatabase</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="19" class="link-to-prism">client/src/modules/orders/services/OrderParser.ts:19</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="buildMenuDatabase"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>buildMenuDatabase</b></span>
                        <a href="#buildMenuDatabase"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>buildMenuDatabase(items: MenuItem[])</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="25"
                                    class="link-to-prism">client/src/modules/orders/services/OrderParser.ts:25</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>items</td>
                                            <td>
                                                        <code>MenuItem[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../interfaces/MenuDatabase.html" target="_self" >MenuDatabase</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fuzzyMatch"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>fuzzyMatch</b></span>
                        <a href="#fuzzyMatch"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>fuzzyMatch(input: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, target: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="268"
                                    class="link-to-prism">client/src/modules/orders/services/OrderParser.ts:268</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>input</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>target</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="levenshteinDistance"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>levenshteinDistance</b></span>
                        <a href="#levenshteinDistance"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>levenshteinDistance(str1: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, str2: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="312"
                                    class="link-to-prism">client/src/modules/orders/services/OrderParser.ts:312</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>str1</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                        <tr>
                                                <td>str2</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="parseAIResponse"></a>
                    <span class="name">
                        <span ><b>parseAIResponse</b></span>
                        <a href="#parseAIResponse"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>parseAIResponse(aiResponse: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="108"
                                    class="link-to-prism">client/src/modules/orders/services/OrderParser.ts:108</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>aiResponse</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>ParsedOrderItem[]</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="parseLine"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>parseLine</b></span>
                        <a href="#parseLine"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>parseLine(line: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="130"
                                    class="link-to-prism">client/src/modules/orders/services/OrderParser.ts:130</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>line</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>ParsedOrderItem | null</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="parseUserTranscript"></a>
                    <span class="name">
                        <span ><b>parseUserTranscript</b></span>
                        <a href="#parseUserTranscript"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>parseUserTranscript(_transcript: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="341"
                                    class="link-to-prism">client/src/modules/orders/services/OrderParser.ts:341</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>_transcript</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>ParsedOrderItem[]</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="wordToNumber"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>wordToNumber</b></span>
                        <a href="#wordToNumber"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>wordToNumber(word: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="258"
                                    class="link-to-prism">client/src/modules/orders/services/OrderParser.ts:258</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>word</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>





    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { MenuItem } from &#x27;../types&#x27;;
import { OrderModification } from &#x27;../../voice/contexts/types&#x27;;

export interface ParsedOrderItem {
  menuItem: MenuItem | null;
  quantity: number;
  modifications: OrderModification[];
  action: &#x27;add&#x27; | &#x27;remove&#x27; | &#x27;update&#x27;;
  confidence: number;
}

interface MenuDatabase {
  items: MenuItem[];
  modifiers: Map&lt;string, OrderModification&gt;;
  aliases: Map&lt;string, string&gt;;
}

export class OrderParser {
  private menuDb: MenuDatabase;
  
  constructor(menuItems: MenuItem[]) {
    this.menuDb &#x3D; this.buildMenuDatabase(menuItems);
  }
  
  private buildMenuDatabase(items: MenuItem[]): MenuDatabase {
    const db: MenuDatabase &#x3D; {
      items,
      modifiers: new Map(),
      aliases: new Map(),
    };
    
    // Build common modifiers for Grow Fresh Local Food
    const commonModifiers &#x3D; [
      // Bowl modifiers
      { id: &#x27;no-rice&#x27;, name: &#x27;No rice&#x27;, price: 0 },
      { id: &#x27;add-rice&#x27;, name: &#x27;Add rice&#x27;, price: 1 },
      { id: &#x27;extra-collards&#x27;, name: &#x27;Extra collards&#x27;, price: 2 },
      { id: &#x27;no-olives&#x27;, name: &#x27;No olives&#x27;, price: 0 },
      { id: &#x27;no-feta&#x27;, name: &#x27;No feta&#x27;, price: 0 },
      { id: &#x27;extra-sauce&#x27;, name: &#x27;Extra sauce&#x27;, price: 0.50 },
      // Salad add-ons
      { id: &#x27;add-chicken&#x27;, name: &#x27;Add chicken&#x27;, price: 4 },
      { id: &#x27;add-salmon&#x27;, name: &#x27;Add salmon&#x27;, price: 6 },
      { id: &#x27;add-prosciutto&#x27;, name: &#x27;Add prosciutto&#x27;, price: 4 },
      // Side options
      { id: &#x27;three-sides&#x27;, name: &#x27;Three sides&#x27;, price: 10 },
      { id: &#x27;four-sides&#x27;, name: &#x27;Four sides&#x27;, price: 12.50 },
      // Dietary preferences
      { id: &#x27;make-it-vegan&#x27;, name: &#x27;Make it vegan&#x27;, price: 0 },
      { id: &#x27;gluten-free&#x27;, name: &#x27;Gluten free&#x27;, price: 0 },
    ];
    
    commonModifiers.forEach(mod &#x3D;&gt; {
      db.modifiers.set(mod.name.toLowerCase(), mod);
    });
    
    // Build aliases for Grow Fresh Local Food menu items
    const aliases &#x3D; [
      // Starters
      [&#x27;summer sampler&#x27;, &#x27;sampler&#x27;, &#x27;sampler plate&#x27;, &#x27;appetizer sampler&#x27;],
      [&#x27;peach caprese&#x27;, &#x27;peach and prosciutto&#x27;, &#x27;caprese&#x27;, &#x27;peach salad&#x27;],
      [&#x27;watermelon tataki&#x27;, &#x27;watermelon&#x27;, &#x27;tataki&#x27;],
      [&#x27;tea sandwiches&#x27;, &#x27;tea sandwich&#x27;, &#x27;finger sandwiches&#x27;],
      [&#x27;jalapeno pimento&#x27;, &#x27;pimento bites&#x27;, &#x27;jalapeno bites&#x27;, &#x27;pimento cheese&#x27;],
      // Bowls
      [&#x27;soul bowl&#x27;, &#x27;georgia soul&#x27;, &#x27;soul food bowl&#x27;, &#x27;sausage bowl&#x27;, &#x27;collard bowl&#x27;],
      [&#x27;chicken fajita keto&#x27;, &#x27;fajita bowl&#x27;, &#x27;keto bowl&#x27;, &#x27;chicken fajita&#x27;, &#x27;keto chicken&#x27;],
      [&#x27;greek bowl&#x27;, &#x27;greek chicken&#x27;, &#x27;mediterranean bowl&#x27;, &#x27;greek chicken bowl&#x27;],
      [&#x27;summer vegan bowl&#x27;, &#x27;vegan bowl&#x27;, &#x27;cold vegan&#x27;, &#x27;vegan option&#x27;],
      [&#x27;summer succotash&#x27;, &#x27;succotash&#x27;, &#x27;hot vegan&#x27;, &#x27;succotash bowl&#x27;],
      // Salads
      [&#x27;summer salad&#x27;, &#x27;house salad&#x27;, &#x27;seasonal salad&#x27;],
      [&#x27;peach arugula&#x27;, &#x27;peach salad&#x27;, &#x27;arugula salad&#x27;],
      [&#x27;greek salad&#x27;, &#x27;mediterranean salad&#x27;],
      [&#x27;tuna salad&#x27;, &#x27;tuna&#x27;, &#x27;tuna plate&#x27;],
      [&#x27;moms chicken salad&#x27;, &#x27;mama salad&#x27;, &#x27;chicken salad&#x27;, &#x27;mom salad&#x27;, &#x27;mama chicken&#x27;],
      [&#x27;grilled chicken salad&#x27;, &#x27;grilled chicken&#x27;, &#x27;chicken breast salad&#x27;],
      // Entrees
      [&#x27;peach chicken&#x27;, &#x27;chicken with peaches&#x27;, &#x27;peach glazed chicken&#x27;],
      [&#x27;teriyaki salmon&#x27;, &#x27;salmon&#x27;, &#x27;salmon over rice&#x27;, &#x27;salmon rice&#x27;],
      [&#x27;hamburger steak&#x27;, &#x27;burger steak&#x27;, &#x27;salisbury steak&#x27;, &#x27;steak over rice&#x27;],
      [&#x27;greek chicken thighs&#x27;, &#x27;greek thighs&#x27;, &#x27;chicken thighs&#x27;, &#x27;greek chicken over rice&#x27;],
      // Sides
      [&#x27;potatoes romanoff&#x27;, &#x27;romanoff&#x27;, &#x27;potato romanoff&#x27;, &#x27;creamy potatoes&#x27;],
      [&#x27;black eyed peas&#x27;, &#x27;black eye peas&#x27;, &#x27;peas&#x27;, &#x27;field peas&#x27;],
      [&#x27;collards&#x27;, &#x27;collard greens&#x27;, &#x27;greens&#x27;],
      [&#x27;sweet potatoes&#x27;, &#x27;sweet potato&#x27;, &#x27;yams&#x27;],
      [&#x27;rice&#x27;, &#x27;white rice&#x27;, &#x27;steamed rice&#x27;],
      [&#x27;potato salad&#x27;, &#x27;tater salad&#x27;],
      [&#x27;fruit cup&#x27;, &#x27;fruit&#x27;, &#x27;fresh fruit&#x27;],
      [&#x27;cucumber salad&#x27;, &#x27;cucumber&#x27;, &#x27;cucumbers&#x27;],
      [&#x27;side salad&#x27;, &#x27;small salad&#x27;, &#x27;garden salad&#x27;],
      [&#x27;peanut asian noodles&#x27;, &#x27;asian noodles&#x27;, &#x27;peanut noodles&#x27;, &#x27;noodles&#x27;],
      // Veggie plate
      [&#x27;veggie plate&#x27;, &#x27;vegetable plate&#x27;, &#x27;veggie platter&#x27;, &#x27;vegetarian plate&#x27;],
    ];
    
    aliases.forEach(group &#x3D;&gt; {
      const primary &#x3D; group[0];
      group.forEach(alias &#x3D;&gt; {
        db.aliases.set(alias.toLowerCase(), primary);
      });
    });
    
    return db;
  }
  
  parseAIResponse(aiResponse: string): ParsedOrderItem[] {
    const parsedItems: ParsedOrderItem[] &#x3D; [];
    
    // Extract structured data from AI response
    // Look for patterns like:
    // - &quot;Adding [item]&quot;
    // - &quot;I&#x27;ll add [quantity] [item]&quot;
    // - &quot;Removing [item]&quot;
    // - &quot;Changing [item] to [modification]&quot;
    
    const lines &#x3D; aiResponse.split(&#x27;\n&#x27;).filter(line &#x3D;&gt; line.trim());
    
    for (const line of lines) {
      const parsed &#x3D; this.parseLine(line);
      if (parsed) {
        parsedItems.push(parsed);
      }
    }
    
    return parsedItems;
  }
  
  private parseLine(line: string): ParsedOrderItem | null {
    const lowerLine &#x3D; line.toLowerCase();
    
    // Detect action
    let action: &#x27;add&#x27; | &#x27;remove&#x27; | &#x27;update&#x27; &#x3D; &#x27;add&#x27;;
    if (lowerLine.includes(&#x27;remov&#x27;) || lowerLine.includes(&#x27;cancel&#x27;) || lowerLine.includes(&#x27;delete&#x27;)) {
      action &#x3D; &#x27;remove&#x27;;
    } else if (lowerLine.includes(&#x27;chang&#x27;) || lowerLine.includes(&#x27;modif&#x27;) || lowerLine.includes(&#x27;updat&#x27;)) {
      action &#x3D; &#x27;update&#x27;;
    }
    
    // Extract quantity
    const quantityMatch &#x3D; lowerLine.match(/(\d+|one|two|three|four|five|six|seven|eight|nine|ten)/);
    let quantity &#x3D; 1;
    if (quantityMatch) {
      const numWord &#x3D; quantityMatch[1];
      quantity &#x3D; this.wordToNumber(numWord);
    }
    
    // Find menu item using fuzzy matching
    let menuItem: MenuItem | null &#x3D; null;
    let bestMatch &#x3D; { item: null as MenuItem | null, score: 0 };
    
    // Extract potential item name from the line
    const words &#x3D; lowerLine.split(&#x27; &#x27;);
    
    for (const item of this.menuDb.items) {
      const itemName &#x3D; item.name.toLowerCase();
      
      // Direct fuzzy match on item name
      const directScore &#x3D; this.fuzzyMatch(lowerLine, itemName);
      if (directScore &gt; bestMatch.score) {
        bestMatch &#x3D; { item, score: directScore };
      }
      
      // Check aliases with fuzzy matching
      for (const [alias, primary] of this.menuDb.aliases.entries()) {
        if (primary &#x3D;&#x3D;&#x3D; itemName || this.menuDb.aliases.get(itemName) &#x3D;&#x3D;&#x3D; primary) {
          const aliasScore &#x3D; this.fuzzyMatch(lowerLine, alias);
          if (aliasScore &gt; bestMatch.score) {
            bestMatch &#x3D; { item, score: aliasScore };
          }
        }
      }
      
      // Check word combinations for better matching
      for (let i &#x3D; 0; i &lt; words.length - 1; i++) {
        for (let j &#x3D; i + 1; j &lt;&#x3D; Math.min(i + 4, words.length); j++) {
          const phrase &#x3D; words.slice(i, j).join(&#x27; &#x27;);
          const phraseScore &#x3D; this.fuzzyMatch(phrase, itemName);
          if (phraseScore &gt; bestMatch.score) {
            bestMatch &#x3D; { item, score: phraseScore };
          }
        }
      }
    }
    
    menuItem &#x3D; bestMatch.score &gt; 0.6 ? bestMatch.item : null;
    
    if (!menuItem &amp;&amp; action &#x3D;&#x3D;&#x3D; &#x27;add&#x27;) {
      return null;
    }
    
    // Extract modifications
    const modifications: OrderModification[] &#x3D; [];
    
    // Check for size modifications
    if (lowerLine.includes(&#x27;large&#x27;)) {
      const largeMod &#x3D; this.menuDb.modifiers.get(&#x27;large&#x27;);
      if (largeMod) modifications.push(largeMod);
    } else if (lowerLine.includes(&#x27;medium&#x27;)) {
      const medMod &#x3D; this.menuDb.modifiers.get(&#x27;medium&#x27;);
      if (medMod) modifications.push(medMod);
    } else if (lowerLine.includes(&#x27;small&#x27;)) {
      const smallMod &#x3D; this.menuDb.modifiers.get(&#x27;small&#x27;);
      if (smallMod) modifications.push(smallMod);
    }
    
    // Check for ingredient modifications
    const noPattern &#x3D; /(?:no|without|hold the)\s+(\w+)/g;
    let noMatch;
    while ((noMatch &#x3D; noPattern.exec(lowerLine)) !&#x3D;&#x3D; null) {
      const ingredient &#x3D; noMatch[1];
      const modKey &#x3D; &#x60;no ${ingredient}&#x60;;
      const mod &#x3D; this.menuDb.modifiers.get(modKey);
      if (mod) modifications.push(mod);
    }
    
    // Check for extra modifications
    const extraPattern &#x3D; /(?:extra|more|double)\s+(\w+)/g;
    let extraMatch;
    while ((extraMatch &#x3D; extraPattern.exec(lowerLine)) !&#x3D;&#x3D; null) {
      const ingredient &#x3D; extraMatch[1];
      const modKey &#x3D; &#x60;extra ${ingredient}&#x60;;
      const mod &#x3D; this.menuDb.modifiers.get(modKey);
      if (mod) modifications.push(mod);
    }
    
    // Check for add-on modifications
    const addPattern &#x3D; /(?:add|with)\s+(\w+)/g;
    let addMatch;
    while ((addMatch &#x3D; addPattern.exec(lowerLine)) !&#x3D;&#x3D; null) {
      const ingredient &#x3D; addMatch[1];
      const modKey &#x3D; &#x60;add ${ingredient}&#x60;;
      const mod &#x3D; this.menuDb.modifiers.get(modKey);
      if (mod) modifications.push(mod);
    }
    
    // Check for veggie plate specific
    if (lowerLine.includes(&#x27;veggie plate&#x27;) || lowerLine.includes(&#x27;vegetable plate&#x27;)) {
      if (lowerLine.includes(&#x27;three&#x27;) || lowerLine.includes(&#x27;3&#x27;)) {
        const threeSides &#x3D; this.menuDb.modifiers.get(&#x27;three sides&#x27;);
        if (threeSides) modifications.push(threeSides);
      } else if (lowerLine.includes(&#x27;four&#x27;) || lowerLine.includes(&#x27;4&#x27;)) {
        const fourSides &#x3D; this.menuDb.modifiers.get(&#x27;four sides&#x27;);
        if (fourSides) modifications.push(fourSides);
      }
    }
    
    return {
      menuItem,
      quantity,
      modifications,
      action,
      confidence: bestMatch.score,
    };
  }
  
  private wordToNumber(word: string): number {
    const numbers: { [key: string]: number } &#x3D; {
      &#x27;one&#x27;: 1, &#x27;two&#x27;: 2, &#x27;three&#x27;: 3, &#x27;four&#x27;: 4, &#x27;five&#x27;: 5,
      &#x27;six&#x27;: 6, &#x27;seven&#x27;: 7, &#x27;eight&#x27;: 8, &#x27;nine&#x27;: 9, &#x27;ten&#x27;: 10,
    };
    
    return numbers[word] || parseInt(word) || 1;
  }
  
  // Fuzzy matching for Southern accents and variations
  private fuzzyMatch(input: string, target: string): number {
    input &#x3D; input.toLowerCase().trim();
    target &#x3D; target.toLowerCase().trim();
    
    // Exact match
    if (input &#x3D;&#x3D;&#x3D; target) return 1.0;
    
    // Contains match
    if (input.includes(target) || target.includes(input)) return 0.8;
    
    // Common Southern pronunciation variations
    const southernVariations: { [key: string]: string[] } &#x3D; {
      &#x27;bowl&#x27;: [&#x27;bol&#x27;, &#x27;bole&#x27;, &#x27;bowel&#x27;],
      &#x27;soul&#x27;: [&#x27;sole&#x27;, &#x27;sol&#x27;, &#x27;soal&#x27;],
      &#x27;chicken&#x27;: [&#x27;chickin&#x27;, &#x27;chiken&#x27;, &#x27;chick\&#x27;n&#x27;],
      &#x27;salad&#x27;: [&#x27;sallad&#x27;, &#x27;salid&#x27;, &#x27;saled&#x27;],
      &#x27;collards&#x27;: [&#x27;collards&#x27;, &#x27;collard greens&#x27;, &#x27;greens&#x27;],
      &#x27;peas&#x27;: [&#x27;pease&#x27;, &#x27;peaz&#x27;],
      &#x27;rice&#x27;: [&#x27;rahce&#x27;, &#x27;rahs&#x27;],
      &#x27;fajita&#x27;: [&#x27;fahita&#x27;, &#x27;fajeta&#x27;, &#x27;faheta&#x27;],
      &#x27;keto&#x27;: [&#x27;keeto&#x27;, &#x27;ketto&#x27;],
      &#x27;vegan&#x27;: [&#x27;veegan&#x27;, &#x27;vaygan&#x27;],
      &#x27;peach&#x27;: [&#x27;peech&#x27;, &#x27;pech&#x27;],
      &#x27;tea&#x27;: [&#x27;tay&#x27;, &#x27;tee&#x27;],
      &#x27;salmon&#x27;: [&#x27;samon&#x27;, &#x27;sammon&#x27;, &#x27;sam\&#x27;n&#x27;],
    };
    
    // Check for Southern variations
    for (const [standard, variations] of Object.entries(southernVariations)) {
      if (target.includes(standard)) {
        for (const variant of variations) {
          if (input.includes(variant)) return 0.7;
        }
      }
    }
    
    // Levenshtein distance for close matches
    const distance &#x3D; this.levenshteinDistance(input, target);
    const maxLength &#x3D; Math.max(input.length, target.length);
    const similarity &#x3D; 1 - (distance / maxLength);
    
    return similarity &gt; 0.6 ? similarity : 0;
  }
  
  private levenshteinDistance(str1: string, str2: string): number {
    const matrix: number[][] &#x3D; [];
    
    for (let i &#x3D; 0; i &lt;&#x3D; str2.length; i++) {
      matrix[i] &#x3D; [i];
    }
    
    for (let j &#x3D; 0; j &lt;&#x3D; str1.length; j++) {
      matrix[0][j] &#x3D; j;
    }
    
    for (let i &#x3D; 1; i &lt;&#x3D; str2.length; i++) {
      for (let j &#x3D; 1; j &lt;&#x3D; str1.length; j++) {
        if (str2.charAt(i - 1) &#x3D;&#x3D;&#x3D; str1.charAt(j - 1)) {
          matrix[i][j] &#x3D; matrix[i - 1][j - 1];
        } else {
          matrix[i][j] &#x3D; Math.min(
            matrix[i - 1][j - 1] + 1,
            matrix[i][j - 1] + 1,
            matrix[i - 1][j] + 1
          );
        }
      }
    }
    
    return matrix[str2.length][str1.length];
  }
  
  // Parse user&#x27;s spoken text directly (for future enhancement)
  parseUserTranscript(_transcript: string): ParsedOrderItem[] {
    // This method can be enhanced to parse user&#x27;s direct speech
    // For now, we&#x27;ll rely on AI to structure the response
    return [];
  }
}</code></pre>
    </div>
</div>









                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'class';
            var COMPODOC_CURRENT_PAGE_URL = 'OrderParser.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
