graph TD
    subgraph "Client (Port 5173)"
        A[React App]
        B[Voice Module]
        C[Orders Module]
        D[Kitchen Module]
        E[Floor Plan Module]
        F[useVoiceSocket Hook]
        
        A --> B
        A --> C
        A --> D
        A --> E
        B --> F
    end
    
    subgraph "Unified Backend (Port 3001)"
        G[Express Server]
        H[WebSocket Server]
        I[AI Service]
        J[Orders Service]
        K[Menu Service]
        L[Tables Service]
        M[Voice Stream Handler]
        N[Prometheus Metrics]
        
        G --> H
        G --> I
        G --> J
        G --> K
        G --> L
        H --> M
        M --> I
        G --> N
    end
    
    subgraph "External Services"
        O[Supabase Database]
        P[OpenAI API]
    end
    
    F -.->|WebSocket| M
    C -->|REST API| J
    D -->|REST API| J
    E -->|REST API| L
    J --> O
    K --> O
    L --> O
    I --> P
    
    style A fill:#f9f,stroke:#333,stroke-width:4px
    style G fill:#bbf,stroke:#333,stroke-width:4px
    style O fill:#bfb,stroke:#333,stroke-width:2px
    style P fill:#fbf,stroke:#333,stroke-width:2px