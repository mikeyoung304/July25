# Reports Directory

**Last Updated**: 2025-09-26
**Version**: See [docs/VERSION.md](../docs/VERSION.md)

## Purpose

This directory contains generated reports, analysis outputs, and operational snapshots from the Restaurant OS system. Reports are organized by type and retention policy.

## Directory Structure

```
reports/
├── README.md           # This file
├── active/            # Living reports (regularly updated)
├── snapshots/         # Point-in-time captures
└── archive/           # Historical reports
```

## Report Categories

### `/active/` - Living Reports

Reports that are continuously updated or regenerated.

**Examples:**
- Current test coverage
- Active performance metrics
- Live system health
- Dependency analysis

**Retention:** Keep latest version only

### `/snapshots/` - Generated Outputs

Point-in-time reports from builds, tests, or analysis.

**Examples:**
- Coverage reports from CI
- Build analysis outputs
- ESLint/TypeScript reports
- Bundle size analysis

**Current Files:**
- `supabase-schema.sql` - Database schema snapshot

**Retention:** Keep for 30 days or 5 versions

### `/archive/` - Historical Reports

Reports preserved for historical reference or compliance.

**Examples:**
- Incident post-mortems
- Quarterly summaries
- Audit reports
- Migration reports

**Retention:** Keep indefinitely

## File Naming Conventions

### Timestamps
Use ISO 8601 format: `YYYY-MM-DD` or `YYYY-MM-DD-HHMMSS`

```
coverage-2025-09-26.html
bundle-analysis-2025-09-26-143022.json
```

### Versioned Reports
Include version in filename:

```
performance-v6.0.6.json
dependency-audit-v6.0.6.txt
```

### Environment-Specific
Include environment when relevant:

```
coverage-production-2025-09-26.html
metrics-staging-2025-09-26.json
```

## Common Report Types

### Test Coverage
- **Location**: `/snapshots/coverage/` or `/server/coverage/`
- **Format**: HTML, JSON, LCOV
- **Generated by**: `npm run test:coverage`
- **Current Coverage**: ~23.47% (see server coverage report)

### Build Analysis
- **Location**: `/snapshots/build/`
- **Format**: JSON, HTML
- **Generated by**: `npm run analyze`
- **Includes**: Bundle size, dependencies, chunks

### Performance Metrics
- **Location**: `/active/performance/`
- **Format**: JSON
- **Includes**: Load times, API response times, memory usage

### Security Audits
- **Location**: `/snapshots/security/`
- **Format**: JSON, TXT
- **Generated by**: `npm audit`
- **Includes**: Vulnerability reports

### Database Schema
- **Location**: `/snapshots/`
- **File**: `supabase-schema.sql`
- **Generated by**: `pg_dump` or Supabase export
- **Purpose**: Schema reference and backup

## Generating Reports

### Coverage Report
```bash
cd server && npm run test:coverage
# Output: server/coverage/index.html
```

### Bundle Analysis
```bash
npm run analyze:bundle
# Output: reports/snapshots/bundle-analysis-[date].html
```

### Dependency Audit
```bash
npm audit --json > reports/snapshots/npm-audit-$(date +%Y-%m-%d).json
```

### Database Schema
```bash
pg_dump --schema-only $DATABASE_URL > reports/snapshots/supabase-schema.sql
```

## Report Management

### Adding New Reports

1. Determine category (active/snapshots/archive)
2. Follow naming conventions
3. Update this README
4. Add generation script if applicable

### Cleaning Old Reports

```bash
# Remove snapshots older than 30 days
find reports/snapshots -type f -mtime +30 -delete

# Keep only latest 5 versions
ls -t reports/snapshots/coverage-*.html | tail -n +6 | xargs rm
```

### Archiving Reports

Move important reports to archive with context:

```bash
# Archive with metadata
mv reports/snapshots/incident-2025-09-23.md \
   reports/archive/2025-Q3-incident-production-outage.md
```

## CI/CD Integration

### Automated Report Generation

CI pipeline generates:
- Test coverage after each build
- Bundle analysis on release
- Security audit weekly

### Report Publishing

Reports can be published to:
- GitHub Actions artifacts
- S3 bucket
- Monitoring dashboard

## Access Control

### Sensitive Reports

Some reports may contain sensitive data:
- Security audits
- Performance profiles
- Error logs

**Never commit:**
- Reports with API keys
- Reports with user data
- Reports with credentials

### Public Reports

Safe to share:
- Coverage percentages
- Bundle sizes
- Generic metrics

## Report Formats

### Preferred Formats

1. **JSON** - Machine-readable, parseable
2. **HTML** - Human-readable with visualization
3. **Markdown** - Version-controllable documentation
4. **CSV** - Spreadsheet-compatible

### Avoid

- Binary formats (unless necessary)
- Proprietary formats
- Large media files

## Automation

### Scripts

Report generation scripts in `/scripts/`:
- `gen-code-analysis.ts`
- `analyze-bundle.ts`

### Scheduled Reports

Consider scheduling:
- Daily coverage snapshots
- Weekly dependency audits
- Monthly performance summaries

## Best Practices

1. **Version Control**
   - Commit report metadata, not large reports
   - Use .gitignore for generated reports
   - Track report configurations

2. **Storage**
   - Compress large reports
   - Clean up old snapshots
   - Archive important reports

3. **Documentation**
   - Document report purpose
   - Include generation commands
   - Note interpretation guidelines

## Current Reports

### Available Now
- `supabase-schema.sql` - Database schema
- `server/coverage/` - Test coverage (~23.47%)

### Coming Soon
- Bundle size analysis
- Performance benchmarks
- API response time analysis

## Troubleshooting

### Missing Reports
- Check generation scripts run successfully
- Verify output directories exist
- Check file permissions

### Large Report Files
- Consider compression (gzip)
- Split into smaller files
- Store externally with links

### Stale Reports
- Set up automated cleanup
- Add timestamp validation
- Monitor report freshness

## Related Documentation

- [Testing Guide](../docs/TESTING_GUIDE.md)
- [CI/CD Pipeline](../docs/DEPLOYMENT.md)
- [Monitoring](../docs/OPERATIONAL_RUNBOOK.md)

---

**Report Policy Owner**: DevOps Team
**Review Frequency**: Monthly
**Retention Policy**: See categories above