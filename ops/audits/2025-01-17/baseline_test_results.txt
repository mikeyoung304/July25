
> restaurant-os@6.0.4 test
> NODE_OPTIONS='--max-old-space-size=4096 --expose-gc' npm run test:client && npm run test:server


> restaurant-os@6.0.4 test:client
> NODE_OPTIONS='--max-old-space-size=4096 --expose-gc' cd client && npm test


> restaurant-os-client@6.0.4 test
> vitest run

[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m

 RUN  v3.2.4 /Users/mikeyoung/CODING/rebuild-6.0/client
      Coverage enabled with v8

stderr | src/modules/orders/hooks/__tests__/useOrderData.test.ts
[2025-09-17T04:59:10.936Z] [INFO] [restaurant-types] Created RestaurantContext with ID: restaurant-context-1758085150935

 ❯ src/modules/orders/hooks/__tests__/useOrderData.test.ts (6 tests | 4 failed) 2374ms
   × useOrderData > should fetch orders on mount 1043ms
     → expected { orders: [ …(2) ], total: 2 } to deeply equal [ Array(2) ]

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
   × useOrderData > should fetch orders with filters 63ms
     → expected "spy" to be called with arguments: [ 'rest-1', { status: 'new', …(1) } ][90m

Received: 

[1m  1st spy call:

[22m[2m  [[22m
[32m-   "rest-1",[90m
[2m    {[22m
[2m      "status": "new",[22m
[2m      "tableId": undefined,[22m
[2m    },[22m
[2m  ][22m

[1m  2nd spy call:

[22m[2m  [[22m
[32m-   "rest-1",[90m
[2m    {[22m
[2m      "status": "new",[22m
[2m      "tableId": undefined,[22m
[2m    },[22m
[2m  ][22m

[1m  3rd spy call:

[22m[2m  [[22m
[32m-   "rest-1",[90m
[2m    {[22m
[2m      "status": "new",[22m
[2m      "tableId": undefined,[22m
[2m    },[22m
[2m  ][22m
[39m[90m

Number of calls: [1m3[22m
[39m
   ✓ useOrderData > should refetch orders 65ms
   × useOrderData > should update order status optimistically 64ms
     → Cannot read properties of undefined (reading 'status')
   ✓ useOrderData > should handle errors gracefully 62ms
   × useOrderData > should re-fetch when filters change 1068ms
     → expected last "spy" call to have been called with [ 'rest-1', { status: 'new', …(1) } ]

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m
 ❯ src/modules/voice/__tests__/buildSafety.test.ts (5 tests | 1 failed) 566ms
   ✓ Build Safety Checks > require() usage prevention > should not contain require() calls in client source code 59ms
   ✓ Build Safety Checks > require() usage prevention > should use ES6 imports instead of CommonJS 32ms
   × Build Safety Checks > Node.js specific imports prevention > should not import Node.js built-in modules in client code 417ms
     → Found Node.js built-in imports in client code that will break browser builds:
src/hooks/kiosk/useKioskOrderSubmission.ts:4 - Importing Node.js module "crypto": import { createHash } from 'crypto';

Client code should only import browser-compatible modules.
For file operations, use browser APIs or move logic to server.
   ✓ Build Safety Checks > Dynamic import safety > should use proper dynamic import syntax 45ms
   ✓ Build Safety Checks > Environment compatibility > should check for browser compatibility in voice modules 7ms
 ❯ src/modules/voice/components/HoldToRecordButton.test.tsx (12 tests | 5 failed) 128ms
   ✓ HoldToRecordButton > renders with "HOLD ME" text by default 14ms
   × HoldToRecordButton > shows "LISTENING..." when isListening is true 9ms
     → Unable to find an element with the text: LISTENING.... This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<button[39m
      [33maria-busy[39m=[32m"false"[39m
      [33maria-label[39m=[32m"Release to stop recording"[39m
      [33maria-pressed[39m=[32m"true"[39m
      [33mclass[39m=[32m"relative w-32 h-32 rounded-full text-sm font-semibold text-white transition-all duration-300 hover:scale-105 active:scale-95 flex flex-col items-center justify-center gap-2 focus:outline-none focus:ring-4 focus:ring-offset-2 bg-danger shadow-[0_0_30px_rgba(239,68,68,0.4)] hover:bg-danger-dark focus:ring-danger"[39m
      [33mrole[39m=[32m"button"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-mic w-8 h-8"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<path[39m
          [33md[39m=[32m"M12 19v3"[39m
        [36m/>[39m
        [36m<path[39m
          [33md[39m=[32m"M19 10v2a7 7 0 0 1-14 0v-2"[39m
        [36m/>[39m
        [36m<rect[39m
          [33mheight[39m=[32m"13"[39m
          [33mrx[39m=[32m"3"[39m
          [33mwidth[39m=[32m"6"[39m
          [33mx[39m=[32m"9"[39m
          [33my[39m=[32m"2"[39m
        [36m/>[39m
      [36m</svg>[39m
      [36m<span>[39m
        [0mEAVESDROPPING...[0m
      [36m</span>[39m
    [36m</button>[39m
  [36m</div>[39m
[36m</body>[39m
   × HoldToRecordButton > shows "PROCESSING..." when isProcessing is true 8ms
     → Unable to find an element with the text: PROCESSING.... This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<button[39m
      [33maria-busy[39m=[32m"true"[39m
      [33maria-label[39m=[32m"Processing your voice order"[39m
      [33maria-pressed[39m=[32m"false"[39m
      [33mclass[39m=[32m"relative w-32 h-32 rounded-full text-sm font-semibold text-white transition-all duration-300 hover:scale-105 active:scale-95 flex flex-col items-center justify-center gap-2 focus:outline-none focus:ring-4 focus:ring-offset-2 bg-primary shadow-[0_4px_16px_rgba(0,0,0,0.1)] hover:bg-primary-dark focus:ring-primary animate-pulse"[39m
      [33mrole[39m=[32m"button"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-mic w-8 h-8"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<path[39m
          [33md[39m=[32m"M12 19v3"[39m
        [36m/>[39m
        [36m<path[39m
          [33md[39m=[32m"M19 10v2a7 7 0 0 1-14 0v-2"[39m
        [36m/>[39m
        [36m<rect[39m
          [33mheight[39m=[32m"13"[39m
          [33mrx[39m=[32m"3"[39m
          [33mwidth[39m=[32m"6"[39m
          [33mx[39m=[32m"9"[39m
          [33my[39m=[32m"2"[39m
        [36m/>[39m
      [36m</svg>[39m
      [36m<span>[39m
        [0mCOGITATING...[0m
      [36m</span>[39m
    [36m</button>[39m
  [36m</div>[39m
[36m</body>[39m
   ✓ HoldToRecordButton > calls onMouseDown when button is pressed 26ms
   × HoldToRecordButton > calls onMouseUp when button is released 8ms
     → expected "spy" to be called 1 times, but got 0 times
   × HoldToRecordButton > calls onMouseUp when mouse leaves button 8ms
     → expected "spy" to be called 1 times, but got 0 times
   × HoldToRecordButton > handles touch events 8ms
     → expected "spy" to be called 1 times, but got 0 times
   ✓ HoldToRecordButton > is disabled when disabled prop is true 8ms
   ✓ HoldToRecordButton > applies danger styling when listening 8ms
   ✓ HoldToRecordButton > applies primary styling when not listening 9ms
   ✓ HoldToRecordButton > applies pulse animation when processing 7ms
   ✓ HoldToRecordButton > renders microphone icon 8ms
 ❯ src/modules/payment/components/__tests__/TipSelector.test.tsx (10 tests | 9 failed) 115ms
   × TipSelector > should render tip options correctly 16ms
     → Cannot read properties of undefined (reading 'addEventListener')
   × TipSelector > should highlight recommended tip option 10ms
     → [2mexpect([22m[31melement[39m[2m).toHaveClass([22m[32m[32m"ring-2 ring-primary"[32m[39m[2m)[22m

Expected the element to have class:
[32m  ring-2 ring-primary[39m
Received:
[31m  relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400[39m
   × TipSelector > should call onSelect with correct tip amount for preset option 11ms
     → expected "spy" to be called with arguments: [ 10 ][90m

Number of calls: [1m0[22m
[39m
   × TipSelector > should handle custom tip amount 10ms
     → Unable to find an element with the text: Custom Amount. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-white flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-primary text-white p-6 text-center"[39m
      [36m>[39m
        [36m<h1[39m
          [33mclass[39m=[32m"text-3xl font-bold"[39m
        [36m>[39m
          [0mAdd a Tip?[0m
        [36m</h1>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-lg mt-2 opacity-90"[39m
        [36m>[39m
          [0mThank you for your service[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 p-6 max-w-2xl mx-auto w-full"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mSelect tip amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-3 gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m18%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m9.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full"[39m
              [36m>[39m
                [0mRecommended[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m20%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m10.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m22%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m11.00[0m
              [36m</div>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mOr enter custom amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"absolute left-4 top-1/2 transform -translate-y-1/2 text-2xl text-gray-600"[39m
            [36m>[39m
              [0m$[0m
            [36m</span>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full pl-10 pr-4 py-4 text-2xl border-2 rounded-xl border-gray-300 focus:outline-none focus:border-primary"[39m
              [33mplaceholder[39m=[32m"0.00"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-gray-100 rounded-xl p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center text-2xl font-bold"[39m
          [36m>[39m
            [36m<span>[39m
              [0mTotal with tip:[0m
            [36m</span>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-primary"[39m
            [36m>[39m
              [0m$[0m
              [0m54.00[0m
            [36m</span>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-6 bg-gray-50 border-t"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-2xl mx-auto space-y-3"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-5 text-xl font-semibold rounded-xl transition-all shadow-lg bg-gray-300 text-gray-500 cursor-not-allowed"[39m
            [33mdisabled[39m=[32m""[39m
          [36m>[39m
            [0mContinue to Payment[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-4 text-gray-600 hover:text-gray-800 transition-colors"[39m
          [36m>[39m
            [0mContinue without tip[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-3 text-gray-500 hover:text-gray-700 transition-colors text-sm"[39m
          [36m>[39m
            [0m← Back to check[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
   × TipSelector > should handle no tip selection 10ms
     → Unable to find an element with the text: No Tip. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-white flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-primary text-white p-6 text-center"[39m
      [36m>[39m
        [36m<h1[39m
          [33mclass[39m=[32m"text-3xl font-bold"[39m
        [36m>[39m
          [0mAdd a Tip?[0m
        [36m</h1>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-lg mt-2 opacity-90"[39m
        [36m>[39m
          [0mThank you for your service[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 p-6 max-w-2xl mx-auto w-full"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mSelect tip amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-3 gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m18%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m9.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full"[39m
              [36m>[39m
                [0mRecommended[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m20%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m10.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m22%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m11.00[0m
              [36m</div>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mOr enter custom amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"absolute left-4 top-1/2 transform -translate-y-1/2 text-2xl text-gray-600"[39m
            [36m>[39m
              [0m$[0m
            [36m</span>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full pl-10 pr-4 py-4 text-2xl border-2 rounded-xl border-gray-300 focus:outline-none focus:border-primary"[39m
              [33mplaceholder[39m=[32m"0.00"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-gray-100 rounded-xl p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center text-2xl font-bold"[39m
          [36m>[39m
            [36m<span>[39m
              [0mTotal with tip:[0m
            [36m</span>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-primary"[39m
            [36m>[39m
              [0m$[0m
              [0m54.00[0m
            [36m</span>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-6 bg-gray-50 border-t"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-2xl mx-auto space-y-3"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-5 text-xl font-semibold rounded-xl transition-all shadow-lg bg-gray-300 text-gray-500 cursor-not-allowed"[39m
            [33mdisabled[39m=[32m""[39m
          [36m>[39m
            [0mContinue to Payment[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-4 text-gray-600 hover:text-gray-800 transition-colors"[39m
          [36m>[39m
            [0mContinue without tip[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-3 text-gray-500 hover:text-gray-700 transition-colors text-sm"[39m
          [36m>[39m
            [0m← Back to check[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
   × TipSelector > should validate custom tip input 10ms
     → Unable to find an element with the text: Custom Amount. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-white flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-primary text-white p-6 text-center"[39m
      [36m>[39m
        [36m<h1[39m
          [33mclass[39m=[32m"text-3xl font-bold"[39m
        [36m>[39m
          [0mAdd a Tip?[0m
        [36m</h1>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-lg mt-2 opacity-90"[39m
        [36m>[39m
          [0mThank you for your service[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 p-6 max-w-2xl mx-auto w-full"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mSelect tip amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-3 gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m18%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m9.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full"[39m
              [36m>[39m
                [0mRecommended[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m20%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m10.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m22%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m11.00[0m
              [36m</div>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mOr enter custom amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"absolute left-4 top-1/2 transform -translate-y-1/2 text-2xl text-gray-600"[39m
            [36m>[39m
              [0m$[0m
            [36m</span>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full pl-10 pr-4 py-4 text-2xl border-2 rounded-xl border-gray-300 focus:outline-none focus:border-primary"[39m
              [33mplaceholder[39m=[32m"0.00"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-gray-100 rounded-xl p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center text-2xl font-bold"[39m
          [36m>[39m
            [36m<span>[39m
              [0mTotal with tip:[0m
            [36m</span>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-primary"[39m
            [36m>[39m
              [0m$[0m
              [0m54.00[0m
            [36m</span>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-6 bg-gray-50 border-t"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-2xl mx-auto space-y-3"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-5 text-xl font-semibold rounded-xl transition-all shadow-lg bg-gray-300 text-gray-500 cursor-not-allowed"[39m
            [33mdisabled[39m=[32m""[39m
          [36m>[39m
            [0mContinue to Payment[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-4 text-gray-600 hover:text-gray-800 transition-colors"[39m
          [36m>[39m
            [0mContinue without tip[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-3 text-gray-500 hover:text-gray-700 transition-colors text-sm"[39m
          [36m>[39m
            [0m← Back to check[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
   × TipSelector > should display tip percentage for custom amount 9ms
     → Unable to find an element with the text: Custom Amount. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-white flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-primary text-white p-6 text-center"[39m
      [36m>[39m
        [36m<h1[39m
          [33mclass[39m=[32m"text-3xl font-bold"[39m
        [36m>[39m
          [0mAdd a Tip?[0m
        [36m</h1>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-lg mt-2 opacity-90"[39m
        [36m>[39m
          [0mThank you for your service[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 p-6 max-w-2xl mx-auto w-full"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mSelect tip amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-3 gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m18%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m9.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full"[39m
              [36m>[39m
                [0mRecommended[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m20%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m10.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m22%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m11.00[0m
              [36m</div>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mOr enter custom amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"absolute left-4 top-1/2 transform -translate-y-1/2 text-2xl text-gray-600"[39m
            [36m>[39m
              [0m$[0m
            [36m</span>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full pl-10 pr-4 py-4 text-2xl border-2 rounded-xl border-gray-300 focus:outline-none focus:border-primary"[39m
              [33mplaceholder[39m=[32m"0.00"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-gray-100 rounded-xl p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center text-2xl font-bold"[39m
          [36m>[39m
            [36m<span>[39m
              [0mTotal with tip:[0m
            [36m</span>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-primary"[39m
            [36m>[39m
              [0m$[0m
              [0m54.00[0m
            [36m</span>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-6 bg-gray-50 border-t"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-2xl mx-auto space-y-3"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-5 text-xl font-semibold rounded-xl transition-all shadow-lg bg-gray-300 text-gray-500 cursor-not-allowed"[39m
            [33mdisabled[39m=[32m""[39m
          [36m>[39m
            [0mContinue to Payment[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-4 text-gray-600 hover:text-gray-800 transition-colors"[39m
          [36m>[39m
            [0mContinue without tip[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-3 text-gray-500 hover:text-gray-700 transition-colors text-sm"[39m
          [36m>[39m
            [0m← Back to check[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
   × TipSelector > should handle back button 11ms
     → Unable to find an element with the text: ← Back. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-white flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-primary text-white p-6 text-center"[39m
      [36m>[39m
        [36m<h1[39m
          [33mclass[39m=[32m"text-3xl font-bold"[39m
        [36m>[39m
          [0mAdd a Tip?[0m
        [36m</h1>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-lg mt-2 opacity-90"[39m
        [36m>[39m
          [0mThank you for your service[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 p-6 max-w-2xl mx-auto w-full"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mSelect tip amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-3 gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m18%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m9.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full"[39m
              [36m>[39m
                [0mRecommended[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m20%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m10.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m22%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m11.00[0m
              [36m</div>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mOr enter custom amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"absolute left-4 top-1/2 transform -translate-y-1/2 text-2xl text-gray-600"[39m
            [36m>[39m
              [0m$[0m
            [36m</span>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full pl-10 pr-4 py-4 text-2xl border-2 rounded-xl border-gray-300 focus:outline-none focus:border-primary"[39m
              [33mplaceholder[39m=[32m"0.00"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-gray-100 rounded-xl p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center text-2xl font-bold"[39m
          [36m>[39m
            [36m<span>[39m
              [0mTotal with tip:[0m
            [36m</span>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-primary"[39m
            [36m>[39m
              [0m$[0m
              [0m54.00[0m
            [36m</span>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-6 bg-gray-50 border-t"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-2xl mx-auto space-y-3"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-5 text-xl font-semibold rounded-xl transition-all shadow-lg bg-gray-300 text-gray-500 cursor-not-allowed"[39m
            [33mdisabled[39m=[32m""[39m
          [36m>[39m
            [0mContinue to Payment[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-4 text-gray-600 hover:text-gray-800 transition-colors"[39m
          [36m>[39m
            [0mContinue without tip[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-3 text-gray-500 hover:text-gray-700 transition-colors text-sm"[39m
          [36m>[39m
            [0m← Back to check[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
   × TipSelector > should handle tip selection after viewing custom 10ms
     → Unable to find an element with the text: Custom Amount. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-white flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-primary text-white p-6 text-center"[39m
      [36m>[39m
        [36m<h1[39m
          [33mclass[39m=[32m"text-3xl font-bold"[39m
        [36m>[39m
          [0mAdd a Tip?[0m
        [36m</h1>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-lg mt-2 opacity-90"[39m
        [36m>[39m
          [0mThank you for your service[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 p-6 max-w-2xl mx-auto w-full"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mSelect tip amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-3 gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m18%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m9.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full"[39m
              [36m>[39m
                [0mRecommended[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m20%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m10.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m22%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m11.00[0m
              [36m</div>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mOr enter custom amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"absolute left-4 top-1/2 transform -translate-y-1/2 text-2xl text-gray-600"[39m
            [36m>[39m
              [0m$[0m
            [36m</span>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full pl-10 pr-4 py-4 text-2xl border-2 rounded-xl border-gray-300 focus:outline-none focus:border-primary"[39m
              [33mplaceholder[39m=[32m"0.00"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-gray-100 rounded-xl p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center text-2xl font-bold"[39m
          [36m>[39m
            [36m<span>[39m
              [0mTotal with tip:[0m
            [36m</span>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-primary"[39m
            [36m>[39m
              [0m$[0m
              [0m54.00[0m
            [36m</span>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-6 bg-gray-50 border-t"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-2xl mx-auto space-y-3"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-5 text-xl font-semibold rounded-xl transition-all shadow-lg bg-gray-300 text-gray-500 cursor-not-allowed"[39m
            [33mdisabled[39m=[32m""[39m
          [36m>[39m
            [0mContinue to Payment[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-4 text-gray-600 hover:text-gray-800 transition-colors"[39m
          [36m>[39m
            [0mContinue without tip[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-3 text-gray-500 hover:text-gray-700 transition-colors text-sm"[39m
          [36m>[39m
            [0m← Back to check[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
   ✓ TipSelector > should format currency correctly 9ms
stderr | src/components/shared/errors/__tests__/ErrorBoundary.test.tsx > ErrorBoundary > Component level error boundary > renders error UI when child component throws
Error: Test error
    at ThrowError [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44) {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.

🚨 [ErrorBoundary] Caught Error: {
  error: {
    message: [32m'Test error'[39m,
    stack: [32m'Error: Test error\n'[39m +
      [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11)\n'[39m +
      [32m'    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n'[39m +
      [32m'    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n'[39m +
      [32m'    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n'[39m +
      [32m'    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n'[39m +
      [32m'    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n'[39m +
      [32m'    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n'[39m +
      [32m'    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n'[39m +
      [32m'    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)'[39m,
    name: [32m'Error'[39m
  },
  errorInfo: {
    componentStack: [32m'\n'[39m +
      [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)\n'[39m +
      [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
  },
  timestamp: [32m'2025-09-17T04:59:14.331Z'[39m,
  url: [32m'http://localhost:3000/'[39m,
  userAgent: [32m'Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/26.1.0'[39m
}
🔍 [ErrorBoundary] Error Analysis
Original Error: Error: Test error
    at ThrowError [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44)
Error Info: {
  componentStack: [32m'\n'[39m +
    [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)\n'[39m +
    [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
}
Component Stack: 
    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)
    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)
Error Stack: Error: Test error
    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11)
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)

stderr | src/components/shared/errors/__tests__/ErrorBoundary.test.tsx > ErrorBoundary > Component level error boundary > allows retry after error
Error: Test error
    at TestComponent [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:57:17[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44) {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <TestComponent> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.

🚨 [ErrorBoundary] Caught Error: {
  error: {
    message: [32m'Test error'[39m,
    stack: [32m'Error: Test error\n'[39m +
      [32m'    at TestComponent (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:57:17)\n'[39m +
      [32m'    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n'[39m +
      [32m'    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n'[39m +
      [32m'    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n'[39m +
      [32m'    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n'[39m +
      [32m'    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n'[39m +
      [32m'    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n'[39m +
      [32m'    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n'[39m +
      [32m'    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)'[39m,
    name: [32m'Error'[39m
  },
  errorInfo: {
    componentStack: [32m'\n'[39m +
      [32m'    at TestComponent (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:66:17)\n'[39m +
      [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
  },
  timestamp: [32m'2025-09-17T04:59:14.342Z'[39m,
  url: [32m'http://localhost:3000/'[39m,
  userAgent: [32m'Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/26.1.0'[39m
}
🔍 [ErrorBoundary] Error Analysis
Original Error: Error: Test error
    at TestComponent [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:57:17[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44)
Error Info: {
  componentStack: [32m'\n'[39m +
    [32m'    at TestComponent (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:66:17)\n'[39m +
    [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
}
Component Stack: 
    at TestComponent (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:66:17)
    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)
Error Stack: Error: Test error
    at TestComponent (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:57:17)
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)

stderr | src/components/shared/errors/__tests__/ErrorBoundary.test.tsx > ErrorBoundary > Component level error boundary > renders custom fallback when provided
Error: Test error
    at ThrowError [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44) {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.

🚨 [ErrorBoundary] Caught Error: {
  error: {
    message: [32m'Test error'[39m,
    stack: [32m'Error: Test error\n'[39m +
      [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11)\n'[39m +
      [32m'    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n'[39m +
      [32m'    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n'[39m +
      [32m'    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n'[39m +
      [32m'    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n'[39m +
      [32m'    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n'[39m +
      [32m'    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n'[39m +
      [32m'    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n'[39m +
      [32m'    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)'[39m,
    name: [32m'Error'[39m
  },
  errorInfo: {
    componentStack: [32m'\n'[39m +
      [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)\n'[39m +
      [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
  },
  timestamp: [32m'2025-09-17T04:59:14.350Z'[39m,
  url: [32m'http://localhost:3000/'[39m,
  userAgent: [32m'Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/26.1.0'[39m
}
🔍 [ErrorBoundary] Error Analysis
Original Error: Error: Test error
    at ThrowError [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44)
Error Info: {
  componentStack: [32m'\n'[39m +
    [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)\n'[39m +
    [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
}
Component Stack: 
    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)
    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)
Error Stack: Error: Test error
    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11)
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)

stderr | src/components/shared/errors/__tests__/ErrorBoundary.test.tsx > ErrorBoundary > Component level error boundary > calls onError callback when error occurs
Error: Test error
    at ThrowError [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44) {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.

🚨 [ErrorBoundary] Caught Error: {
  error: {
    message: [32m'Test error'[39m,
    stack: [32m'Error: Test error\n'[39m +
      [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11)\n'[39m +
      [32m'    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n'[39m +
      [32m'    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n'[39m +
      [32m'    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n'[39m +
      [32m'    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n'[39m +
      [32m'    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n'[39m +
      [32m'    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n'[39m +
      [32m'    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n'[39m +
      [32m'    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)'[39m,
    name: [32m'Error'[39m
  },
  errorInfo: {
    componentStack: [32m'\n'[39m +
      [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)\n'[39m +
      [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
  },
  timestamp: [32m'2025-09-17T04:59:14.358Z'[39m,
  url: [32m'http://localhost:3000/'[39m,
  userAgent: [32m'Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/26.1.0'[39m
}
🔍 [ErrorBoundary] Error Analysis
Original Error: Error: Test error
    at ThrowError [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44)
Error Info: {
  componentStack: [32m'\n'[39m +
    [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)\n'[39m +
    [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
}
Component Stack: 
    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)
    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)
Error Stack: Error: Test error
    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11)
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)

stderr | src/components/shared/errors/__tests__/ErrorBoundary.test.tsx > ErrorBoundary > Page and Section error boundaries > renders section error UI
Error: Test error
    at ThrowError [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44) {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.

🚨 [ErrorBoundary] Caught Error: {
  error: {
    message: [32m'Test error'[39m,
    stack: [32m'Error: Test error\n'[39m +
      [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11)\n'[39m +
      [32m'    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n'[39m +
      [32m'    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n'[39m +
      [32m'    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n'[39m +
      [32m'    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n'[39m +
      [32m'    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n'[39m +
      [32m'    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n'[39m +
      [32m'    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n'[39m +
      [32m'    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)'[39m,
    name: [32m'Error'[39m
  },
  errorInfo: {
    componentStack: [32m'\n'[39m +
      [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)\n'[39m +
      [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
  },
  timestamp: [32m'2025-09-17T04:59:14.368Z'[39m,
  url: [32m'http://localhost:3000/'[39m,
  userAgent: [32m'Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/26.1.0'[39m
}
🔍 [ErrorBoundary] Error Analysis
Original Error: Error: Test error
    at ThrowError [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44)
Error Info: {
  componentStack: [32m'\n'[39m +
    [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)\n'[39m +
    [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
}
Component Stack: 
    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)
    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)
Error Stack: Error: Test error
    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11)
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)

stderr | src/components/shared/errors/__tests__/ErrorBoundary.test.tsx > ErrorBoundary > Page and Section error boundaries > renders page error UI
Error: Test error
    at ThrowError [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44) {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.

🚨 [ErrorBoundary] Caught Error: {
  error: {
    message: [32m'Test error'[39m,
    stack: [32m'Error: Test error\n'[39m +
      [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11)\n'[39m +
      [32m'    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n'[39m +
      [32m'    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n'[39m +
      [32m'    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n'[39m +
      [32m'    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n'[39m +
      [32m'    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n'[39m +
      [32m'    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n'[39m +
      [32m'    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n'[39m +
      [32m'    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)'[39m,
    name: [32m'Error'[39m
  },
  errorInfo: {
    componentStack: [32m'\n'[39m +
      [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)\n'[39m +
      [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
  },
  timestamp: [32m'2025-09-17T04:59:14.378Z'[39m,
  url: [32m'http://localhost:3000/'[39m,
  userAgent: [32m'Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/26.1.0'[39m
}
🔍 [ErrorBoundary] Error Analysis
Original Error: Error: Test error
    at ThrowError [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44)
Error Info: {
  componentStack: [32m'\n'[39m +
    [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)\n'[39m +
    [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
}
Component Stack: 
    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)
    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)
Error Stack: Error: Test error
    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11)
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)

stderr | src/components/shared/errors/__tests__/ErrorBoundary.test.tsx > ErrorBoundary > Page and Section error boundaries > shows error details in development for page level
Error: Test error
    at ThrowError [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44) {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.

🚨 [ErrorBoundary] Caught Error: {
  error: {
    message: [32m'Test error'[39m,
    stack: [32m'Error: Test error\n'[39m +
      [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11)\n'[39m +
      [32m'    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n'[39m +
      [32m'    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n'[39m +
      [32m'    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n'[39m +
      [32m'    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n'[39m +
      [32m'    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n'[39m +
      [32m'    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n'[39m +
      [32m'    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n'[39m +
      [32m'    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)'[39m,
    name: [32m'Error'[39m
  },
  errorInfo: {
    componentStack: [32m'\n'[39m +
      [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)\n'[39m +
      [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
  },
  timestamp: [32m'2025-09-17T04:59:14.388Z'[39m,
  url: [32m'http://localhost:3000/'[39m,
  userAgent: [32m'Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/26.1.0'[39m
}
🔍 [ErrorBoundary] Error Analysis
Original Error: Error: Test error
    at ThrowError [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44)
Error Info: {
  componentStack: [32m'\n'[39m +
    [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)\n'[39m +
    [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
}
Component Stack: 
    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)
    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)
Error Stack: Error: Test error
    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11)
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)

stderr | src/components/shared/errors/__tests__/ErrorBoundary.test.tsx > ErrorBoundary > Page and Section error boundaries > hides error details in production for page level
Error: Test error
    at ThrowError [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44) {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.

🚨 [ErrorBoundary] Caught Error: {
  error: {
    message: [32m'Test error'[39m,
    stack: [32m'Error: Test error\n'[39m +
      [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11)\n'[39m +
      [32m'    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n'[39m +
      [32m'    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n'[39m +
      [32m'    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n'[39m +
      [32m'    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n'[39m +
      [32m'    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n'[39m +
      [32m'    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n'[39m +
      [32m'    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n'[39m +
      [32m'    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)'[39m,
    name: [32m'Error'[39m
  },
  errorInfo: {
    componentStack: [32m'\n'[39m +
      [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)\n'[39m +
      [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
  },
  timestamp: [32m'2025-09-17T04:59:14.398Z'[39m,
  url: [32m'http://localhost:3000/'[39m,
  userAgent: [32m'Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/26.1.0'[39m
}

stderr | src/components/shared/errors/__tests__/ErrorBoundary.test.tsx > ErrorBoundary > withErrorBoundary HOC > wraps component with error boundary
Error: HOC test error
    at TestComponent [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:181:32[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44) {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'HOC test error'[39m
}

The above error occurred in the <TestComponent> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.

🚨 [ErrorBoundary] Caught Error: {
  error: {
    message: [32m'HOC test error'[39m,
    stack: [32m'Error: HOC test error\n'[39m +
      [32m'    at TestComponent (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:181:32)\n'[39m +
      [32m'    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n'[39m +
      [32m'    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n'[39m +
      [32m'    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n'[39m +
      [32m'    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n'[39m +
      [32m'    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n'[39m +
      [32m'    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n'[39m +
      [32m'    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n'[39m +
      [32m'    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)'[39m,
    name: [32m'Error'[39m
  },
  errorInfo: {
    componentStack: [32m'\n'[39m +
      [32m'    at TestComponent (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:210:32)\n'[39m +
      [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
  },
  timestamp: [32m'2025-09-17T04:59:14.408Z'[39m,
  url: [32m'http://localhost:3000/'[39m,
  userAgent: [32m'Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/26.1.0'[39m
}
🔍 [ErrorBoundary] Error Analysis
Original Error: Error: HOC test error
    at TestComponent [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:181:32[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44)
Error Info: {
  componentStack: [32m'\n'[39m +
    [32m'    at TestComponent (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:210:32)\n'[39m +
    [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
}
Component Stack: 
    at TestComponent (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:210:32)
    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)
Error Stack: Error: HOC test error
    at TestComponent (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:181:32)
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)

stderr | src/components/shared/errors/__tests__/ErrorBoundary.test.tsx > ErrorBoundary > withErrorBoundary HOC > passes error boundary props
Error: Test
    at TestComponent [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:196:15[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44) {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test'[39m
}

The above error occurred in the <TestComponent> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.

🚨 [ErrorBoundary] Caught Error: {
  error: {
    message: [32m'Test'[39m,
    stack: [32m'Error: Test\n'[39m +
      [32m'    at TestComponent (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:196:15)\n'[39m +
      [32m'    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n'[39m +
      [32m'    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n'[39m +
      [32m'    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n'[39m +
      [32m'    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n'[39m +
      [32m'    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n'[39m +
      [32m'    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n'[39m +
      [32m'    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n'[39m +
      [32m'    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)'[39m,
    name: [32m'Error'[39m
  },
  errorInfo: {
    componentStack: [32m'\n'[39m +
      [32m'    at TestComponent (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:234:15)\n'[39m +
      [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
  },
  timestamp: [32m'2025-09-17T04:59:14.417Z'[39m,
  url: [32m'http://localhost:3000/'[39m,
  userAgent: [32m'Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/26.1.0'[39m
}
🔍 [ErrorBoundary] Error Analysis
Original Error: Error: Test
    at TestComponent [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:196:15[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44)
Error Info: {
  componentStack: [32m'\n'[39m +
    [32m'    at TestComponent (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:234:15)\n'[39m +
    [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
}
Component Stack: 
    at TestComponent (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:234:15)
    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)
Error Stack: Error: Test
    at TestComponent (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:196:15)
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)

stderr | src/components/shared/errors/__tests__/ErrorBoundary.test.tsx > ErrorBoundary > Error logging > logs errors in development
Error: Test error
    at ThrowError [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44) {
  [stack]: [36m[Getter/Setter][39m,
  [message]: [32m'Test error'[39m
}

The above error occurred in the <ThrowError> component.

React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.

🚨 [ErrorBoundary] Caught Error: {
  error: {
    message: [32m'Test error'[39m,
    stack: [32m'Error: Test error\n'[39m +
      [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11)\n'[39m +
      [32m'    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)\n'[39m +
      [32m'    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)\n'[39m +
      [32m'    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)\n'[39m +
      [32m'    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)\n'[39m +
      [32m'    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)\n'[39m +
      [32m'    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)\n'[39m +
      [32m'    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)\n'[39m +
      [32m'    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)\n'[39m +
      [32m'    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)'[39m,
    name: [32m'Error'[39m
  },
  errorInfo: {
    componentStack: [32m'\n'[39m +
      [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)\n'[39m +
      [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
  },
  timestamp: [32m'2025-09-17T04:59:14.426Z'[39m,
  url: [32m'http://localhost:3000/'[39m,
  userAgent: [32m'Mozilla/5.0 (darwin) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/26.1.0'[39m
}
🔍 [ErrorBoundary] Error Analysis
Original Error: Error: Test error
    at ThrowError [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11[90m)[39m
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/[4mreact-dom[24m/cjs/react-dom-client.development.js:14462:44)
Error Info: {
  componentStack: [32m'\n'[39m +
    [32m'    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)\n'[39m +
    [32m'    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)'[39m
}
Component Stack: 
    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:11:23)
    at ErrorBoundary (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/ErrorBoundary.tsx:18:1)
Error Stack: Error: Test error
    at ThrowError (/Users/mikeyoung/CODING/rebuild-6.0/client/src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:10:11)
    at Object.react-stack-bottom-frame (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:23863:20)
    at renderWithHooks (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:5529:22)
    at updateFunctionComponent (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:8897:19)
    at beginWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:10522:18)
    at runWithFiberInDEV (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:1522:13)
    at performUnitOfWork (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:15140:22)
    at workLoopSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14956:41)
    at renderRootSync (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14936:11)
    at performWorkOnRoot (/Users/mikeyoung/CODING/rebuild-6.0/node_modules/react-dom/cjs/react-dom-client.development.js:14462:44)

 ❯ src/components/shared/errors/__tests__/ErrorBoundary.test.tsx (13 tests | 2 failed) 128ms
   ✓ ErrorBoundary > Component level error boundary > renders children when there is no error 9ms
   ✓ ErrorBoundary > Component level error boundary > renders error UI when child component throws 12ms
   ✓ ErrorBoundary > Component level error boundary > allows retry after error 9ms
   ✓ ErrorBoundary > Component level error boundary > renders custom fallback when provided 7ms
   ✓ ErrorBoundary > Component level error boundary > calls onError callback when error occurs 9ms
   ✓ ErrorBoundary > Page and Section error boundaries > renders section error UI 10ms
   ✓ ErrorBoundary > Page and Section error boundaries > renders page error UI 11ms
   ✓ ErrorBoundary > Page and Section error boundaries > shows error details in development for page level 11ms
   ✓ ErrorBoundary > Page and Section error boundaries > hides error details in production for page level 9ms
   ✓ ErrorBoundary > withErrorBoundary HOC > wraps component with error boundary 9ms
   ✓ ErrorBoundary > withErrorBoundary HOC > passes error boundary props 10ms
   × ErrorBoundary > Error logging > logs errors in development 9ms
     → [Function error] is not a spy or a call to a spy!
   × ErrorBoundary > Error logging > does not log in production 7ms
     → console.error.mockClear is not a function
stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > connect > should establish WebSocket connection with auth params
[2025-09-17T04:59:14.493Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.493Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > connect > should establish WebSocket connection with auth params
[2025-09-17T04:59:14.493Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > connect > should establish WebSocket connection with auth params
[2025-09-17T04:59:14.493Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > connect > should establish WebSocket connection with auth params
WebSocket connected
[2025-09-17T04:59:14.493Z] [INFO] [EventEmitter] Emitting 'connected', handlers: 0
[2025-09-17T04:59:14.493Z] [INFO] [EventEmitter] WARNING: No handlers for event 'connected'

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > connect > should handle missing auth session
[2025-09-17T04:59:14.503Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.503Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > connect > should handle missing auth session
[2025-09-17T04:59:14.503Z] [WARN] [Auth] No Supabase session available
[2025-09-17T04:59:14.503Z] [ERROR] [Auth] No authentication found in AuthContext or Supabase [90mundefined[39m [90mundefined[39m
[Auth] Error getting auth token: Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
    at WebSocketService.connect [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/websocket/WebSocketService.ts:87:17[90m)[39m

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > connect > should handle missing auth session
[2025-09-17T04:59:14.503Z] [WARN] ⚠️ WebSocket connecting without authentication (dev mode): Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
    at WebSocketService.connect [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/websocket/WebSocketService.ts:87:17[90m)[39m
[2025-09-17T04:59:14.503Z] [WARN] ⚠️ Connecting WebSocket without authentication token

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > connect > should handle missing restaurant ID
[2025-09-17T04:59:14.512Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.512Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > connect > should handle missing restaurant ID
[2025-09-17T04:59:14.512Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > connect > should handle missing restaurant ID
[2025-09-17T04:59:14.512Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > connect > should handle missing restaurant ID
WebSocket connected
[2025-09-17T04:59:14.512Z] [INFO] [EventEmitter] Emitting 'connected', handlers: 0
[2025-09-17T04:59:14.512Z] [INFO] [EventEmitter] WARNING: No handlers for event 'connected'

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > connect > should not connect if already connected
[2025-09-17T04:59:14.522Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.522Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > connect > should not connect if already connected
[2025-09-17T04:59:14.522Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > connect > should not connect if already connected
[2025-09-17T04:59:14.522Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > connect > should not connect if already connected
WebSocket connected
[2025-09-17T04:59:14.522Z] [INFO] [EventEmitter] Emitting 'connected', handlers: 0
[2025-09-17T04:59:14.522Z] [INFO] [EventEmitter] WARNING: No handlers for event 'connected'

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > connect > should not connect if already connected
WebSocket already connected or connecting

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > disconnect > should close WebSocket connection
[2025-09-17T04:59:14.531Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.531Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > disconnect > should close WebSocket connection
[2025-09-17T04:59:14.531Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > disconnect > should close WebSocket connection
[2025-09-17T04:59:14.531Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > disconnect > should close WebSocket connection
WebSocket connected
[2025-09-17T04:59:14.531Z] [INFO] [EventEmitter] Emitting 'connected', handlers: 0
[2025-09-17T04:59:14.531Z] [INFO] [EventEmitter] WARNING: No handlers for event 'connected'

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > send > should send messages when connected
[2025-09-17T04:59:14.543Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.543Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > send > should send messages when connected
[2025-09-17T04:59:14.543Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > send > should send messages when connected
[2025-09-17T04:59:14.543Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > send > should send messages when connected
WebSocket connected
[2025-09-17T04:59:14.543Z] [INFO] [EventEmitter] Emitting 'connected', handlers: 0
[2025-09-17T04:59:14.543Z] [INFO] [EventEmitter] WARNING: No handlers for event 'connected'

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > send > should queue messages when not connected
Cannot send message - WebSocket not connected

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > send > should not send messages when not connected
Cannot send message - WebSocket not connected

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > send > should not send messages when not connected
[2025-09-17T04:59:14.558Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.558Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > send > should not send messages when not connected
[2025-09-17T04:59:14.558Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > send > should not send messages when not connected
[2025-09-17T04:59:14.558Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > send > should not send messages when not connected
WebSocket connected
[2025-09-17T04:59:14.558Z] [INFO] [EventEmitter] Emitting 'connected', handlers: 0
[2025-09-17T04:59:14.558Z] [INFO] [EventEmitter] WARNING: No handlers for event 'connected'

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > subscribe > should handle incoming messages
[2025-09-17T04:59:14.566Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.566Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > subscribe > should handle incoming messages
[2025-09-17T04:59:14.566Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > subscribe > should handle incoming messages
[2025-09-17T04:59:14.566Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > subscribe > should handle incoming messages
WebSocket connected
[2025-09-17T04:59:14.566Z] [INFO] [EventEmitter] Emitting 'connected', handlers: 0
[2025-09-17T04:59:14.566Z] [INFO] [EventEmitter] WARNING: No handlers for event 'connected'
[2025-09-17T04:59:14.566Z] [INFO] [WebSocket] Creating subscription for message type: 'test-message'
[2025-09-17T04:59:14.566Z] [INFO] [EventEmitter] Handler registered for event 'message', total handlers: 1
[2025-09-17T04:59:14.566Z] [INFO] [WebSocket] Raw message received: { type: [32m'test-message'[39m, payload: [32m'has payload'[39m }
[2025-09-17T04:59:14.566Z] [INFO] [WebSocket] Emitting 'message' event with type: test-message
[2025-09-17T04:59:14.566Z] [INFO] [EventEmitter] Emitting 'message', handlers: 1
[2025-09-17T04:59:14.566Z] [INFO] [WebSocket] Subscription handler checking: test-message === test-message?
[2025-09-17T04:59:14.566Z] [INFO] [WebSocket] Match! Calling callback for test-message
[2025-09-17T04:59:14.566Z] [INFO] [WebSocket] Emitting specific event 'message:test-message'
[2025-09-17T04:59:14.566Z] [INFO] [EventEmitter] Emitting 'message:test-message', handlers: 0
[2025-09-17T04:59:14.566Z] [INFO] [EventEmitter] WARNING: No handlers for event 'message:test-message'

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > subscribe > should return unsubscribe function
[2025-09-17T04:59:14.575Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.575Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > subscribe > should return unsubscribe function
[2025-09-17T04:59:14.575Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > subscribe > should return unsubscribe function
[2025-09-17T04:59:14.575Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > subscribe > should return unsubscribe function
WebSocket connected
[2025-09-17T04:59:14.575Z] [INFO] [EventEmitter] Emitting 'connected', handlers: 0
[2025-09-17T04:59:14.575Z] [INFO] [EventEmitter] WARNING: No handlers for event 'connected'
[2025-09-17T04:59:14.575Z] [INFO] [WebSocket] Creating subscription for message type: 'test-message'
[2025-09-17T04:59:14.575Z] [INFO] [EventEmitter] Handler registered for event 'message', total handlers: 1
[2025-09-17T04:59:14.575Z] [INFO] [WebSocket] Raw message received: { type: [32m'test-message'[39m, payload: [32m'has payload'[39m }
[2025-09-17T04:59:14.575Z] [INFO] [WebSocket] Emitting 'message' event with type: test-message
[2025-09-17T04:59:14.575Z] [INFO] [EventEmitter] Emitting 'message', handlers: 1
[2025-09-17T04:59:14.575Z] [INFO] [WebSocket] Subscription handler checking: test-message === test-message?
[2025-09-17T04:59:14.575Z] [INFO] [WebSocket] Match! Calling callback for test-message
[2025-09-17T04:59:14.575Z] [INFO] [WebSocket] Emitting specific event 'message:test-message'
[2025-09-17T04:59:14.575Z] [INFO] [EventEmitter] Emitting 'message:test-message', handlers: 0
[2025-09-17T04:59:14.575Z] [INFO] [EventEmitter] WARNING: No handlers for event 'message:test-message'
[2025-09-17T04:59:14.575Z] [INFO] [WebSocket] Raw message received: { type: [32m'test-message'[39m, payload: [32m'has payload'[39m }
[2025-09-17T04:59:14.575Z] [INFO] [WebSocket] Emitting 'message' event with type: test-message
[2025-09-17T04:59:14.575Z] [INFO] [EventEmitter] Emitting 'message', handlers: 0
[2025-09-17T04:59:14.575Z] [INFO] [EventEmitter] WARNING: No handlers for event 'message'
[2025-09-17T04:59:14.575Z] [INFO] [WebSocket] Emitting specific event 'message:test-message'
[2025-09-17T04:59:14.575Z] [INFO] [EventEmitter] Emitting 'message:test-message', handlers: 0
[2025-09-17T04:59:14.575Z] [INFO] [EventEmitter] WARNING: No handlers for event 'message:test-message'

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should attempt reconnection on unexpected close
[2025-09-17T04:59:14.583Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.583Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should attempt reconnection on unexpected close
[2025-09-17T04:59:14.583Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should attempt reconnection on unexpected close
[2025-09-17T04:59:14.583Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should attempt reconnection on unexpected close
WebSocket connected
[2025-09-17T04:59:14.583Z] [INFO] [EventEmitter] Emitting 'connected', handlers: 0
[2025-09-17T04:59:14.583Z] [INFO] [EventEmitter] WARNING: No handlers for event 'connected'

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should attempt reconnection on unexpected close
WebSocket closed: [33m1006[39m Connection lost
[2025-09-17T04:59:44.583Z] [INFO] [EventEmitter] Emitting 'disconnected', handlers: 0
[2025-09-17T04:59:44.583Z] [INFO] [EventEmitter] WARNING: No handlers for event 'disconnected'
Scheduling reconnection attempt 1 in 2519ms (exponential backoff)

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should attempt reconnection on unexpected close
[2025-09-17T04:59:47.101Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:47.101Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should attempt reconnection on unexpected close
[2025-09-17T04:59:47.101Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should attempt reconnection on unexpected close
[2025-09-17T04:59:47.101Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should not reconnect on intentional close
[2025-09-17T04:59:14.592Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.592Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should not reconnect on intentional close
[2025-09-17T04:59:14.592Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should not reconnect on intentional close
[2025-09-17T04:59:14.592Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should not reconnect on intentional close
WebSocket connected
[2025-09-17T04:59:14.592Z] [INFO] [EventEmitter] Emitting 'connected', handlers: 0
[2025-09-17T04:59:14.592Z] [INFO] [EventEmitter] WARNING: No handlers for event 'connected'

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T04:59:14.600Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.600Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T04:59:14.600Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T04:59:14.600Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
WebSocket error: Event { isTrusted: [36m[Getter][39m }
[2025-09-17T04:59:14.600Z] [INFO] [EventEmitter] Emitting 'error', handlers: 0
[2025-09-17T04:59:14.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'error'
WebSocket closed: [33m1006[39m 
[2025-09-17T04:59:14.600Z] [INFO] [EventEmitter] Emitting 'disconnected', handlers: 0
[2025-09-17T04:59:14.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'disconnected'
Scheduling reconnection attempt 1 in 2011ms (exponential backoff)

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T04:59:16.611Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:16.611Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T04:59:16.611Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T04:59:16.611Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
WebSocket error: Event { isTrusted: [36m[Getter][39m }
[2025-09-17T04:59:49.600Z] [INFO] [EventEmitter] Emitting 'error', handlers: 0
[2025-09-17T04:59:49.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'error'
WebSocket closed: [33m1006[39m 
[2025-09-17T04:59:49.600Z] [INFO] [EventEmitter] Emitting 'disconnected', handlers: 0
[2025-09-17T04:59:49.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'disconnected'
Scheduling reconnection attempt 2 in 4284ms (exponential backoff)

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T04:59:53.883Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:53.883Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T04:59:53.883Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T04:59:53.883Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
WebSocket error: Event { isTrusted: [36m[Getter][39m }
[2025-09-17T05:00:24.600Z] [INFO] [EventEmitter] Emitting 'error', handlers: 0
[2025-09-17T05:00:24.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'error'
WebSocket closed: [33m1006[39m 
[2025-09-17T05:00:24.600Z] [INFO] [EventEmitter] Emitting 'disconnected', handlers: 0
[2025-09-17T05:00:24.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'disconnected'
Scheduling reconnection attempt 3 in 8866ms (exponential backoff)

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:00:33.466Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T05:00:33.466Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:00:33.466Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:00:33.466Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
WebSocket error: Event { isTrusted: [36m[Getter][39m }
[2025-09-17T05:00:59.600Z] [INFO] [EventEmitter] Emitting 'error', handlers: 0
[2025-09-17T05:00:59.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'error'
WebSocket closed: [33m1006[39m 
[2025-09-17T05:00:59.600Z] [INFO] [EventEmitter] Emitting 'disconnected', handlers: 0
[2025-09-17T05:00:59.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'disconnected'
Scheduling reconnection attempt 4 in 16639ms (exponential backoff)

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:01:16.239Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T05:01:16.239Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:01:16.239Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:01:16.239Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
WebSocket error: Event { isTrusted: [36m[Getter][39m }
[2025-09-17T05:01:34.600Z] [INFO] [EventEmitter] Emitting 'error', handlers: 0
[2025-09-17T05:01:34.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'error'
WebSocket closed: [33m1006[39m 
[2025-09-17T05:01:34.600Z] [INFO] [EventEmitter] Emitting 'disconnected', handlers: 0
[2025-09-17T05:01:34.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'disconnected'
Scheduling reconnection attempt 5 in 30000ms (exponential backoff)

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:02:04.600Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T05:02:04.600Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:02:04.600Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:02:04.600Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
WebSocket error: Event { isTrusted: [36m[Getter][39m }
[2025-09-17T05:02:09.600Z] [INFO] [EventEmitter] Emitting 'error', handlers: 0
[2025-09-17T05:02:09.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'error'
WebSocket closed: [33m1006[39m 
[2025-09-17T05:02:09.600Z] [INFO] [EventEmitter] Emitting 'disconnected', handlers: 0
[2025-09-17T05:02:09.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'disconnected'
Scheduling reconnection attempt 6 in 30000ms (exponential backoff)

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:02:39.600Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T05:02:39.600Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:02:39.600Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:02:39.600Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
WebSocket error: Event { isTrusted: [36m[Getter][39m }
[2025-09-17T05:02:44.600Z] [INFO] [EventEmitter] Emitting 'error', handlers: 0
[2025-09-17T05:02:44.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'error'
WebSocket closed: [33m1006[39m 
[2025-09-17T05:02:44.600Z] [INFO] [EventEmitter] Emitting 'disconnected', handlers: 0
[2025-09-17T05:02:44.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'disconnected'
Scheduling reconnection attempt 7 in 30000ms (exponential backoff)

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:03:14.600Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T05:03:14.600Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:03:14.600Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:03:14.600Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
WebSocket error: Event { isTrusted: [36m[Getter][39m }
[2025-09-17T05:03:19.600Z] [INFO] [EventEmitter] Emitting 'error', handlers: 0
[2025-09-17T05:03:19.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'error'
WebSocket closed: [33m1006[39m 
[2025-09-17T05:03:19.600Z] [INFO] [EventEmitter] Emitting 'disconnected', handlers: 0
[2025-09-17T05:03:19.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'disconnected'
Scheduling reconnection attempt 8 in 30000ms (exponential backoff)

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:03:49.600Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T05:03:49.600Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:03:49.600Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:03:49.600Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
WebSocket error: Event { isTrusted: [36m[Getter][39m }
[2025-09-17T05:03:54.600Z] [INFO] [EventEmitter] Emitting 'error', handlers: 0
[2025-09-17T05:03:54.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'error'
WebSocket closed: [33m1006[39m 
[2025-09-17T05:03:54.600Z] [INFO] [EventEmitter] Emitting 'disconnected', handlers: 0
[2025-09-17T05:03:54.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'disconnected'
Scheduling reconnection attempt 9 in 30000ms (exponential backoff)

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:04:24.600Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T05:04:24.600Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:04:24.600Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:04:24.600Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
WebSocket error: Event { isTrusted: [36m[Getter][39m }
[2025-09-17T05:04:29.600Z] [INFO] [EventEmitter] Emitting 'error', handlers: 0
[2025-09-17T05:04:29.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'error'
WebSocket closed: [33m1006[39m 
[2025-09-17T05:04:29.600Z] [INFO] [EventEmitter] Emitting 'disconnected', handlers: 0
[2025-09-17T05:04:29.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'disconnected'
Scheduling reconnection attempt 10 in 30000ms (exponential backoff)

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:04:59.600Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T05:04:59.600Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:04:59.600Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
[2025-09-17T05:04:59.600Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > reconnection > should stop reconnecting after max attempts
WebSocket error: Event { isTrusted: [36m[Getter][39m }
[2025-09-17T05:05:04.600Z] [INFO] [EventEmitter] Emitting 'error', handlers: 0
[2025-09-17T05:05:04.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'error'
WebSocket closed: [33m1006[39m 
[2025-09-17T05:05:04.600Z] [INFO] [EventEmitter] Emitting 'disconnected', handlers: 0
[2025-09-17T05:05:04.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'disconnected'
Max reconnection attempts reached
[2025-09-17T05:05:04.600Z] [INFO] [EventEmitter] Emitting 'maxReconnectAttemptsReached', handlers: 0
[2025-09-17T05:05:04.600Z] [INFO] [EventEmitter] WARNING: No handlers for event 'maxReconnectAttemptsReached'

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > heartbeat > should send ping messages periodically
[2025-09-17T04:59:14.612Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.612Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > heartbeat > should send ping messages periodically
[2025-09-17T04:59:14.612Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > heartbeat > should send ping messages periodically
[2025-09-17T04:59:14.612Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > heartbeat > should send ping messages periodically
WebSocket connected
[2025-09-17T04:59:14.612Z] [INFO] [EventEmitter] Emitting 'connected', handlers: 0
[2025-09-17T04:59:14.612Z] [INFO] [EventEmitter] WARNING: No handlers for event 'connected'

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > error handling > should emit error on invalid message format
[2025-09-17T04:59:14.622Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.622Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > error handling > should emit error on invalid message format
[2025-09-17T04:59:14.622Z] [INFO] [Auth] Supabase token obtained as fallback

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > error handling > should emit error on invalid message format
[2025-09-17T04:59:14.622Z] [INFO] 🔐 Using unified auth token for WebSocket

stderr | src/services/websocket/WebSocketService.test.ts > WebSocketService > error handling > should emit error on invalid message format
WebSocket connected
[2025-09-17T04:59:14.622Z] [INFO] [EventEmitter] Emitting 'connected', handlers: 0
[2025-09-17T04:59:14.622Z] [INFO] [EventEmitter] WARNING: No handlers for event 'connected'

 ❯ src/services/websocket/WebSocketService.test.ts (15 tests | 1 failed) 146ms
   ✓ WebSocketService > connect > should establish WebSocket connection with auth params 10ms
   × WebSocketService > connect > should handle missing auth session 9ms
     → expected null to be 'demo-token' // Object.is equality
   ✓ WebSocketService > connect > should handle missing restaurant ID 10ms
   ✓ WebSocketService > connect > should not connect if already connected 9ms
   ✓ WebSocketService > disconnect > should close WebSocket connection 12ms
   ✓ WebSocketService > send > should send messages when connected 9ms
   ✓ WebSocketService > send > should queue messages when not connected 7ms
   ✓ WebSocketService > send > should not send messages when not connected 8ms
   ✓ WebSocketService > subscribe > should handle incoming messages 9ms
   ✓ WebSocketService > subscribe > should return unsubscribe function 7ms
   ✓ WebSocketService > reconnection > should attempt reconnection on unexpected close 9ms
   ✓ WebSocketService > reconnection > should not reconnect on intentional close 8ms
   ✓ WebSocketService > reconnection > should stop reconnecting after max attempts 12ms
   ✓ WebSocketService > heartbeat > should send ping messages periodically 10ms
   ✓ WebSocketService > error handling > should emit error on invalid message format 9ms
 ❯ src/modules/payment/components/__tests__/PaymentMethodPicker.test.tsx (13 tests | 13 failed) 123ms
   × PaymentMethodPicker > should render all payment method options 10ms
     → Cannot read properties of undefined (reading 'toFixed')
   × PaymentMethodPicker > should select Square Terminal method 9ms
     → Cannot read properties of undefined (reading 'toFixed')
   × PaymentMethodPicker > should select Digital Wallet method 8ms
     → Cannot read properties of undefined (reading 'toFixed')
   × PaymentMethodPicker > should handle cash payment with exact amount 9ms
     → Cannot read properties of undefined (reading 'toFixed')
   × PaymentMethodPicker > should handle cash payment with custom amount and calculate change 9ms
     → Cannot read properties of undefined (reading 'toFixed')
   × PaymentMethodPicker > should handle quick cash amounts 7ms
     → Cannot read properties of undefined (reading 'toFixed')
   × PaymentMethodPicker > should validate cash amount is sufficient 8ms
     → Cannot read properties of undefined (reading 'toFixed')
   × PaymentMethodPicker > should select Manual Entry method 8ms
     → Cannot read properties of undefined (reading 'toFixed')
   × PaymentMethodPicker > should select Split Check method 8ms
     → Cannot read properties of undefined (reading 'toFixed')
   × PaymentMethodPicker > should handle back button 9ms
     → Cannot read properties of undefined (reading 'toFixed')
   × PaymentMethodPicker > should close cash modal on cancel 8ms
     → Cannot read properties of undefined (reading 'toFixed')
   × PaymentMethodPicker > should display total amount prominently 7ms
     → Cannot read properties of undefined (reading 'toFixed')
   × PaymentMethodPicker > should disable payment buttons while processing 10ms
     → Cannot read properties of undefined (reading 'toFixed')
stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should return all orders when no filters provided
[2025-09-17T04:59:14.838Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.838Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should return all orders when no filters provided
[2025-09-17T04:59:14.838Z] [WARN] [Auth] No Supabase session available
[2025-09-17T04:59:14.838Z] [ERROR] [Auth] No authentication found in AuthContext or Supabase [90mundefined[39m [90mundefined[39m
[Auth] Error getting auth token: Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:133:23[90m)[39m

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should return all orders when no filters provided
Failed to get auth token: Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:133:23[90m)[39m
[2025-09-17T04:59:14.839Z] [WARN] ⚠️ Using default restaurant ID for API request: /api/v1/orders

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should return all orders when no filters provided
[2025-09-17T04:59:14.840Z] [WARN] API call failed, falling back to mock data: TypeError: Cannot read properties of undefined (reading 'ok')
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/secureApi.ts:80:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:199:24[90m)[39m

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should filter orders by status
[2025-09-17T04:59:14.841Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.841Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should filter orders by status
[2025-09-17T04:59:14.841Z] [WARN] [Auth] No Supabase session available
[2025-09-17T04:59:14.841Z] [ERROR] [Auth] No authentication found in AuthContext or Supabase [90mundefined[39m [90mundefined[39m
[Auth] Error getting auth token: Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:133:23[90m)[39m

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should filter orders by status
Failed to get auth token: Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:133:23[90m)[39m
[2025-09-17T04:59:14.841Z] [WARN] ⚠️ Using default restaurant ID for API request: /api/v1/orders

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should filter orders by status
[2025-09-17T04:59:14.841Z] [WARN] API call failed, falling back to mock data: TypeError: Cannot read properties of undefined (reading 'ok')
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/secureApi.ts:80:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:199:24[90m)[39m

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should enforce rate limiting
[2025-09-17T04:59:14.841Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.841Z] [INFO] [Auth] Checking Supabase session as fallback...
[2025-09-17T04:59:14.841Z] [INFO] [Cache DEDUP] /api/v1/orders (waiting for in-flight request)
[2025-09-17T04:59:14.841Z] [INFO] [Cache DEDUP] /api/v1/orders (waiting for in-flight request)
[2025-09-17T04:59:14.841Z] [INFO] [Cache DEDUP] /api/v1/orders (waiting for in-flight request)
[2025-09-17T04:59:14.841Z] [INFO] [Cache DEDUP] /api/v1/orders (waiting for in-flight request)
[2025-09-17T04:59:14.841Z] [INFO] [Cache DEDUP] /api/v1/orders (waiting for in-flight request)
[2025-09-17T04:59:14.841Z] [INFO] [Cache DEDUP] /api/v1/orders (waiting for in-flight request)
[2025-09-17T04:59:14.841Z] [INFO] [Cache DEDUP] /api/v1/orders (waiting for in-flight request)
[2025-09-17T04:59:14.841Z] [INFO] [Cache DEDUP] /api/v1/orders (waiting for in-flight request)
[2025-09-17T04:59:14.841Z] [INFO] [Cache DEDUP] /api/v1/orders (waiting for in-flight request)

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should enforce rate limiting
[2025-09-17T04:59:14.841Z] [WARN] [Auth] No Supabase session available
[2025-09-17T04:59:14.841Z] [ERROR] [Auth] No authentication found in AuthContext or Supabase [90mundefined[39m [90mundefined[39m
[Auth] Error getting auth token: Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:133:23[90m)[39m

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should enforce rate limiting
Failed to get auth token: Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:133:23[90m)[39m
[2025-09-17T04:59:14.841Z] [WARN] ⚠️ Using default restaurant ID for API request: /api/v1/orders

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should enforce rate limiting
[2025-09-17T04:59:14.842Z] [WARN] API call failed, falling back to mock data: TypeError: Cannot read properties of undefined (reading 'ok')
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/secureApi.ts:80:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:199:24[90m)[39m
[2025-09-17T04:59:14.842Z] [WARN] API call failed, falling back to mock data: TypeError: Cannot read properties of undefined (reading 'ok')
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/secureApi.ts:80:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:199:24[90m)[39m
[2025-09-17T04:59:14.842Z] [WARN] API call failed, falling back to mock data: TypeError: Cannot read properties of undefined (reading 'ok')
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/secureApi.ts:80:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:199:24[90m)[39m
[2025-09-17T04:59:14.842Z] [WARN] API call failed, falling back to mock data: TypeError: Cannot read properties of undefined (reading 'ok')
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/secureApi.ts:80:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:199:24[90m)[39m
[2025-09-17T04:59:14.842Z] [WARN] API call failed, falling back to mock data: TypeError: Cannot read properties of undefined (reading 'ok')
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/secureApi.ts:80:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:199:24[90m)[39m
[2025-09-17T04:59:14.842Z] [WARN] API call failed, falling back to mock data: TypeError: Cannot read properties of undefined (reading 'ok')
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/secureApi.ts:80:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:199:24[90m)[39m
[2025-09-17T04:59:14.842Z] [WARN] API call failed, falling back to mock data: TypeError: Cannot read properties of undefined (reading 'ok')
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/secureApi.ts:80:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:199:24[90m)[39m
[2025-09-17T04:59:14.842Z] [WARN] API call failed, falling back to mock data: TypeError: Cannot read properties of undefined (reading 'ok')
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/secureApi.ts:80:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:199:24[90m)[39m
[2025-09-17T04:59:14.842Z] [WARN] API call failed, falling back to mock data: TypeError: Cannot read properties of undefined (reading 'ok')
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/secureApi.ts:80:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:199:24[90m)[39m
[2025-09-17T04:59:14.842Z] [WARN] API call failed, falling back to mock data: TypeError: Cannot read properties of undefined (reading 'ok')
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/secureApi.ts:80:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:199:24[90m)[39m

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should enforce rate limiting
[2025-09-17T04:59:14.842Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.842Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should enforce rate limiting
[2025-09-17T04:59:14.842Z] [WARN] [Auth] No Supabase session available
[2025-09-17T04:59:14.842Z] [ERROR] [Auth] No authentication found in AuthContext or Supabase [90mundefined[39m [90mundefined[39m
[Auth] Error getting auth token: Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:133:23[90m)[39m

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should enforce rate limiting
Failed to get auth token: Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:133:23[90m)[39m
[2025-09-17T04:59:14.842Z] [WARN] ⚠️ Using default restaurant ID for API request: /api/v1/orders

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should enforce rate limiting
[2025-09-17T04:59:14.842Z] [WARN] API call failed, falling back to mock data: TypeError: Cannot read properties of undefined (reading 'ok')
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/secureApi.ts:80:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:199:24[90m)[39m

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrderById > should return order when found
[2025-09-17T04:59:14.843Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.843Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrderById > should return order when found
[2025-09-17T04:59:14.843Z] [WARN] [Auth] No Supabase session available
[2025-09-17T04:59:14.843Z] [ERROR] [Auth] No authentication found in AuthContext or Supabase [90mundefined[39m [90mundefined[39m
[Auth] Error getting auth token: Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:133:23[90m)[39m

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrderById > should return order when found
Failed to get auth token: Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:133:23[90m)[39m
[2025-09-17T04:59:14.843Z] [WARN] ⚠️ Using default restaurant ID for API request: /api/v1/orders/rest-1

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrderById > should return order when found
[2025-09-17T04:59:14.843Z] [WARN] API call failed, falling back to mock data: TypeError: Cannot read properties of undefined (reading 'ok')
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/secureApi.ts:80:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:199:24[90m)[39m

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrderById > should throw error when order not found
[2025-09-17T04:59:14.844Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.844Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrderById > should throw error when order not found
[2025-09-17T04:59:14.844Z] [WARN] [Auth] No Supabase session available
[2025-09-17T04:59:14.844Z] [ERROR] [Auth] No authentication found in AuthContext or Supabase [90mundefined[39m [90mundefined[39m
[Auth] Error getting auth token: Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:133:23[90m)[39m

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrderById > should throw error when order not found
Failed to get auth token: Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:133:23[90m)[39m
[2025-09-17T04:59:14.844Z] [WARN] ⚠️ Using default restaurant ID for API request: /api/v1/orders/rest-1

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrderById > should throw error when order not found
[2025-09-17T04:59:14.844Z] [WARN] API call failed, falling back to mock data: TypeError: Cannot read properties of undefined (reading 'ok')
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/secureApi.ts:80:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:199:24[90m)[39m

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > updateOrderStatus > should update order status successfully
[2025-09-17T04:59:14.845Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.845Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > updateOrderStatus > should update order status successfully
[2025-09-17T04:59:14.845Z] [WARN] [Auth] No Supabase session available
[2025-09-17T04:59:14.845Z] [ERROR] [Auth] No authentication found in AuthContext or Supabase [90mundefined[39m [90mundefined[39m
[Auth] Error getting auth token: Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:133:23[90m)[39m
    at OrderService.updateOrderStatus [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/orders/OrderService.ts:109:24[90m)[39m
    at [90m/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/orders/__tests__/OrderService.test.ts:136:22
    at [90mfile:///Users/mikeyoung/CODING/rebuild-6.0/client/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > updateOrderStatus > should update order status successfully
Failed to get auth token: Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:133:23[90m)[39m
    at OrderService.updateOrderStatus [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/orders/OrderService.ts:109:24[90m)[39m
    at [90m/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/orders/__tests__/OrderService.test.ts:136:22
    at [90mfile:///Users/mikeyoung/CODING/rebuild-6.0/client/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20
[2025-09-17T04:59:14.845Z] [WARN] ⚠️ Using default restaurant ID for API request: /api/v1/orders/rest-1/status

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > updateOrderStatus > should update order status successfully
[2025-09-17T04:59:14.845Z] [WARN] API call failed, falling back to mock data: TypeError: Cannot read properties of undefined (reading 'ok')
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/secureApi.ts:80:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:199:24[90m)[39m
    at OrderService.updateOrderStatus [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/orders/OrderService.ts:109:24[90m)[39m
    at [90m/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/orders/__tests__/OrderService.test.ts:136:22
    at [90mfile:///Users/mikeyoung/CODING/rebuild-6.0/client/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > updateOrderStatus > should throw error when order not found
[2025-09-17T04:59:14.845Z] [INFO] [Auth] getAuthToken called {
  hasAuthContextSession: [33mfalse[39m,
  hasAccessToken: [33mfalse[39m,
  tokenPreview: [32m'none'[39m
}
[2025-09-17T04:59:14.845Z] [INFO] [Auth] Checking Supabase session as fallback...

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > updateOrderStatus > should throw error when order not found
[2025-09-17T04:59:14.845Z] [WARN] [Auth] No Supabase session available
[2025-09-17T04:59:14.845Z] [ERROR] [Auth] No authentication found in AuthContext or Supabase [90mundefined[39m [90mundefined[39m
[Auth] Error getting auth token: Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:133:23[90m)[39m
    at OrderService.updateOrderStatus [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/orders/OrderService.ts:109:24[90m)[39m
    at [90m/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/orders/__tests__/OrderService.test.ts:144:7
    at [90mfile:///Users/mikeyoung/CODING/rebuild-6.0/client/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > updateOrderStatus > should throw error when order not found
Failed to get auth token: Error: Authentication required. Please log in.
    at getAuthToken [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/auth/index.ts:59:11[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:133:23[90m)[39m
    at OrderService.updateOrderStatus [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/orders/OrderService.ts:109:24[90m)[39m
    at [90m/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/orders/__tests__/OrderService.test.ts:144:7
    at [90mfile:///Users/mikeyoung/CODING/rebuild-6.0/client/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20
[2025-09-17T04:59:14.845Z] [WARN] ⚠️ Using default restaurant ID for API request: /api/v1/orders/rest-1/status

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > updateOrderStatus > should throw error when order not found
[2025-09-17T04:59:14.846Z] [WARN] API call failed, falling back to mock data: TypeError: Cannot read properties of undefined (reading 'ok')
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/secureApi.ts:80:21[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at HttpClient.request [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/http/httpClient.ts:199:24[90m)[39m
    at OrderService.updateOrderStatus [90m(/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/orders/OrderService.ts:109:24[90m)[39m
    at [90m/Users/mikeyoung/CODING/rebuild-6.0/client/[39msrc/services/orders/__tests__/OrderService.test.ts:144:7
    at [90mfile:///Users/mikeyoung/CODING/rebuild-6.0/client/[39mnode_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > submitOrder > should create new order with valid data
[2025-09-17T04:59:14.846Z] [INFO] [OrderService] submitOrder called with: rest-1
[2025-09-17T04:59:14.846Z] [INFO] [OrderService] Validating order: rest-1
[2025-09-17T04:59:14.846Z] [WARN] [OrderService] Validation failed: No items in order
[2025-09-17T04:59:14.846Z] [ERROR] [OrderService] Order validation failed, throwing error [90mundefined[39m [90mundefined[39m

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > submitOrder > should validate and sanitize input data
[2025-09-17T04:59:14.846Z] [INFO] [OrderService] submitOrder called with: rest-1
[2025-09-17T04:59:14.846Z] [INFO] [OrderService] Validating order: rest-1
[2025-09-17T04:59:14.846Z] [WARN] [OrderService] Validation failed: No items in order
[2025-09-17T04:59:14.846Z] [ERROR] [OrderService] Order validation failed, throwing error [90mundefined[39m [90mundefined[39m

stderr | src/services/orders/__tests__/OrderService.test.ts > OrderService > submitOrder > should generate sequential order numbers
[2025-09-17T04:59:14.847Z] [INFO] [OrderService] submitOrder called with: rest-1
[2025-09-17T04:59:14.847Z] [INFO] [OrderService] Validating order: rest-1
[2025-09-17T04:59:14.847Z] [WARN] [OrderService] Validation failed: No items in order
[2025-09-17T04:59:14.847Z] [ERROR] [OrderService] Order validation failed, throwing error [90mundefined[39m [90mundefined[39m

 ❯ src/services/orders/__tests__/OrderService.test.ts (10 tests | 10 failed) 18ms
   × OrderService > getOrders > should return all orders when no filters provided 3ms
     → Target cannot be null or undefined.
     → orderService.reset is not a function
   × OrderService > getOrders > should filter orders by status 1ms
     → Target cannot be null or undefined.
     → orderService.reset is not a function
   × OrderService > getOrders > should enforce rate limiting 2ms
     → promise resolved "[ { id: 'order-1', …(12) } ]" instead of rejecting
     → orderService.reset is not a function
   × OrderService > getOrderById > should return order when found 1ms
     → Order not found
     → orderService.reset is not a function
   × OrderService > getOrderById > should throw error when order not found 1ms
     → orderService.reset is not a function
   × OrderService > updateOrderStatus > should update order status successfully 1ms
     → Order not found
     → orderService.reset is not a function
   × OrderService > updateOrderStatus > should throw error when order not found 1ms
     → orderService.reset is not a function
   × OrderService > submitOrder > should create new order with valid data 0ms
     → Invalid order data - check console for details
     → orderService.reset is not a function
   × OrderService > submitOrder > should validate and sanitize input data 0ms
     → orderService.reset is not a function
   × OrderService > submitOrder > should generate sequential order numbers 1ms
     → Invalid order data - check console for details
     → orderService.reset is not a function
 ❯ src/components/shared/timers/ElapsedTimer.test.tsx (7 tests | 3 failed) 75ms
   ✓ ElapsedTimer > renders elapsed time in minutes format by default 10ms
   × ElapsedTimer > renders elapsed time in seconds format 9ms
     → Unable to find an element with the text: 30s. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex items-center gap-1 text-sm text-muted-foreground"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-clock h-3 w-3"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<path[39m
          [33md[39m=[32m"M12 6v6l4 2"[39m
        [36m/>[39m
        [36m<circle[39m
          [33mcx[39m=[32m"12"[39m
          [33mcy[39m=[32m"12"[39m
          [33mr[39m=[32m"10"[39m
        [36m/>[39m
      [36m</svg>[39m
      [36m<span>[39m
        [0m53974784s[0m
      [36m</span>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
   × ElapsedTimer > renders elapsed time in full format 9ms
     → Unable to find an element with the text: 1h 14m. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex items-center gap-1 text-sm text-muted-foreground"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-clock h-3 w-3"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<path[39m
          [33md[39m=[32m"M12 6v6l4 2"[39m
        [36m/>[39m
        [36m<circle[39m
          [33mcx[39m=[32m"12"[39m
          [33mcy[39m=[32m"12"[39m
          [33mr[39m=[32m"10"[39m
        [36m/>[39m
      [36m</svg>[39m
      [36m<span>[39m
        [0m14994h 13m[0m
      [36m</span>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
   × ElapsedTimer > renders full format without hours when less than 1 hour 8ms
     → Unable to find an element with the text: 14m 30s. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex items-center gap-1 text-sm text-muted-foreground"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-clock h-3 w-3"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<path[39m
          [33md[39m=[32m"M12 6v6l4 2"[39m
        [36m/>[39m
        [36m<circle[39m
          [33mcx[39m=[32m"12"[39m
          [33mcy[39m=[32m"12"[39m
          [33mr[39m=[32m"10"[39m
        [36m/>[39m
      [36m</svg>[39m
      [36m<span>[39m
        [0m14993h 13m[0m
      [36m</span>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
   ✓ ElapsedTimer > shows clock icon by default 9ms
   ✓ ElapsedTimer > hides clock icon when showIcon is false 11ms
   ✓ ElapsedTimer > applies custom className 8ms
stderr | src/modules/order-system/__tests__/checkout.e2e.test.tsx
[2025-09-17T04:59:15.001Z] [INFO] [restaurant-types] Created RestaurantContext with ID: restaurant-context-1758085155001

stderr | src/modules/order-system/__tests__/checkout.e2e.test.tsx
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

 ❯ src/modules/order-system/__tests__/checkout.e2e.test.tsx (1 test | 1 failed) 22ms
   × Checkout E2E Flow > happy path: checkout -> pay -> confirmation navigation 13ms
     → Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.
stderr | src/modules/payment/hooks/__tests__/useTablePayment.test.ts
[2025-09-17T04:59:15.052Z] [INFO] [restaurant-types] Created RestaurantContext with ID: restaurant-context-1758085155052

stderr | src/modules/payment/hooks/__tests__/useTablePayment.test.ts
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

 ❯ src/modules/payment/hooks/__tests__/useTablePayment.test.ts (9 tests | 9 failed) 88ms
   × useTablePayment > presentCheck > should present check and update state 9ms
     → useApiRequest.mockReturnValue is not a function
   × useTablePayment > presentCheck > should handle presentation errors 10ms
     → useApiRequest.mockReturnValue is not a function
   × useTablePayment > calculateWithTip > should calculate tip and update check 8ms
     → useApiRequest.mockReturnValue is not a function
   × useTablePayment > processPayment > should process payment successfully 9ms
     → useApiRequest.mockReturnValue is not a function
   × useTablePayment > processPayment > should handle payment failures 8ms
     → useApiRequest.mockReturnValue is not a function
   × useTablePayment > createSplitSession > should create even split session 11ms
     → useApiRequest.mockReturnValue is not a function
   × useTablePayment > processSplitPayment > should process individual split payment 8ms
     → useApiRequest.mockReturnValue is not a function
   × useTablePayment > unlockCheck > should unlock check silently 8ms
     → useApiRequest.mockReturnValue is not a function
   × useTablePayment > unlockCheck > should handle unlock errors silently 8ms
     → useApiRequest.mockReturnValue is not a function
stderr | src/modules/voice/services/__tests__/VoiceCheckoutOrchestrator.test.ts > VoiceCheckoutOrchestrator > handleOrderConfirmation > should initiate checkout when action is checkout
[2025-09-17T04:59:15.251Z] [INFO] [EventEmitter] Handler registered for event 'checkout.confirmation.requested', total handlers: 1
[2025-09-17T04:59:15.251Z] [INFO] [EventEmitter] Handler registered for event 'checkout.initiated', total handlers: 1
[2025-09-17T04:59:15.251Z] [INFO] [EventEmitter] Emitting 'state.changed', handlers: 0
[2025-09-17T04:59:15.251Z] [INFO] [EventEmitter] WARNING: No handlers for event 'state.changed'
[2025-09-17T04:59:15.251Z] [INFO] [EventEmitter] Emitting 'checkout.confirmation.requested', handlers: 1

stderr | src/modules/voice/services/__tests__/VoiceCheckoutOrchestrator.test.ts > VoiceCheckoutOrchestrator > handleOrderConfirmation > should initiate checkout when action is checkout
[2025-09-17T04:59:17.251Z] [INFO] [EventEmitter] Emitting 'state.changed', handlers: 0
[2025-09-17T04:59:17.251Z] [INFO] [EventEmitter] WARNING: No handlers for event 'state.changed'
[2025-09-17T04:59:17.252Z] [INFO] [EventEmitter] Emitting 'checkout.initiated', handlers: 1

stderr | src/modules/voice/services/__tests__/VoiceCheckoutOrchestrator.test.ts > VoiceCheckoutOrchestrator > handleOrderConfirmation > should provide order summary when action is review
[2025-09-17T04:59:17.383Z] [INFO] [EventEmitter] Handler registered for event 'summary.provided', total handlers: 1
[2025-09-17T04:59:17.383Z] [INFO] [EventEmitter] Handler registered for event 'summary.text', total handlers: 1
[2025-09-17T04:59:17.383Z] [INFO] [EventEmitter] Emitting 'state.changed', handlers: 0
[2025-09-17T04:59:17.383Z] [INFO] [EventEmitter] WARNING: No handlers for event 'state.changed'
[2025-09-17T04:59:17.384Z] [INFO] [EventEmitter] Emitting 'summary.provided', handlers: 1
[2025-09-17T04:59:17.384Z] [INFO] [EventEmitter] Emitting 'summary.text', handlers: 1

stderr | src/modules/voice/services/__tests__/VoiceCheckoutOrchestrator.test.ts > VoiceCheckoutOrchestrator > handleOrderConfirmation > should cancel order when action is cancel
[2025-09-17T04:59:17.401Z] [INFO] [EventEmitter] Handler registered for event 'checkout.cancelled', total handlers: 1
[2025-09-17T04:59:17.401Z] [INFO] [EventEmitter] Emitting 'checkout.cancelled', handlers: 1

stderr | src/modules/voice/services/__tests__/VoiceCheckoutOrchestrator.test.ts > VoiceCheckoutOrchestrator > handleOrderConfirmation > should handle empty cart for checkout
[2025-09-17T04:59:17.412Z] [INFO] [EventEmitter] Handler registered for event 'checkout.error', total handlers: 1
[2025-09-17T04:59:17.412Z] [INFO] [EventEmitter] Emitting 'checkout.error', handlers: 1

stderr | src/modules/voice/services/__tests__/VoiceCheckoutOrchestrator.test.ts > VoiceCheckoutOrchestrator > handlePaymentMethodSelection > should emit payment method selected event
[2025-09-17T04:59:17.424Z] [INFO] [EventEmitter] Handler registered for event 'payment.method.selected', total handlers: 1
[2025-09-17T04:59:17.424Z] [INFO] [EventEmitter] Handler registered for event 'payment.feedback', total handlers: 1
[2025-09-17T04:59:17.424Z] [INFO] [EventEmitter] Emitting 'payment.method.selected', handlers: 1
[2025-09-17T04:59:17.424Z] [INFO] [EventEmitter] Emitting 'payment.feedback', handlers: 1

stderr | src/modules/voice/services/__tests__/VoiceCheckoutOrchestrator.test.ts > VoiceCheckoutOrchestrator > handlePaymentMethodSelection > should provide appropriate feedback for different payment methods
[2025-09-17T04:59:17.433Z] [INFO] [EventEmitter] Handler registered for event 'payment.feedback', total handlers: 1
[2025-09-17T04:59:17.433Z] [INFO] [EventEmitter] Emitting 'payment.method.selected', handlers: 0
[2025-09-17T04:59:17.433Z] [INFO] [EventEmitter] WARNING: No handlers for event 'payment.method.selected'
[2025-09-17T04:59:17.433Z] [INFO] [EventEmitter] Emitting 'payment.feedback', handlers: 1
[2025-09-17T04:59:17.433Z] [INFO] [EventEmitter] Emitting 'payment.method.selected', handlers: 0
[2025-09-17T04:59:17.433Z] [INFO] [EventEmitter] WARNING: No handlers for event 'payment.method.selected'
[2025-09-17T04:59:17.433Z] [INFO] [EventEmitter] Emitting 'payment.feedback', handlers: 1

stderr | src/modules/voice/services/__tests__/VoiceCheckoutOrchestrator.test.ts > VoiceCheckoutOrchestrator > handlePaymentSuccess > should navigate to confirmation and provide feedback
[2025-09-17T04:59:17.441Z] [INFO] [EventEmitter] Handler registered for event 'payment.success', total handlers: 1
[2025-09-17T04:59:17.441Z] [INFO] [EventEmitter] Handler registered for event 'payment.success.feedback', total handlers: 1
[2025-09-17T04:59:17.441Z] [INFO] [EventEmitter] Emitting 'state.changed', handlers: 0
[2025-09-17T04:59:17.441Z] [INFO] [EventEmitter] WARNING: No handlers for event 'state.changed'
[2025-09-17T04:59:17.441Z] [INFO] [EventEmitter] Emitting 'payment.success', handlers: 1
[2025-09-17T04:59:17.441Z] [INFO] [EventEmitter] Emitting 'payment.success.feedback', handlers: 1

stderr | src/modules/voice/services/__tests__/VoiceCheckoutOrchestrator.test.ts > VoiceCheckoutOrchestrator > handlePaymentError > should show error message and provide feedback
[2025-09-17T04:59:17.452Z] [INFO] [EventEmitter] Handler registered for event 'payment.error', total handlers: 1
[2025-09-17T04:59:17.452Z] [INFO] [EventEmitter] Handler registered for event 'payment.error.feedback', total handlers: 1
[2025-09-17T04:59:17.452Z] [INFO] [EventEmitter] Emitting 'state.changed', handlers: 0
[2025-09-17T04:59:17.452Z] [INFO] [EventEmitter] WARNING: No handlers for event 'state.changed'
[2025-09-17T04:59:17.452Z] [INFO] [EventEmitter] Emitting 'payment.error', handlers: 1
[2025-09-17T04:59:17.452Z] [INFO] [EventEmitter] Emitting 'payment.error.feedback', handlers: 1

stderr | src/modules/voice/services/__tests__/VoiceCheckoutOrchestrator.test.ts > VoiceCheckoutOrchestrator > state management > should track checkout state correctly
[2025-09-17T04:59:17.462Z] [INFO] [EventEmitter] Handler registered for event 'state.changed', total handlers: 1
[2025-09-17T04:59:17.462Z] [INFO] [EventEmitter] Emitting 'state.changed', handlers: 1
[2025-09-17T04:59:17.462Z] [INFO] [EventEmitter] Emitting 'summary.provided', handlers: 0
[2025-09-17T04:59:17.462Z] [INFO] [EventEmitter] WARNING: No handlers for event 'summary.provided'
[2025-09-17T04:59:17.462Z] [INFO] [EventEmitter] Emitting 'summary.text', handlers: 0
[2025-09-17T04:59:17.462Z] [INFO] [EventEmitter] WARNING: No handlers for event 'summary.text'

stderr | src/modules/voice/services/__tests__/VoiceCheckoutOrchestrator.test.ts > VoiceCheckoutOrchestrator > state management > should reset to idle state
[2025-09-17T04:59:17.476Z] [INFO] [EventEmitter] Emitting 'state.changed', handlers: 0
[2025-09-17T04:59:17.476Z] [INFO] [EventEmitter] WARNING: No handlers for event 'state.changed'
[2025-09-17T04:59:17.476Z] [INFO] [EventEmitter] Emitting 'summary.provided', handlers: 0
[2025-09-17T04:59:17.476Z] [INFO] [EventEmitter] WARNING: No handlers for event 'summary.provided'
[2025-09-17T04:59:17.476Z] [INFO] [EventEmitter] Emitting 'summary.text', handlers: 0
[2025-09-17T04:59:17.476Z] [INFO] [EventEmitter] WARNING: No handlers for event 'summary.text'
[2025-09-17T04:59:17.476Z] [INFO] [EventEmitter] Emitting 'state.changed', handlers: 0
[2025-09-17T04:59:17.476Z] [INFO] [EventEmitter] WARNING: No handlers for event 'state.changed'

stderr | src/modules/voice/services/__tests__/VoiceCheckoutOrchestrator.test.ts > VoiceCheckoutOrchestrator > summary text generation > should generate appropriate summary for empty cart
[2025-09-17T04:59:17.484Z] [INFO] [EventEmitter] Handler registered for event 'summary.empty', total handlers: 1
[2025-09-17T04:59:17.484Z] [INFO] [EventEmitter] Emitting 'summary.empty', handlers: 1

stderr | src/modules/voice/services/__tests__/VoiceCheckoutOrchestrator.test.ts > VoiceCheckoutOrchestrator > summary text generation > should generate detailed summary with items and modifications
[2025-09-17T04:59:17.493Z] [INFO] [EventEmitter] Handler registered for event 'summary.text', total handlers: 1
[2025-09-17T04:59:17.493Z] [INFO] [EventEmitter] Emitting 'state.changed', handlers: 0
[2025-09-17T04:59:17.493Z] [INFO] [EventEmitter] WARNING: No handlers for event 'state.changed'
[2025-09-17T04:59:17.493Z] [INFO] [EventEmitter] Emitting 'summary.provided', handlers: 0
[2025-09-17T04:59:17.493Z] [INFO] [EventEmitter] WARNING: No handlers for event 'summary.provided'
[2025-09-17T04:59:17.493Z] [INFO] [EventEmitter] Emitting 'summary.text', handlers: 1

 ✓ src/modules/voice/services/__tests__/VoiceCheckoutOrchestrator.test.ts (13 tests) 2269ms
   ✓ VoiceCheckoutOrchestrator > handleOrderConfirmation > should initiate checkout when action is checkout  2131ms
 ✓ src/hooks/useOrderHistory.test.tsx (8 tests) 496ms
 ✓ src/hooks/keyboard/__tests__/useAriaLive.test.ts (5 tests) 117ms
 ✓ src/components/shared/controls/SoundControl.test.tsx (9 tests) 118ms
 ✓ src/modules/voice/__tests__/realtimeGuards.test.ts (32 tests) 302ms
 ✓ src/hooks/__tests__/useAsyncState.test.ts (13 tests) 136ms
stderr | src/hooks/kiosk/__tests__/useOrderSubmission.test.tsx
[2025-09-17T04:59:18.789Z] [INFO] [restaurant-types] Created RestaurantContext with ID: restaurant-context-1758085158789

 ❯ src/hooks/kiosk/__tests__/useOrderSubmission.test.tsx (3 tests | 3 failed) 38ms
   × useOrderSubmission > should throw error when restaurant context is missing 9ms
     → Cannot read properties of undefined (reading 'mockReturnValue')
   × useOrderSubmission > should use restaurant ID from context instead of environment variable 9ms
     → Cannot read properties of undefined (reading 'mockReturnValue')
   × useOrderSubmission > should handle empty cart 9ms
     → Cannot read properties of undefined (reading 'mockReturnValue')
 ✓ src/components/shared/__tests__/LoadingSpinner.test.tsx (7 tests) 79ms
 ✓ src/services/audio/soundEffects.test.ts (13 tests) 128ms
 ✓ src/hooks/__tests__/useSoundNotifications.test.ts (9 tests) 94ms
 ✓ src/modules/floor-plan/components/__tests__/chip-monkey.test.tsx (4 tests) 50ms
 ✓ src/hooks/useSoundNotifications.test.tsx (9 tests) 97ms
 ✓ src/services/performance/performanceMonitor.test.ts (12 tests) 142ms
 ✓ src/modules/filters/hooks/__tests__/useOrderFilters.test.ts (8 tests) 87ms
stdout | src/modules/voice/services/__tests__/voice-agent-modes.spec.ts > Voice Agent Modes - CI Safety Guards > Agent mode detection > should detect employee mode for valid employee roles
[2025-09-17T04:59:19.676Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'manager'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'manager'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'manager'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'admin'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'admin'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'admin'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'owner'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'owner'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'owner'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'server'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'server'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'server'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'cashier'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'cashier'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'cashier'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'kitchen'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'kitchen'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'kitchen'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'expo'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'expo'[39m, email: [32m'test@test.com'[39m }
[2025-09-17T04:59:19.677Z] [INFO] [VoiceAgentMode] Employee mode detected { role: [32m'expo'[39m, email: [32m'test@test.com'[39m }

stdout | src/modules/voice/services/__tests__/voice-agent-modes.spec.ts > Voice Agent Modes - CI Safety Guards > Agent mode detection > should detect customer mode for unauthenticated users
[2025-09-17T04:59:19.692Z] [INFO] [VoiceAgentMode] Customer mode detected { isAuthenticated: [33mfalse[39m, role: [32m'none'[39m }
[2025-09-17T04:59:19.692Z] [INFO] [VoiceAgentMode] Customer mode detected { isAuthenticated: [33mfalse[39m, role: [32m'none'[39m }
[2025-09-17T04:59:19.692Z] [INFO] [VoiceAgentMode] Customer mode detected { isAuthenticated: [33mfalse[39m, role: [32m'none'[39m }

stdout | src/modules/voice/services/__tests__/voice-agent-modes.spec.ts > Voice Agent Modes - CI Safety Guards > Agent mode detection > should detect customer mode for unknown roles
[2025-09-17T04:59:19.704Z] [INFO] [VoiceAgentMode] Customer mode detected { isAuthenticated: [33mtrue[39m, role: [32m'unknown_role'[39m }
[2025-09-17T04:59:19.704Z] [INFO] [VoiceAgentMode] Customer mode detected { isAuthenticated: [33mtrue[39m, role: [32m'unknown_role'[39m }
[2025-09-17T04:59:19.704Z] [INFO] [VoiceAgentMode] Customer mode detected { isAuthenticated: [33mtrue[39m, role: [32m'unknown_role'[39m }

stderr | src/modules/voice/services/__tests__/voice-agent-modes.spec.ts > Voice Agent Modes - CI Safety Guards > Agent mode configuration > should fallback to customer mode for invalid modes
[2025-09-17T04:59:19.735Z] [WARN] [VoiceAgentMode] Unknown mode, defaulting to customer { mode: [32m'invalid_mode'[39m }

stdout | src/modules/voice/services/__tests__/voice-agent-modes.spec.ts > Voice Agent Modes - CI Safety Guards > Integration validation > should ensure all temperature processing maintains provider compliance
[SessionConfigNormalizer] Temperature 0 below minimum 0.6, normalized to 0.6
[SessionConfigNormalizer] Temperature 0 below minimum 0.6, normalized to 0.6
[SessionConfigNormalizer] Temperature -1 below minimum 0.6, normalized to 0.6
[SessionConfigNormalizer] Temperature -1 below minimum 0.6, normalized to 0.6

 ✓ src/modules/voice/services/__tests__/voice-agent-modes.spec.ts (12 tests) 136ms
 ✓ src/modules/voice/components/MicrophonePermission.test.tsx (5 tests) 59ms
stderr | src/modules/voice/services/orderIntegration.test.ts
Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

 ✓ src/modules/voice/services/orderIntegration.test.ts (8 tests) 85ms
 ✓ src/services/utils/__tests__/caseTransform.test.ts (15 tests) 150ms
 ✓ src/modules/voice/components/TranscriptionDisplay.test.tsx (5 tests) 58ms
stdout | src/modules/voice/services/__tests__/SessionConfigNormalizer.test.ts > SessionConfigNormalizer > normalizeSessionConfig > employee mode > should normalize temperature below minimum to provider minimum
[SessionConfigNormalizer] Temperature 0.3 below minimum 0.6, normalized to 0.6

stdout | src/modules/voice/services/__tests__/SessionConfigNormalizer.test.ts > SessionConfigNormalizer > normalizeSessionConfig > customer mode > should normalize temperature below minimum to provider minimum
[SessionConfigNormalizer] Temperature 0.3 below minimum 0.6, normalized to 0.6

stdout | src/modules/voice/services/__tests__/SessionConfigNormalizer.test.ts > SessionConfigNormalizer > normalizeSessionConfig > other parameters > should normalize all parameters
[SessionConfigNormalizer] Temperature 0.3 below minimum 0.6, normalized to 0.6

stdout | src/modules/voice/services/__tests__/SessionConfigNormalizer.test.ts > SessionConfigNormalizer > OpenAI Realtime API compliance > should never return temperature below 0.6
[SessionConfigNormalizer] Temperature 0 below minimum 0.6, normalized to 0.6
[SessionConfigNormalizer] Temperature 0 below minimum 0.6, normalized to 0.6
[SessionConfigNormalizer] Temperature 0.1 below minimum 0.6, normalized to 0.6
[SessionConfigNormalizer] Temperature 0.1 below minimum 0.6, normalized to 0.6
[SessionConfigNormalizer] Temperature 0.2 below minimum 0.6, normalized to 0.6
[SessionConfigNormalizer] Temperature 0.2 below minimum 0.6, normalized to 0.6
[SessionConfigNormalizer] Temperature 0.3 below minimum 0.6, normalized to 0.6
[SessionConfigNormalizer] Temperature 0.3 below minimum 0.6, normalized to 0.6
[SessionConfigNormalizer] Temperature 0.4 below minimum 0.6, normalized to 0.6
[SessionConfigNormalizer] Temperature 0.4 below minimum 0.6, normalized to 0.6
[SessionConfigNormalizer] Temperature 0.5 below minimum 0.6, normalized to 0.6
[SessionConfigNormalizer] Temperature 0.5 below minimum 0.6, normalized to 0.6
[SessionConfigNormalizer] Temperature 0.59 below minimum 0.6, normalized to 0.6
[SessionConfigNormalizer] Temperature 0.59 below minimum 0.6, normalized to 0.6

 ✓ src/modules/voice/services/__tests__/SessionConfigNormalizer.test.ts (14 tests) 147ms
 ✓ src/hooks/keyboard/__tests__/useKeyboardShortcut.test.ts (4 tests) 49ms
stderr | src/services/stationRouting.test.ts
[2025-09-17T04:59:20.549Z] [INFO] [EventEmitter] Emitting 'state.changed', handlers: 0
[2025-09-17T04:59:20.549Z] [INFO] [EventEmitter] WARNING: No handlers for event 'state.changed'

 ✓ src/services/stationRouting.test.ts (10 tests) 103ms

⎯⎯⎯⎯⎯⎯ Failed Suites 7 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  src/pages/__tests__/CheckoutPage.demo.test.tsx [ src/pages/__tests__/CheckoutPage.demo.test.tsx ]
Error: Failed to resolve import "@/services/auth/demoAuth" from "src/pages/__tests__/CheckoutPage.demo.test.tsx". Does the file exist?
  Plugin: vite:import-analysis
  File: /Users/mikeyoung/CODING/rebuild-6.0/client/src/pages/__tests__/CheckoutPage.demo.test.tsx:5:0
  46 |  const __vi_import_2__ = await import("react-router-dom");
  47 |  const __vi_import_3__ = await import("../CheckoutPage");
  48 |  const __vi_import_4__ = await import("@/services/auth/demoAuth");
     |                                       ^
  49 |  
  50 |  import { describe, it, expect, vi, beforeEach } from "vitest";
 ❯ TransformPluginContext._formatLog node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31527:43
 ❯ TransformPluginContext.error node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31524:14
 ❯ normalizeUrl node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:29996:18
 ❯ node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:30054:32
 ❯ TransformPluginContext.transform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:30022:4
 ❯ EnvironmentPluginContainer.transform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31325:14
 ❯ loadAndTransform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:26407:26

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/75]⎯

 FAIL  src/modules/order-system/__tests__/accessibility.test.tsx [ src/modules/order-system/__tests__/accessibility.test.tsx ]
Error: Failed to resolve import "jest-axe" from "src/modules/order-system/__tests__/accessibility.test.tsx". Does the file exist?
  Plugin: vite:import-analysis
  File: /Users/mikeyoung/CODING/rebuild-6.0/client/src/modules/order-system/__tests__/accessibility.test.tsx:3:40
  1  |  import { jsxDEV } from "react/jsx-dev-runtime";
  2  |  import { render } from "@testing-library/react";
  3  |  import { axe, toHaveNoViolations } from "jest-axe";
     |                                           ^
  4  |  import { MemoryRouter, Route, Routes } from "react-router-dom";
  5  |  import { CheckoutPage } from "@/pages/CheckoutPage";
 ❯ TransformPluginContext._formatLog node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31527:43
 ❯ TransformPluginContext.error node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31524:14
 ❯ normalizeUrl node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:29996:18
 ❯ node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:30054:32
 ❯ TransformPluginContext.transform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:30022:4
 ❯ EnvironmentPluginContainer.transform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31325:14
 ❯ loadAndTransform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:26407:26

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/75]⎯

 FAIL  src/modules/order-system/__tests__/checkout-simple.test.tsx [ src/modules/order-system/__tests__/checkout-simple.test.tsx ]
Error: [vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock
 ❯ src/modules/order-system/__tests__/checkout-simple.test.tsx:4:1
      2| import { vi } from 'vitest';
      3| import { render, screen } from '@testing-library/react';
      4| import { MemoryRouter } from 'react-router-dom';
       | ^
      5| import { CheckoutPage } from '@/pages/CheckoutPage';
      6| import '@testing-library/jest-dom';

Caused by: TypeError: vi.requireActual is not a function
 ❯ src/modules/order-system/__tests__/checkout-simple.test.tsx:30:9
 ❯ src/modules/order-system/__tests__/checkout-simple.test.tsx:4:1

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/75]⎯

 FAIL  src/modules/voice/components/RecordingIndicator.test.tsx [ src/modules/voice/components/RecordingIndicator.test.tsx ]
Error: Failed to resolve import "./RecordingIndicator" from "src/modules/voice/components/RecordingIndicator.test.tsx". Does the file exist?
  Plugin: vite:import-analysis
  File: /Users/mikeyoung/CODING/rebuild-6.0/client/src/modules/voice/components/RecordingIndicator.test.tsx:3:35
  1  |  import { jsxDEV } from "react/jsx-dev-runtime";
  2  |  import { render, screen } from "@testing-library/react";
  3  |  import { RecordingIndicator } from "./RecordingIndicator";
     |                                      ^
  4  |  describe("RecordingIndicator", () => {
  5  |    it("shows recording indicator when isRecording is true", () => {
 ❯ TransformPluginContext._formatLog node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31527:43
 ❯ TransformPluginContext.error node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31524:14
 ❯ normalizeUrl node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:29996:18
 ❯ node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:30054:32
 ❯ TransformPluginContext.transform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:30022:4
 ❯ EnvironmentPluginContainer.transform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31325:14
 ❯ loadAndTransform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:26407:26

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/75]⎯

 FAIL  src/modules/voice/services/orderIntegration.integration.test.tsx [ src/modules/voice/services/orderIntegration.integration.test.tsx ]
Error: Failed to resolve import "../../../../shared/utils/voice-metrics" from "src/modules/voice/services/WebRTCVoiceClient.ts". Does the file exist?
  Plugin: vite:import-analysis
  File: /Users/mikeyoung/CODING/rebuild-6.0/client/src/modules/voice/services/WebRTCVoiceClient.ts:8:29
  5  |  import { safeParseEvent } from "./RealtimeGuards";
  6  |  import { normalizeSessionConfig } from "./SessionConfigNormalizer";
  7  |  import { voiceMetrics } from "../../../../shared/utils/voice-metrics";
     |                                ^
  8  |  export class WebRTCVoiceClient extends EventEmitter {
  9  |    pc = null;
 ❯ TransformPluginContext._formatLog node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31527:43
 ❯ TransformPluginContext.error node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31524:14
 ❯ normalizeUrl node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:29996:18
 ❯ node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:30054:32
 ❯ TransformPluginContext.transform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:30022:4
 ❯ EnvironmentPluginContainer.transform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31325:14
 ❯ loadAndTransform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:26407:26

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/75]⎯

 FAIL  src/modules/orders/components/__tests__/OrderCard.test.tsx [ src/modules/orders/components/__tests__/OrderCard.test.tsx ]
Error: Failed to resolve import "../OrderCard/OrderCard" from "src/modules/orders/components/__tests__/OrderCard.test.tsx". Does the file exist?
  Plugin: vite:import-analysis
  File: /Users/mikeyoung/CODING/rebuild-6.0/client/src/modules/orders/components/__tests__/OrderCard.test.tsx:4:0
  16 |  const __vi_import_0__ = await import("react/jsx-dev-runtime");
  17 |  const __vi_import_1__ = await import("@testing-library/react");
  18 |  const __vi_import_2__ = await import("../OrderCard/OrderCard");
     |                                       ^
  19 |  
  20 |  import { vi } from "vitest";
 ❯ TransformPluginContext._formatLog node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31527:43
 ❯ TransformPluginContext.error node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31524:14
 ❯ normalizeUrl node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:29996:18
 ❯ node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:30054:32
 ❯ TransformPluginContext.transform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:30022:4
 ❯ EnvironmentPluginContainer.transform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31325:14
 ❯ loadAndTransform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:26407:26

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/75]⎯

 FAIL  src/modules/kitchen/components/__tests__/KDSOrderCard.test.tsx [ src/modules/kitchen/components/__tests__/KDSOrderCard.test.tsx ]
Error: Failed to resolve import "@/components/orders/KDSOrderCard" from "src/modules/kitchen/components/__tests__/KDSOrderCard.test.tsx". Does the file exist?
  Plugin: vite:import-analysis
  File: /Users/mikeyoung/CODING/rebuild-6.0/client/src/modules/kitchen/components/__tests__/KDSOrderCard.test.tsx:4:0
  78 |  const __vi_import_0__ = await import("react/jsx-dev-runtime");
  79 |  const __vi_import_1__ = await import("@testing-library/react");
  80 |  const __vi_import_2__ = await import("@/components/orders/KDSOrderCard");
     |                                       ^
  81 |  
  82 |  import { vi } from "vitest";
 ❯ TransformPluginContext._formatLog node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31527:43
 ❯ TransformPluginContext.error node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31524:14
 ❯ normalizeUrl node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:29996:18
 ❯ node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:30054:32
 ❯ TransformPluginContext.transform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:30022:4
 ❯ EnvironmentPluginContainer.transform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:31325:14
 ❯ loadAndTransform node_modules/vitest/node_modules/vite/dist/node/chunks/dep-M_KD0XSK.js:26407:26

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/75]⎯


⎯⎯⎯⎯⎯⎯ Failed Tests 61 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  src/services/websocket/WebSocketService.test.ts > WebSocketService > connect > should handle missing auth session
AssertionError: expected null to be 'demo-token' // Object.is equality

[32m- Expected:[39m 
"demo-token"

[31m+ Received:[39m 
null

 ❯ src/services/websocket/WebSocketService.test.ts:183:45
    181|       const url = new URL(wsCall[0])
    182|       
    183|       expect(url.searchParams.get('token')).toBe('demo-token')
       |                                             ^
    184|       
    185|       mockWebSocket.simulateOpen()

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/75]⎯

 FAIL  src/hooks/kiosk/__tests__/useOrderSubmission.test.tsx > useOrderSubmission > should throw error when restaurant context is missing
TypeError: Cannot read properties of undefined (reading 'mockReturnValue')
 ❯ src/hooks/kiosk/__tests__/useOrderSubmission.test.tsx:23:36
     21| 
     22|   it('should throw error when restaurant context is missing', async ()…
     23|     ;(useRestaurantContext as any).mockReturnValue({ restaurant: null …
       |                                    ^
     24| 
     25|     const { result } = renderHook(() => useOrderSubmission())

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/75]⎯

 FAIL  src/hooks/kiosk/__tests__/useOrderSubmission.test.tsx > useOrderSubmission > should use restaurant ID from context instead of environment variable
TypeError: Cannot read properties of undefined (reading 'mockReturnValue')
 ❯ src/hooks/kiosk/__tests__/useOrderSubmission.test.tsx:45:36
     43|   it('should use restaurant ID from context instead of environment var…
     44|     const mockRestaurantId = 'context-restaurant-123'
     45|     ;(useRestaurantContext as any).mockReturnValue({
       |                                    ^
     46|       restaurant: { id: mockRestaurantId }
     47|     })

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/75]⎯

 FAIL  src/hooks/kiosk/__tests__/useOrderSubmission.test.tsx > useOrderSubmission > should handle empty cart
TypeError: Cannot read properties of undefined (reading 'mockReturnValue')
 ❯ src/hooks/kiosk/__tests__/useOrderSubmission.test.tsx:81:36
     79| 
     80|   it('should handle empty cart', async () => {
     81|     ;(useRestaurantContext as any).mockReturnValue({
       |                                    ^
     82|       restaurant: { id: 'test-restaurant' }
     83|     })

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/75]⎯

 FAIL  src/components/shared/timers/ElapsedTimer.test.tsx > ElapsedTimer > renders elapsed time in seconds format
TestingLibraryElementError: Unable to find an element with the text: 30s. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex items-center gap-1 text-sm text-muted-foreground"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-clock h-3 w-3"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<path[39m
          [33md[39m=[32m"M12 6v6l4 2"[39m
        [36m/>[39m
        [36m<circle[39m
          [33mcx[39m=[32m"12"[39m
          [33mcy[39m=[32m"12"[39m
          [33mr[39m=[32m"10"[39m
        [36m/>[39m
      [36m</svg>[39m
      [36m<span>[39m
        [0m53974784s[0m
      [36m</span>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError ../node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/components/shared/timers/ElapsedTimer.test.tsx:25:12
     23|     const startTime = new Date('2024-01-01T11:59:30Z') // 30 seconds a…
     24|     const { getByText } = render(<ElapsedTimer startTime={startTime} f…
     25|     expect(getByText('30s')).toBeInTheDocument()
       |            ^
     26|   })
     27| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/75]⎯

 FAIL  src/components/shared/timers/ElapsedTimer.test.tsx > ElapsedTimer > renders elapsed time in full format
TestingLibraryElementError: Unable to find an element with the text: 1h 14m. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex items-center gap-1 text-sm text-muted-foreground"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-clock h-3 w-3"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<path[39m
          [33md[39m=[32m"M12 6v6l4 2"[39m
        [36m/>[39m
        [36m<circle[39m
          [33mcx[39m=[32m"12"[39m
          [33mcy[39m=[32m"12"[39m
          [33mr[39m=[32m"10"[39m
        [36m/>[39m
      [36m</svg>[39m
      [36m<span>[39m
        [0m14994h 13m[0m
      [36m</span>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError ../node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/components/shared/timers/ElapsedTimer.test.tsx:31:12
     29|     const startTime = new Date('2024-01-01T10:45:30Z') // 1h 14m 30s a…
     30|     const { getByText } = render(<ElapsedTimer startTime={startTime} f…
     31|     expect(getByText('1h 14m')).toBeInTheDocument()
       |            ^
     32|   })
     33| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/75]⎯

 FAIL  src/components/shared/timers/ElapsedTimer.test.tsx > ElapsedTimer > renders full format without hours when less than 1 hour
TestingLibraryElementError: Unable to find an element with the text: 14m 30s. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"flex items-center gap-1 text-sm text-muted-foreground"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-clock h-3 w-3"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<path[39m
          [33md[39m=[32m"M12 6v6l4 2"[39m
        [36m/>[39m
        [36m<circle[39m
          [33mcx[39m=[32m"12"[39m
          [33mcy[39m=[32m"12"[39m
          [33mr[39m=[32m"10"[39m
        [36m/>[39m
      [36m</svg>[39m
      [36m<span>[39m
        [0m14993h 13m[0m
      [36m</span>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError ../node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/components/shared/timers/ElapsedTimer.test.tsx:37:12
     35|     const startTime = new Date('2024-01-01T11:45:30Z') // 14m 30s ago
     36|     const { getByText } = render(<ElapsedTimer startTime={startTime} f…
     37|     expect(getByText('14m 30s')).toBeInTheDocument()
       |            ^
     38|   })
     39| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/75]⎯

 FAIL  src/modules/order-system/__tests__/checkout.e2e.test.tsx > Checkout E2E Flow > happy path: checkout -> pay -> confirmation navigation
Error: Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined. You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.
 ❯ createFiberFromTypeAndProps ../node_modules/react-dom/cjs/react-dom-client.development.js:4259:28
 ❯ createFiberFromElement ../node_modules/react-dom/cjs/react-dom-client.development.js:4273:14
 ❯ reconcileChildFibersImpl ../node_modules/react-dom/cjs/react-dom-client.development.js:7879:31
 ❯ ../node_modules/react-dom/cjs/react-dom-client.development.js:8057:33
 ❯ reconcileChildren ../node_modules/react-dom/cjs/react-dom-client.development.js:8621:13
 ❯ beginWork ../node_modules/react-dom/cjs/react-dom-client.development.js:10915:13
 ❯ runWithFiberInDEV ../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork ../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync ../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync ../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/75]⎯

 FAIL  src/modules/voice/__tests__/buildSafety.test.ts > Build Safety Checks > Node.js specific imports prevention > should not import Node.js built-in modules in client code
AssertionError: Found Node.js built-in imports in client code that will break browser builds:
src/hooks/kiosk/useKioskOrderSubmission.ts:4 - Importing Node.js module "crypto": import { createHash } from 'crypto';

Client code should only import browser-compatible modules.
For file operations, use browser APIs or move logic to server.
 ❯ src/modules/voice/__tests__/buildSafety.test.ts:217:16
    215|           .join('\n')
    216|         
    217|         expect.fail(
       |                ^
    218|           `Found Node.js built-in imports in client code that will bre…
    219|           `Client code should only import browser-compatible modules.\…

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/75]⎯

 FAIL  src/modules/voice/components/HoldToRecordButton.test.tsx > HoldToRecordButton > shows "LISTENING..." when isListening is true
TestingLibraryElementError: Unable to find an element with the text: LISTENING.... This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<button[39m
      [33maria-busy[39m=[32m"false"[39m
      [33maria-label[39m=[32m"Release to stop recording"[39m
      [33maria-pressed[39m=[32m"true"[39m
      [33mclass[39m=[32m"relative w-32 h-32 rounded-full text-sm font-semibold text-white transition-all duration-300 hover:scale-105 active:scale-95 flex flex-col items-center justify-center gap-2 focus:outline-none focus:ring-4 focus:ring-offset-2 bg-danger shadow-[0_0_30px_rgba(239,68,68,0.4)] hover:bg-danger-dark focus:ring-danger"[39m
      [33mrole[39m=[32m"button"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-mic w-8 h-8"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<path[39m
          [33md[39m=[32m"M12 19v3"[39m
        [36m/>[39m
        [36m<path[39m
          [33md[39m=[32m"M19 10v2a7 7 0 0 1-14 0v-2"[39m
        [36m/>[39m
        [36m<rect[39m
          [33mheight[39m=[32m"13"[39m
          [33mrx[39m=[32m"3"[39m
          [33mwidth[39m=[32m"6"[39m
          [33mx[39m=[32m"9"[39m
          [33my[39m=[32m"2"[39m
        [36m/>[39m
      [36m</svg>[39m
      [36m<span>[39m
        [0mEAVESDROPPING...[0m
      [36m</span>[39m
    [36m</button>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError ../node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/modules/voice/components/HoldToRecordButton.test.tsx:25:19
     23|   it('shows "LISTENING..." when isListening is true', () => {
     24|     render(<HoldToRecordButton {...defaultProps} isListening={true} />…
     25|     expect(screen.getByText('LISTENING...')).toBeInTheDocument();
       |                   ^
     26|   });
     27| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/75]⎯

 FAIL  src/modules/voice/components/HoldToRecordButton.test.tsx > HoldToRecordButton > shows "PROCESSING..." when isProcessing is true
TestingLibraryElementError: Unable to find an element with the text: PROCESSING.... This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<button[39m
      [33maria-busy[39m=[32m"true"[39m
      [33maria-label[39m=[32m"Processing your voice order"[39m
      [33maria-pressed[39m=[32m"false"[39m
      [33mclass[39m=[32m"relative w-32 h-32 rounded-full text-sm font-semibold text-white transition-all duration-300 hover:scale-105 active:scale-95 flex flex-col items-center justify-center gap-2 focus:outline-none focus:ring-4 focus:ring-offset-2 bg-primary shadow-[0_4px_16px_rgba(0,0,0,0.1)] hover:bg-primary-dark focus:ring-primary animate-pulse"[39m
      [33mrole[39m=[32m"button"[39m
    [36m>[39m
      [36m<svg[39m
        [33maria-hidden[39m=[32m"true"[39m
        [33mclass[39m=[32m"lucide lucide-mic w-8 h-8"[39m
        [33mfill[39m=[32m"none"[39m
        [33mheight[39m=[32m"24"[39m
        [33mstroke[39m=[32m"currentColor"[39m
        [33mstroke-linecap[39m=[32m"round"[39m
        [33mstroke-linejoin[39m=[32m"round"[39m
        [33mstroke-width[39m=[32m"2"[39m
        [33mviewBox[39m=[32m"0 0 24 24"[39m
        [33mwidth[39m=[32m"24"[39m
        [33mxmlns[39m=[32m"http://www.w3.org/2000/svg"[39m
      [36m>[39m
        [36m<path[39m
          [33md[39m=[32m"M12 19v3"[39m
        [36m/>[39m
        [36m<path[39m
          [33md[39m=[32m"M19 10v2a7 7 0 0 1-14 0v-2"[39m
        [36m/>[39m
        [36m<rect[39m
          [33mheight[39m=[32m"13"[39m
          [33mrx[39m=[32m"3"[39m
          [33mwidth[39m=[32m"6"[39m
          [33mx[39m=[32m"9"[39m
          [33my[39m=[32m"2"[39m
        [36m/>[39m
      [36m</svg>[39m
      [36m<span>[39m
        [0mCOGITATING...[0m
      [36m</span>[39m
    [36m</button>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError ../node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/modules/voice/components/HoldToRecordButton.test.tsx:30:19
     28|   it('shows "PROCESSING..." when isProcessing is true', () => {
     29|     render(<HoldToRecordButton {...defaultProps} isProcessing={true} /…
     30|     expect(screen.getByText('PROCESSING...')).toBeInTheDocument();
       |                   ^
     31|   });
     32| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/75]⎯

 FAIL  src/modules/voice/components/HoldToRecordButton.test.tsx > HoldToRecordButton > calls onMouseUp when button is released
AssertionError: expected "spy" to be called 1 times, but got 0 times
 ❯ src/modules/voice/components/HoldToRecordButton.test.tsx:44:36
     42|     const button = screen.getByRole('button');
     43|     fireEvent.mouseUp(button);
     44|     expect(defaultProps.onMouseUp).toHaveBeenCalledTimes(1);
       |                                    ^
     45|   });
     46| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[19/75]⎯

 FAIL  src/modules/voice/components/HoldToRecordButton.test.tsx > HoldToRecordButton > calls onMouseUp when mouse leaves button
AssertionError: expected "spy" to be called 1 times, but got 0 times
 ❯ src/modules/voice/components/HoldToRecordButton.test.tsx:51:36
     49|     const button = screen.getByRole('button');
     50|     fireEvent.mouseLeave(button);
     51|     expect(defaultProps.onMouseUp).toHaveBeenCalledTimes(1);
       |                                    ^
     52|   });
     53| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[20/75]⎯

 FAIL  src/modules/voice/components/HoldToRecordButton.test.tsx > HoldToRecordButton > handles touch events
AssertionError: expected "spy" to be called 1 times, but got 0 times
 ❯ src/modules/voice/components/HoldToRecordButton.test.tsx:64:36
     62|     // Touch end
     63|     fireEvent.touchEnd(button);
     64|     expect(defaultProps.onMouseUp).toHaveBeenCalledTimes(1);
       |                                    ^
     65|   });
     66| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[21/75]⎯

 FAIL  src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should return all orders when no filters provided
AssertionError: Target cannot be null or undefined.
 ❯ src/services/orders/__tests__/OrderService.test.ts:84:29
     82|       const result = await orderService.getOrders('rest-1')
     83|       
     84|       expect(result.orders).toHaveLength(1)
       |                             ^
     85|       expect(result.total).toBe(1)
     86|       expect(result.orders[0].orderNumber).toBe('001')

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22/75]⎯

 FAIL  src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should return all orders when no filters provided
 FAIL  src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should filter orders by status
 FAIL  src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should enforce rate limiting
 FAIL  src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrderById > should return order when found
 FAIL  src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrderById > should throw error when order not found
 FAIL  src/services/orders/__tests__/OrderService.test.ts > OrderService > updateOrderStatus > should update order status successfully
 FAIL  src/services/orders/__tests__/OrderService.test.ts > OrderService > updateOrderStatus > should throw error when order not found
 FAIL  src/services/orders/__tests__/OrderService.test.ts > OrderService > submitOrder > should create new order with valid data
 FAIL  src/services/orders/__tests__/OrderService.test.ts > OrderService > submitOrder > should validate and sanitize input data
 FAIL  src/services/orders/__tests__/OrderService.test.ts > OrderService > submitOrder > should generate sequential order numbers
TypeError: orderService.reset is not a function
 ❯ src/services/orders/__tests__/OrderService.test.ts:76:18
     74| 
     75|   afterEach(() => {
     76|     orderService.reset()
       |                  ^
     77|     resetMockData()
     78|   })

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[23/75]⎯

 FAIL  src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should filter orders by status
AssertionError: Target cannot be null or undefined.
 ❯ src/services/orders/__tests__/OrderService.test.ts:104:29
    102|       const result = await orderService.getOrders('rest-1', { status: …
    103|       
    104|       expect(result.orders).toHaveLength(1)
       |                             ^
    105|       expect(result.orders[0].status).toBe('new')
    106|     })

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[24/75]⎯

 FAIL  src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrders > should enforce rate limiting
AssertionError: promise resolved "[ { id: 'order-1', …(12) } ]" instead of rejecting

[32m- Expected:[39m 
Error {
  "message": "rejected promise",
}

[31m+ Received:[39m 
[
  {
    "created_at": "2025-09-17T04:59:14.842Z",
    "id": "order-1",
    "items": [
      {
        "id": "item-1",
        "menu_item_id": "1",
        "modifiers": [
          {
            "id": "mod-1",
            "name": "extra cheese",
            "price": 1.5,
          },
        ],
        "name": "Classic Burger",
        "price": 12.99,
        "quantity": 2,
        "special_instructions": "Well done",
        "subtotal": 25.98,
      },
    ],
    "order_number": "#1001",
    "payment_status": "pending",
    "restaurant_id": "default",
    "status": "new",
    "subtotal": 25.98,
    "table_number": "1",
    "tax": 2.6,
    "total": 28.58,
    "type": "dine-in",
    "updated_at": "2025-09-17T04:59:14.842Z",
  },
]

 ❯ src/services/orders/__tests__/OrderService.test.ts:117:52
    115|       
    116|       // 11th request should fail
    117|       await expect(orderService.getOrders('rest-1')).rejects.toThrow('…
       |                                                    ^
    118|     }, 10000)
    119|   })

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[25/75]⎯

 FAIL  src/services/orders/__tests__/OrderService.test.ts > OrderService > getOrderById > should return order when found
Error: Order not found
 ❯ OrderService.getOrderById src/services/orders/OrderService.ts:102:25
    100|       const mockOrders = this.getMockOrders()
    101|       const order = mockOrders.find(o => o.id === orderId)
    102|       if (!order) throw new Error('Order not found')
       |                         ^
    103|       return order
    104|     }
 ❯ src/services/orders/__tests__/OrderService.test.ts:123:21

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[26/75]⎯

 FAIL  src/services/orders/__tests__/OrderService.test.ts > OrderService > updateOrderStatus > should update order status successfully
Error: Order not found
 ❯ OrderService.updateOrderStatus src/services/orders/OrderService.ts:126:25
    124|       const mockOrders = this.getMockOrders()
    125|       const order = mockOrders.find(o => o.id === orderId)
    126|       if (!order) throw new Error('Order not found')
       |                         ^
    127|       order.status = status
    128|       order.updated_at = new Date().toISOString()
 ❯ src/services/orders/__tests__/OrderService.test.ts:136:22

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[27/75]⎯

 FAIL  src/services/orders/__tests__/OrderService.test.ts > OrderService > submitOrder > should create new order with valid data
Error: Invalid order data - check console for details
 ❯ OrderService.submitOrder src/services/orders/OrderService.ts:139:13
    137|     if (!this.validateOrder(orderData)) {
    138|       logger.error('[OrderService] Order validation failed, throwing e…
    139|       throw new Error('Invalid order data - check console for details')
       |             ^
    140|     }
    141| 
 ❯ src/services/orders/__tests__/OrderService.test.ts:160:41

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[28/75]⎯

 FAIL  src/services/orders/__tests__/OrderService.test.ts > OrderService > submitOrder > should generate sequential order numbers
Error: Invalid order data - check console for details
 ❯ OrderService.submitOrder src/services/orders/OrderService.ts:139:13
    137|     if (!this.validateOrder(orderData)) {
    138|       logger.error('[OrderService] Order validation failed, throwing e…
    139|       throw new Error('Invalid order data - check console for details')
       |             ^
    140|     }
    141| 
 ❯ src/services/orders/__tests__/OrderService.test.ts:186:41

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[29/75]⎯

 FAIL  src/components/shared/errors/__tests__/ErrorBoundary.test.tsx > ErrorBoundary > Error logging > logs errors in development
TypeError: [Function error] is not a spy or a call to a spy!
 ❯ src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:227:29
    225|       )
    226|       
    227|       expect(console.error).toHaveBeenCalledWith(
       |                             ^
    228|         'Error:',
    229|         expect.any(Error),

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[30/75]⎯

 FAIL  src/components/shared/errors/__tests__/ErrorBoundary.test.tsx > ErrorBoundary > Error logging > does not log in production
TypeError: console.error.mockClear is not a function
 ❯ src/components/shared/errors/__tests__/ErrorBoundary.test.tsx:249:32
    247|       
    248|       // Clear any previous console.error calls
    249|       ;(console.error as Mock).mockClear()
       |                                ^
    250|       
    251|       render(

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[31/75]⎯

 FAIL  src/modules/payment/hooks/__tests__/useTablePayment.test.ts > useTablePayment > presentCheck > should present check and update state
 FAIL  src/modules/payment/hooks/__tests__/useTablePayment.test.ts > useTablePayment > presentCheck > should handle presentation errors
 FAIL  src/modules/payment/hooks/__tests__/useTablePayment.test.ts > useTablePayment > calculateWithTip > should calculate tip and update check
 FAIL  src/modules/payment/hooks/__tests__/useTablePayment.test.ts > useTablePayment > processPayment > should process payment successfully
 FAIL  src/modules/payment/hooks/__tests__/useTablePayment.test.ts > useTablePayment > processPayment > should handle payment failures
 FAIL  src/modules/payment/hooks/__tests__/useTablePayment.test.ts > useTablePayment > createSplitSession > should create even split session
 FAIL  src/modules/payment/hooks/__tests__/useTablePayment.test.ts > useTablePayment > processSplitPayment > should process individual split payment
 FAIL  src/modules/payment/hooks/__tests__/useTablePayment.test.ts > useTablePayment > unlockCheck > should unlock check silently
 FAIL  src/modules/payment/hooks/__tests__/useTablePayment.test.ts > useTablePayment > unlockCheck > should handle unlock errors silently
TypeError: useApiRequest.mockReturnValue is not a function
 ❯ src/modules/payment/hooks/__tests__/useTablePayment.test.ts:18:34
     16|       post: jest.fn()
     17|     };
     18|     (useApiRequest as jest.Mock).mockReturnValue(mockApi);
       |                                  ^
     19|     jest.clearAllMocks();
     20|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[32/75]⎯

 FAIL  src/modules/orders/hooks/__tests__/useOrderData.test.ts > useOrderData > should fetch orders on mount
AssertionError: expected { orders: [ …(2) ], total: 2 } to deeply equal [ Array(2) ]

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m

[32m- Expected:[39m 
[
  {
    "id": "1",
    "items": [
      {
        "id": "1",
        "name": "Test Item",
        "quantity": 1,
      },
    ],
    "orderNumber": "001",
    "orderTime": 2025-09-17T04:59:10.949Z,
    "paymentStatus": "pending",
    "restaurant_id": "rest-1",
    "status": "new",
    "tableNumber": "5",
    "totalAmount": 10,
  },
  {
    "id": "2",
    "items": [
      {
        "id": "2",
        "name": "Another Item",
        "quantity": 2,
      },
    ],
    "orderNumber": "002",
    "orderTime": 2025-09-17T04:59:10.949Z,
    "paymentStatus": "paid",
    "restaurant_id": "rest-1",
    "status": "preparing",
    "tableNumber": "6",
    "totalAmount": 20,
  },
]

[31m+ Received:[39m 
{
  "orders": [
    {
      "id": "1",
      "items": [
        {
          "id": "1",
          "name": "Test Item",
          "quantity": 1,
        },
      ],
      "orderNumber": "001",
      "orderTime": 2025-09-17T04:59:10.949Z,
      "paymentStatus": "pending",
      "restaurant_id": "rest-1",
      "status": "new",
      "tableNumber": "5",
      "totalAmount": 10,
    },
    {
      "id": "2",
      "items": [
        {
          "id": "2",
          "name": "Another Item",
          "quantity": 2,
        },
      ],
      "orderNumber": "002",
      "orderTime": 2025-09-17T04:59:10.949Z,
      "paymentStatus": "paid",
      "restaurant_id": "rest-1",
      "status": "preparing",
      "tableNumber": "6",
      "totalAmount": 20,
    },
  ],
  "total": 2,
}

 ❯ src/modules/orders/hooks/__tests__/useOrderData.test.ts:81:37
     79|     await waitFor(() => {
     80|       expect(result.current.loading).toBe(false)
     81|       expect(result.current.orders).toEqual(mockOrders)
       |                                     ^
     82|       expect(result.current.error).toBe(null)
     83|     })
 ❯ runWithExpensiveErrorDiagnosticsDisabled ../node_modules/@testing-library/dom/dist/config.js:47:12
 ❯ checkCallback ../node_modules/@testing-library/dom/dist/wait-for.js:124:77
 ❯ Timeout.checkRealTimersCallback ../node_modules/@testing-library/dom/dist/wait-for.js:118:16

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[33/75]⎯

 FAIL  src/modules/orders/hooks/__tests__/useOrderData.test.ts > useOrderData > should fetch orders with filters
AssertionError: expected "spy" to be called with arguments: [ 'rest-1', { status: 'new', …(1) } ][90m

Received: 

[1m  1st spy call:

[22m[2m  [[22m
[32m-   "rest-1",[90m
[2m    {[22m
[2m      "status": "new",[22m
[2m      "tableId": undefined,[22m
[2m    },[22m
[2m  ][22m

[1m  2nd spy call:

[22m[2m  [[22m
[32m-   "rest-1",[90m
[2m    {[22m
[2m      "status": "new",[22m
[2m      "tableId": undefined,[22m
[2m    },[22m
[2m  ][22m

[1m  3rd spy call:

[22m[2m  [[22m
[32m-   "rest-1",[90m
[2m    {[22m
[2m      "status": "new",[22m
[2m      "tableId": undefined,[22m
[2m    },[22m
[2m  ][22m
[39m[90m

Number of calls: [1m3[22m
[39m
 ❯ src/modules/orders/hooks/__tests__/useOrderData.test.ts:100:36
     98|     })
     99|     
    100|     expect(orderService.getOrders).toHaveBeenCalledWith('rest-1', {
       |                                    ^
    101|       status: 'new',
    102|       tableId: undefined

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[34/75]⎯

 FAIL  src/modules/orders/hooks/__tests__/useOrderData.test.ts > useOrderData > should update order status optimistically
TypeError: Cannot read properties of undefined (reading 'status')
 ❯ src/modules/orders/hooks/__tests__/useOrderData.test.ts:136:37
    134|     
    135|     // Check optimistic update
    136|     expect(result.current.orders[0].status).toBe('preparing')
       |                                     ^
    137|     
    138|     await waitFor(() => {

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[35/75]⎯

 FAIL  src/modules/orders/hooks/__tests__/useOrderData.test.ts > useOrderData > should re-fetch when filters change
AssertionError: expected last "spy" call to have been called with [ 'rest-1', { status: 'new', …(1) } ]

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div />[39m
  [36m</body>[39m
[36m</html>[39m

[32m- Expected[39m
[31m+ Received[39m

[2m  [[22m
[32m-   "rest-1",[39m
[2m    {[22m
[2m      "status": "new",[22m
[2m      "tableId": undefined,[22m
[2m    },[22m
[2m  ][22m

 ❯ src/modules/orders/hooks/__tests__/useOrderData.test.ts:180:38
    178|     await waitFor(() => {
    179|       expect((orderService.getOrders as vi.Mock).mock.calls.length).to…
    180|       expect(orderService.getOrders).toHaveBeenLastCalledWith('rest-1'…
       |                                      ^
    181|         status: 'new',
    182|         tableId: undefined
 ❯ runWithExpensiveErrorDiagnosticsDisabled ../node_modules/@testing-library/dom/dist/config.js:47:12
 ❯ checkCallback ../node_modules/@testing-library/dom/dist/wait-for.js:124:77
 ❯ Timeout.checkRealTimersCallback ../node_modules/@testing-library/dom/dist/wait-for.js:118:16

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[36/75]⎯

 FAIL  src/modules/payment/components/__tests__/PaymentMethodPicker.test.tsx > PaymentMethodPicker > should render all payment method options
 FAIL  src/modules/payment/components/__tests__/PaymentMethodPicker.test.tsx > PaymentMethodPicker > should select Square Terminal method
 FAIL  src/modules/payment/components/__tests__/PaymentMethodPicker.test.tsx > PaymentMethodPicker > should select Digital Wallet method
 FAIL  src/modules/payment/components/__tests__/PaymentMethodPicker.test.tsx > PaymentMethodPicker > should handle cash payment with exact amount
 FAIL  src/modules/payment/components/__tests__/PaymentMethodPicker.test.tsx > PaymentMethodPicker > should handle cash payment with custom amount and calculate change
 FAIL  src/modules/payment/components/__tests__/PaymentMethodPicker.test.tsx > PaymentMethodPicker > should handle quick cash amounts
 FAIL  src/modules/payment/components/__tests__/PaymentMethodPicker.test.tsx > PaymentMethodPicker > should validate cash amount is sufficient
 FAIL  src/modules/payment/components/__tests__/PaymentMethodPicker.test.tsx > PaymentMethodPicker > should select Manual Entry method
 FAIL  src/modules/payment/components/__tests__/PaymentMethodPicker.test.tsx > PaymentMethodPicker > should select Split Check method
 FAIL  src/modules/payment/components/__tests__/PaymentMethodPicker.test.tsx > PaymentMethodPicker > should handle back button
 FAIL  src/modules/payment/components/__tests__/PaymentMethodPicker.test.tsx > PaymentMethodPicker > should close cash modal on cancel
 FAIL  src/modules/payment/components/__tests__/PaymentMethodPicker.test.tsx > PaymentMethodPicker > should display total amount prominently
 FAIL  src/modules/payment/components/__tests__/PaymentMethodPicker.test.tsx > PaymentMethodPicker > should disable payment buttons while processing
TypeError: Cannot read properties of undefined (reading 'toFixed')
 ❯ PaymentMethodPicker src/modules/payment/components/PaymentMethodPicker.tsx:169:67
    167|       <div className="bg-primary text-white p-6 text-center">
    168|         <h1 className="text-3xl font-bold">Payment Method</h1>
    169|         <p className="text-2xl mt-2 font-semibold">Total: ${total.toFi…
       |                                                                   ^
    170|       </div>
    171| 
 ❯ Object.react-stack-bottom-frame ../node_modules/react-dom/cjs/react-dom-client.development.js:23863:20
 ❯ renderWithHooks ../node_modules/react-dom/cjs/react-dom-client.development.js:5529:22
 ❯ updateFunctionComponent ../node_modules/react-dom/cjs/react-dom-client.development.js:8897:19
 ❯ beginWork ../node_modules/react-dom/cjs/react-dom-client.development.js:10522:18
 ❯ runWithFiberInDEV ../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ performUnitOfWork ../node_modules/react-dom/cjs/react-dom-client.development.js:15140:22
 ❯ workLoopSync ../node_modules/react-dom/cjs/react-dom-client.development.js:14956:41
 ❯ renderRootSync ../node_modules/react-dom/cjs/react-dom-client.development.js:14936:11
 ❯ performWorkOnRoot ../node_modules/react-dom/cjs/react-dom-client.development.js:14462:44

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[37/75]⎯

 FAIL  src/modules/payment/components/__tests__/TipSelector.test.tsx > TipSelector > should render tip options correctly
TypeError: Cannot read properties of undefined (reading 'addEventListener')
 ❯ initPrefersReducedMotion ../node_modules/framer-motion/dist/es/utils/reduced-motion/index.mjs:11:26
 ❯ HTMLVisualElement.mount ../node_modules/framer-motion/dist/es/render/VisualElement.mjs:153:13
 ❯ ../node_modules/framer-motion/dist/es/motion/utils/use-motion-ref.mjs:15:31
 ❯ commitAttachRef ../node_modules/react-dom/cjs/react-dom-client.development.js:12177:42
 ❯ runWithFiberInDEV ../node_modules/react-dom/cjs/react-dom-client.development.js:1522:13
 ❯ safelyAttachRef ../node_modules/react-dom/cjs/react-dom-client.development.js:12191:9
 ❯ commitLayoutEffectOnFiber ../node_modules/react-dom/cjs/react-dom-client.development.js:12729:26
 ❯ recursivelyTraverseLayoutEffects ../node_modules/react-dom/cjs/react-dom-client.development.js:13590:11
 ❯ commitLayoutEffectOnFiber ../node_modules/react-dom/cjs/react-dom-client.development.js:12791:11
 ❯ recursivelyTraverseLayoutEffects ../node_modules/react-dom/cjs/react-dom-client.development.js:13590:11

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[38/75]⎯

 FAIL  src/modules/payment/components/__tests__/TipSelector.test.tsx > TipSelector > should highlight recommended tip option
Error: [2mexpect([22m[31melement[39m[2m).toHaveClass([22m[32m[32m"ring-2 ring-primary"[32m[39m[2m)[22m

Expected the element to have class:
[32m  ring-2 ring-primary[39m
Received:
[31m  relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400[39m
 ❯ src/modules/payment/components/__tests__/TipSelector.test.tsx:34:31
     32|     
     33|     const recommendedButton = screen.getByText('20%').closest('button'…
     34|     expect(recommendedButton).toHaveClass('ring-2', 'ring-primary');
       |                               ^
     35|   });
     36| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[39/75]⎯

 FAIL  src/modules/payment/components/__tests__/TipSelector.test.tsx > TipSelector > should call onSelect with correct tip amount for preset option
AssertionError: expected "spy" to be called with arguments: [ 10 ][90m

Number of calls: [1m0[22m
[39m
 ❯ src/modules/payment/components/__tests__/TipSelector.test.tsx:43:35
     41|     fireEvent.click(button20!);
     42| 
     43|     expect(defaultProps.onSelect).toHaveBeenCalledWith(10.00);
       |                                   ^
     44|   });
     45| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[40/75]⎯

 FAIL  src/modules/payment/components/__tests__/TipSelector.test.tsx > TipSelector > should handle custom tip amount
TestingLibraryElementError: Unable to find an element with the text: Custom Amount. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-white flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-primary text-white p-6 text-center"[39m
      [36m>[39m
        [36m<h1[39m
          [33mclass[39m=[32m"text-3xl font-bold"[39m
        [36m>[39m
          [0mAdd a Tip?[0m
        [36m</h1>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-lg mt-2 opacity-90"[39m
        [36m>[39m
          [0mThank you for your service[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 p-6 max-w-2xl mx-auto w-full"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mSelect tip amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-3 gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m18%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m9.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full"[39m
              [36m>[39m
                [0mRecommended[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m20%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m10.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m22%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m11.00[0m
              [36m</div>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mOr enter custom amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"absolute left-4 top-1/2 transform -translate-y-1/2 text-2xl text-gray-600"[39m
            [36m>[39m
              [0m$[0m
            [36m</span>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full pl-10 pr-4 py-4 text-2xl border-2 rounded-xl border-gray-300 focus:outline-none focus:border-primary"[39m
              [33mplaceholder[39m=[32m"0.00"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-gray-100 rounded-xl p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center text-2xl font-bold"[39m
          [36m>[39m
            [36m<span>[39m
              [0mTotal with tip:[0m
            [36m</span>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-primary"[39m
            [36m>[39m
              [0m$[0m
              [0m54.00[0m
            [36m</span>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-6 bg-gray-50 border-t"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-2xl mx-auto space-y-3"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-5 text-xl font-semibold rounded-xl transition-all shadow-lg bg-gray-300 text-gray-500 cursor-not-allowed"[39m
            [33mdisabled[39m=[32m""[39m
          [36m>[39m
            [0mContinue to Payment[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-4 text-gray-600 hover:text-gray-800 transition-colors"[39m
          [36m>[39m
            [0mContinue without tip[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-3 text-gray-500 hover:text-gray-700 transition-colors text-sm"[39m
          [36m>[39m
            [0m← Back to check[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError ../node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/modules/payment/components/__tests__/TipSelector.test.tsx:49:33
     47|     render(<TipSelector {...defaultProps} />);
     48|     
     49|     const customButton = screen.getByText('Custom Amount').closest('bu…
       |                                 ^
     50|     fireEvent.click(customButton!);
     51| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[41/75]⎯

 FAIL  src/modules/payment/components/__tests__/TipSelector.test.tsx > TipSelector > should handle no tip selection
TestingLibraryElementError: Unable to find an element with the text: No Tip. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-white flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-primary text-white p-6 text-center"[39m
      [36m>[39m
        [36m<h1[39m
          [33mclass[39m=[32m"text-3xl font-bold"[39m
        [36m>[39m
          [0mAdd a Tip?[0m
        [36m</h1>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-lg mt-2 opacity-90"[39m
        [36m>[39m
          [0mThank you for your service[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 p-6 max-w-2xl mx-auto w-full"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mSelect tip amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-3 gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m18%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m9.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full"[39m
              [36m>[39m
                [0mRecommended[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m20%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m10.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m22%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m11.00[0m
              [36m</div>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mOr enter custom amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"absolute left-4 top-1/2 transform -translate-y-1/2 text-2xl text-gray-600"[39m
            [36m>[39m
              [0m$[0m
            [36m</span>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full pl-10 pr-4 py-4 text-2xl border-2 rounded-xl border-gray-300 focus:outline-none focus:border-primary"[39m
              [33mplaceholder[39m=[32m"0.00"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-gray-100 rounded-xl p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center text-2xl font-bold"[39m
          [36m>[39m
            [36m<span>[39m
              [0mTotal with tip:[0m
            [36m</span>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-primary"[39m
            [36m>[39m
              [0m$[0m
              [0m54.00[0m
            [36m</span>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-6 bg-gray-50 border-t"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-2xl mx-auto space-y-3"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-5 text-xl font-semibold rounded-xl transition-all shadow-lg bg-gray-300 text-gray-500 cursor-not-allowed"[39m
            [33mdisabled[39m=[32m""[39m
          [36m>[39m
            [0mContinue to Payment[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-4 text-gray-600 hover:text-gray-800 transition-colors"[39m
          [36m>[39m
            [0mContinue without tip[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-3 text-gray-500 hover:text-gray-700 transition-colors text-sm"[39m
          [36m>[39m
            [0m← Back to check[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError ../node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/modules/payment/components/__tests__/TipSelector.test.tsx:66:32
     64|     render(<TipSelector {...defaultProps} />);
     65|     
     66|     const noTipButton = screen.getByText('No Tip');
       |                                ^
     67|     fireEvent.click(noTipButton);
     68| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[42/75]⎯

 FAIL  src/modules/payment/components/__tests__/TipSelector.test.tsx > TipSelector > should validate custom tip input
TestingLibraryElementError: Unable to find an element with the text: Custom Amount. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-white flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-primary text-white p-6 text-center"[39m
      [36m>[39m
        [36m<h1[39m
          [33mclass[39m=[32m"text-3xl font-bold"[39m
        [36m>[39m
          [0mAdd a Tip?[0m
        [36m</h1>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-lg mt-2 opacity-90"[39m
        [36m>[39m
          [0mThank you for your service[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 p-6 max-w-2xl mx-auto w-full"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mSelect tip amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-3 gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m18%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m9.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full"[39m
              [36m>[39m
                [0mRecommended[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m20%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m10.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m22%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m11.00[0m
              [36m</div>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mOr enter custom amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"absolute left-4 top-1/2 transform -translate-y-1/2 text-2xl text-gray-600"[39m
            [36m>[39m
              [0m$[0m
            [36m</span>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full pl-10 pr-4 py-4 text-2xl border-2 rounded-xl border-gray-300 focus:outline-none focus:border-primary"[39m
              [33mplaceholder[39m=[32m"0.00"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-gray-100 rounded-xl p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center text-2xl font-bold"[39m
          [36m>[39m
            [36m<span>[39m
              [0mTotal with tip:[0m
            [36m</span>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-primary"[39m
            [36m>[39m
              [0m$[0m
              [0m54.00[0m
            [36m</span>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-6 bg-gray-50 border-t"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-2xl mx-auto space-y-3"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-5 text-xl font-semibold rounded-xl transition-all shadow-lg bg-gray-300 text-gray-500 cursor-not-allowed"[39m
            [33mdisabled[39m=[32m""[39m
          [36m>[39m
            [0mContinue to Payment[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-4 text-gray-600 hover:text-gray-800 transition-colors"[39m
          [36m>[39m
            [0mContinue without tip[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-3 text-gray-500 hover:text-gray-700 transition-colors text-sm"[39m
          [36m>[39m
            [0m← Back to check[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError ../node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/modules/payment/components/__tests__/TipSelector.test.tsx:75:33
     73|     render(<TipSelector {...defaultProps} />);
     74|     
     75|     const customButton = screen.getByText('Custom Amount').closest('bu…
       |                                 ^
     76|     fireEvent.click(customButton!);
     77| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[43/75]⎯

 FAIL  src/modules/payment/components/__tests__/TipSelector.test.tsx > TipSelector > should display tip percentage for custom amount
TestingLibraryElementError: Unable to find an element with the text: Custom Amount. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-white flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-primary text-white p-6 text-center"[39m
      [36m>[39m
        [36m<h1[39m
          [33mclass[39m=[32m"text-3xl font-bold"[39m
        [36m>[39m
          [0mAdd a Tip?[0m
        [36m</h1>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-lg mt-2 opacity-90"[39m
        [36m>[39m
          [0mThank you for your service[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 p-6 max-w-2xl mx-auto w-full"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mSelect tip amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-3 gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m18%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m9.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full"[39m
              [36m>[39m
                [0mRecommended[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m20%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m10.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m22%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m11.00[0m
              [36m</div>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mOr enter custom amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"absolute left-4 top-1/2 transform -translate-y-1/2 text-2xl text-gray-600"[39m
            [36m>[39m
              [0m$[0m
            [36m</span>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full pl-10 pr-4 py-4 text-2xl border-2 rounded-xl border-gray-300 focus:outline-none focus:border-primary"[39m
              [33mplaceholder[39m=[32m"0.00"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-gray-100 rounded-xl p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center text-2xl font-bold"[39m
          [36m>[39m
            [36m<span>[39m
              [0mTotal with tip:[0m
            [36m</span>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-primary"[39m
            [36m>[39m
              [0m$[0m
              [0m54.00[0m
            [36m</span>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-6 bg-gray-50 border-t"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-2xl mx-auto space-y-3"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-5 text-xl font-semibold rounded-xl transition-all shadow-lg bg-gray-300 text-gray-500 cursor-not-allowed"[39m
            [33mdisabled[39m=[32m""[39m
          [36m>[39m
            [0mContinue to Payment[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-4 text-gray-600 hover:text-gray-800 transition-colors"[39m
          [36m>[39m
            [0mContinue without tip[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-3 text-gray-500 hover:text-gray-700 transition-colors text-sm"[39m
          [36m>[39m
            [0m← Back to check[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError ../node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/modules/payment/components/__tests__/TipSelector.test.tsx:94:33
     92|     render(<TipSelector {...defaultProps} />);
     93|     
     94|     const customButton = screen.getByText('Custom Amount').closest('bu…
       |                                 ^
     95|     fireEvent.click(customButton!);
     96| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[44/75]⎯

 FAIL  src/modules/payment/components/__tests__/TipSelector.test.tsx > TipSelector > should handle back button
TestingLibraryElementError: Unable to find an element with the text: ← Back. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-white flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-primary text-white p-6 text-center"[39m
      [36m>[39m
        [36m<h1[39m
          [33mclass[39m=[32m"text-3xl font-bold"[39m
        [36m>[39m
          [0mAdd a Tip?[0m
        [36m</h1>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-lg mt-2 opacity-90"[39m
        [36m>[39m
          [0mThank you for your service[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 p-6 max-w-2xl mx-auto w-full"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mSelect tip amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-3 gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m18%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m9.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full"[39m
              [36m>[39m
                [0mRecommended[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m20%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m10.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m22%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m11.00[0m
              [36m</div>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mOr enter custom amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"absolute left-4 top-1/2 transform -translate-y-1/2 text-2xl text-gray-600"[39m
            [36m>[39m
              [0m$[0m
            [36m</span>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full pl-10 pr-4 py-4 text-2xl border-2 rounded-xl border-gray-300 focus:outline-none focus:border-primary"[39m
              [33mplaceholder[39m=[32m"0.00"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-gray-100 rounded-xl p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center text-2xl font-bold"[39m
          [36m>[39m
            [36m<span>[39m
              [0mTotal with tip:[0m
            [36m</span>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-primary"[39m
            [36m>[39m
              [0m$[0m
              [0m54.00[0m
            [36m</span>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-6 bg-gray-50 border-t"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-2xl mx-auto space-y-3"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-5 text-xl font-semibold rounded-xl transition-all shadow-lg bg-gray-300 text-gray-500 cursor-not-allowed"[39m
            [33mdisabled[39m=[32m""[39m
          [36m>[39m
            [0mContinue to Payment[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-4 text-gray-600 hover:text-gray-800 transition-colors"[39m
          [36m>[39m
            [0mContinue without tip[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-3 text-gray-500 hover:text-gray-700 transition-colors text-sm"[39m
          [36m>[39m
            [0m← Back to check[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError ../node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/modules/payment/components/__tests__/TipSelector.test.tsx:106:31
    104|     render(<TipSelector {...defaultProps} />);
    105|     
    106|     const backButton = screen.getByText('← Back');
       |                               ^
    107|     fireEvent.click(backButton);
    108| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[45/75]⎯

 FAIL  src/modules/payment/components/__tests__/TipSelector.test.tsx > TipSelector > should handle tip selection after viewing custom
TestingLibraryElementError: Unable to find an element with the text: Custom Amount. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-white flex flex-col"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-primary text-white p-6 text-center"[39m
      [36m>[39m
        [36m<h1[39m
          [33mclass[39m=[32m"text-3xl font-bold"[39m
        [36m>[39m
          [0mAdd a Tip?[0m
        [36m</h1>[39m
        [36m<p[39m
          [33mclass[39m=[32m"text-lg mt-2 opacity-90"[39m
        [36m>[39m
          [0mThank you for your service[0m
        [36m</p>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex-1 p-6 max-w-2xl mx-auto w-full"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mSelect tip amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-3 gap-4"[39m
          [36m>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m18%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m9.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full"[39m
              [36m>[39m
                [0mRecommended[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m20%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m10.00[0m
              [36m</div>[39m
            [36m</button>[39m
            [36m<button[39m
              [33mclass[39m=[32m"relative p-6 rounded-xl border-2 transition-all border-gray-300 hover:border-gray-400"[39m
              [33mtabindex[39m=[32m"0"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-800"[39m
              [36m>[39m
                [0m22%[0m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"text-lg text-gray-600 mt-1"[39m
              [36m>[39m
                [0m$[0m
                [0m11.00[0m
              [36m</div>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-8"[39m
        [36m>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-xl font-semibold text-gray-800 mb-4"[39m
          [36m>[39m
            [0mOr enter custom amount[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"relative"[39m
          [36m>[39m
            [36m<span[39m
              [33mclass[39m=[32m"absolute left-4 top-1/2 transform -translate-y-1/2 text-2xl text-gray-600"[39m
            [36m>[39m
              [0m$[0m
            [36m</span>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full pl-10 pr-4 py-4 text-2xl border-2 rounded-xl border-gray-300 focus:outline-none focus:border-primary"[39m
              [33mplaceholder[39m=[32m"0.00"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m""[39m
            [36m/>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-gray-100 rounded-xl p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center text-2xl font-bold"[39m
          [36m>[39m
            [36m<span>[39m
              [0mTotal with tip:[0m
            [36m</span>[39m
            [36m<span[39m
              [33mclass[39m=[32m"text-primary"[39m
            [36m>[39m
              [0m$[0m
              [0m54.00[0m
            [36m</span>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"p-6 bg-gray-50 border-t"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-2xl mx-auto space-y-3"[39m
        [36m>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-5 text-xl font-semibold rounded-xl transition-all shadow-lg bg-gray-300 text-gray-500 cursor-not-allowed"[39m
            [33mdisabled[39m=[32m""[39m
          [36m>[39m
            [0mContinue to Payment[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-4 text-gray-600 hover:text-gray-800 transition-colors"[39m
          [36m>[39m
            [0mContinue without tip[0m
          [36m</button>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full py-3 text-gray-500 hover:text-gray-700 transition-colors text-sm"[39m
          [36m>[39m
            [0m← Back to check[0m
          [36m</button>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
 ❯ Object.getElementError ../node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ ../node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/modules/payment/components/__tests__/TipSelector.test.tsx:116:33
    114|     
    115|     // First open custom
    116|     const customButton = screen.getByText('Custom Amount').closest('bu…
       |                                 ^
    117|     fireEvent.click(customButton!);
    118| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[46/75]⎯


 Test Files  19 failed | 21 passed (40)
      Tests  61 failed | 258 passed (319)
   Start at  00:59:10
   Duration  10.69s (transform 286ms, setup 95ms, collect 493ms, tests 8.72s, environment 230ms, prepare 36ms)

npm error Lifecycle script `test` failed with error:
npm error code 1
npm error path /Users/mikeyoung/CODING/rebuild-6.0/client
npm error workspace restaurant-os-client@6.0.4
npm error location /Users/mikeyoung/CODING/rebuild-6.0/client
npm error command failed
npm error command sh -c vitest run
