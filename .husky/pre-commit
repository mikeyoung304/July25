#!/usr/bin/env bash
. "$(dirname "$0")/_/husky.sh"

echo "[husky] pre-commit: quick typecheck + lint"

# Allow skipping on local emergency fixes:
#   SKIP_PRECOMMIT_TS=1 git commit -m "..."
if [ -z "$SKIP_PRECOMMIT_TS" ]; then
  npm run typecheck:quick --workspaces || exit 1
fi

npm run lint --workspaces --silent || exit 1
