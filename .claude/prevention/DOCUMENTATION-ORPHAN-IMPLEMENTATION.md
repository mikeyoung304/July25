# Documentation Orphan Prevention: Implementation Checklist

**Implementation Owner**: DevOps Team
**Estimated Effort**: 3-4 weeks (phased)
**Status**: PLANNED

---

## Phase 1: Foundation (Days 1-3)

### Task 1.1: Update .gitignore

**Objective**: Prevent generated files from being committed

```bash
# Location: /Users/mikeyoung/CODING/rebuild-6.0/.gitignore

# Add these rules (after existing playwright rule):

# Playwright Report Data (generated by playwright)
playwright-report/data/
playwright-report/*.json
playwright-report/*.html

# Reports (lifecycle-managed directories)
reports/e2e/*/video_*.webm
reports/e2e/*/trace.zip
reports/e2e/*/*.ndjson
reports/e2e/*/*.png
reports/artifacts/

# Temporary analysis outputs (cleaned up weekly)
reports/*_2025-*.md    # Undated analysis files
reports/*_20[0-9][0-9]-*.md
reports/*_METRICS_*.md
reports/*_BREAKDOWN_*.md

# Keep index and manifests
!reports/README.md
!reports/MANIFEST.md
!reports/ARCHIVE_MANIFEST.md

# Keep organized directories
!reports/active/
!reports/archive/

# Keep dated snapshot directories
!reports/snapshots/202[0-9]-*/
reports/snapshots/202[0-9]-*/**
!reports/snapshots/202[0-9]-*/README.md
!reports/snapshots/202[0-9]-*/MANIFEST.md
```

**Verification**:
```bash
# Test the rules
git check-ignore -v playwright-report/data/test.json  # Should match
git check-ignore -v reports/e2e/voice/video_pass1.webm  # Should match
git check-ignore -v reports/README.md  # Should NOT match
```

**Completion Criteria**:
- [ ] .gitignore updated
- [ ] All rules tested and verified
- [ ] Changes committed and pushed
- [ ] Team notified

**Effort**: 30 minutes

---

### Task 1.2: Create Pre-Commit Hook

**Objective**: Enforce orphan prevention at commit time

**Files to Create**:

1. **scripts/pre-commit-orphan-guard.sh**

```bash
#!/bin/bash
set -e

RED='\033[0;31m'
YELLOW='\033[1;33m'
GREEN='\033[0;32m'
NC='\033[0m'

# Check 1: No generated files in stage area
INVALID_PATTERNS=(
    "playwright-report/data/"
    "reports/e2e/.*/video_"
    "reports/artifacts/"
    "reports/.*_2025-.*\.md"
)

echo "Checking for orphan files..."

FOUND_ORPHANS=0
for pattern in "${INVALID_PATTERNS[@]}"; do
    if git diff --cached --name-only | grep -E "$pattern" > /dev/null; then
        echo -e "${RED}âœ— Error: Found commits matching pattern: $pattern${NC}"
        git diff --cached --name-only | grep -E "$pattern" | while read file; do
            echo -e "${RED}  - $file${NC}"
        done
        FOUND_ORPHANS=1
    fi
done

# Check 2: No root-level reports without date
ROOT_REPORTS=$(git diff --cached --name-only | grep '^reports/.*\.md$' | grep -v '_[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]' || true)
if [ -n "$ROOT_REPORTS" ]; then
    echo -e "${RED}âœ— Error: Reports must include date in filename (YYYY-MM-DD)${NC}"
    echo "$ROOT_REPORTS" | while read file; do
        echo -e "${RED}  - $file (missing date)${NC}"
    done
    FOUND_ORPHANS=1
fi

# Check 3: No .md files marked TODO/DRAFT without date
PROBLEMATIC=$(git diff --cached --name-only | grep -E '\.(md|txt)$' | while read f; do
    if [ -f "$f" ] && head -n 20 "$f" 2>/dev/null | grep -qi "TODO\|DRAFT\|TEMP\|WIP"; then
        if ! echo "$f" | grep -qE '[0-9]{4}-[0-9]{2}-[0-9]{2}'; then
            echo "$f"
        fi
    fi
done || true)

if [ -n "$PROBLEMATIC" ]; then
    echo -e "${YELLOW}âš  Warning: Documentation marked TODO/DRAFT/TEMP without date:${NC}"
    echo "$PROBLEMATIC" | while read file; do
        echo -e "${YELLOW}  - $file${NC}"
    done
fi

if [ $FOUND_ORPHANS -eq 1 ]; then
    echo -e "${RED}Commit blocked due to orphan file violations${NC}"
    exit 1
fi

echo -e "${GREEN}âœ“ Orphan check passed${NC}"
exit 0
```

2. **Install the hook**:

```bash
cp scripts/pre-commit-orphan-guard.sh .git/hooks/pre-commit
chmod +x .git/hooks/pre-commit
```

**Verification**:
```bash
# Test - should fail
echo "test" > reports/test-file.md
git add reports/test-file.md
git commit -m "test" # Should be blocked

# Clean up
git reset HEAD reports/test-file.md
rm reports/test-file.md
```

**Completion Criteria**:
- [ ] Script created at scripts/pre-commit-orphan-guard.sh
- [ ] Script executable (chmod +x)
- [ ] Installed to .git/hooks/pre-commit
- [ ] Test cases pass (blocks orphans, allows valid files)
- [ ] Team briefed on new pre-commit behavior

**Effort**: 1 hour

---

### Task 1.3: Update Existing Reports

**Objective**: Rename undated report files to follow naming convention

**Current undated files** (as of 2025-12-24):
- `reports/INDEX_REMAINING_WORK_2025-12-05.md` (has date, but not in filename) â†’ `reports/index-remaining-work-2025-12-05.md`
- `reports/REMAINING_WORK_METRICS_2025-12-05.md` â†’ `reports/remaining-work-metrics-2025-12-05.md`
- `reports/REMAINING_WORK_SUMMARY_2025-12-05.md` â†’ `reports/remaining-work-summary-2025-12-05.md`
- `reports/TASK_BREAKDOWN_187_PYRAMID_REBALANCING.md` â†’ Move to archive (180+ days old)
- `reports/PRE_EXISTING_CONDITIONS_2025-12-24.md` â†’ Keep as-is (recent)

**Actions**:
```bash
# Rename to lowercase with date first
mv reports/INDEX_REMAINING_WORK_2025-12-05.md reports/index-remaining-work-2025-12-05.md
mv reports/REMAINING_WORK_METRICS_2025-12-05.md reports/remaining-work-metrics-2025-12-05.md
mv reports/REMAINING_WORK_SUMMARY_2025-12-05.md reports/remaining-work-summary-2025-12-05.md

# Archive old (> 30 days)
mkdir -p reports/archive/2025-12
mv reports/TASK_BREAKDOWN_187_PYRAMID_REBALANCING.md reports/archive/2025-12/task-breakdown-187-2025-12-01.md

# Keep recent
git add reports/pre-existing-conditions-2025-12-24.md  # Already good
```

**Completion Criteria**:
- [ ] All reports in reports/ follow pattern: `prefix-YYYY-MM-DD.md`
- [ ] Old reports (>60 days) moved to reports/archive/
- [ ] Changes committed

**Effort**: 30 minutes

---

## Phase 2: Automation (Days 4-10)

### Task 2.1: Create Weekly Cleanup GitHub Action

**Objective**: Automate removal of generated/old files weekly

**File**: `.github/workflows/orphan-cleanup.yml`

```yaml
name: Weekly Orphan Cleanup

on:
  schedule:
    - cron: '0 2 * * FRI'  # Fridays 2 AM UTC
  workflow_dispatch:

jobs:
  cleanup:
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'

    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Remove stale report files
        run: |
          echo "Cleaning reports directory..."

          # Remove reports older than 60 days
          find reports -maxdepth 1 -type f -name "*.md" -mtime +60 ! -name "README.md" ! -name "MANIFEST.md" -exec rm {} \;

          # Remove e2e artifacts older than 7 days
          find reports/e2e -type f \( -name "*.png" -o -name "*.webm" -o -name "*.zip" \) -mtime +7 -delete 2>/dev/null || true

          # Remove build artifacts older than 14 days
          find reports/artifacts -type f -mtime +14 -delete 2>/dev/null || true

          echo "Cleanup complete"

      - name: Cleanup .claude cache
        run: |
          rm -rf .claude/cache/*.ndjson || true
          find .claude -name "*.log" -mtime +30 -delete || true

      - name: Commit cleanup (if changes)
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: 'chore: cleanup orphaned and stale documentation files'
          file_pattern: 'reports/ .claude/cache/'
          skip_fetch: true
          skip_checkout: true
```

**Verification**:
```bash
# Test workflow (manual trigger in GitHub Actions)
# Or wait until Friday
# Check git log for cleanup commits
git log --oneline | grep "chore: cleanup"
```

**Completion Criteria**:
- [ ] Workflow file created at .github/workflows/orphan-cleanup.yml
- [ ] Tested (manual trigger works)
- [ ] Scheduled cleanup runs Fridays
- [ ] Team notified when first cleanup occurs

**Effort**: 1 hour

---

### Task 2.2: Create Report Validation Script

**Objective**: Validate report files follow naming conventions

**File**: `scripts/validate-report-naming.sh`

```bash
#!/bin/bash

set -e

PATTERN="^[a-z]+-202[0-9]-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])"
QUARTER_PATTERN="^[a-z]+-202[0-9]-Q[1-4]"

echo "Validating report file naming..."

VIOLATIONS=0
TOTAL=0

find reports -maxdepth 1 \( -name "*.md" -o -name "*.json" -o -name "*.txt" \) \
    ! -name "README.md" \
    ! -name "MANIFEST.md" \
    ! -name "ARCHIVE_MANIFEST.md" | while read file; do

    BASENAME=$(basename "$file")
    TOTAL=$((TOTAL + 1))

    if ! echo "$BASENAME" | grep -qE "$PATTERN|$QUARTER_PATTERN"; then
        echo "âœ— VIOLATION: $BASENAME"
        echo "  Should match: prefix-YYYY-MM-DD[-context][-vN].ext"
        VIOLATIONS=$((VIOLATIONS + 1))
    fi
done

echo ""
echo "Validation complete: $VIOLATIONS violations in $TOTAL files"

if [ $VIOLATIONS -gt 0 ]; then
    exit 1
fi

echo "âœ“ All reports follow naming convention"
exit 0
```

**Make executable**:
```bash
chmod +x scripts/validate-report-naming.sh
```

**Verification**:
```bash
./scripts/validate-report-naming.sh  # Should pass
```

**Completion Criteria**:
- [ ] Script created and executable
- [ ] All current reports pass validation
- [ ] Can run manually or in CI

**Effort**: 30 minutes

---

### Task 2.3: Add npm Scripts

**Objective**: Make cleanup tasks easy to run

**Update**: `package.json`

```json
{
  "scripts": {
    "triage:docs": "bash scripts/weekly-doc-triage.sh",
    "validate:reports": "bash scripts/validate-report-naming.sh",
    "archive:reports": "bash scripts/manage-report-lifecycle.sh",
    "health": "npm run triage:docs && npm run validate:reports"
  }
}
```

**Verification**:
```bash
npm run validate:reports  # Should pass
npm run triage:docs       # Should create triage report
```

**Completion Criteria**:
- [ ] npm scripts added to package.json
- [ ] Scripts are runnable
- [ ] Team aware of available commands

**Effort**: 15 minutes

---

## Phase 3: Documentation & Discipline (Days 11-21)

### Task 3.1: Update reports/README.md

**Objective**: Document lifecycle and retention policies

```markdown
# Reports Directory

**Last Updated**: 2025-12-24

## Lifecycle Management

All reports follow a three-tier lifecycle:

### Tier 1: Active Reports (< 30 days)
- Location: `reports/active/`
- Retention: Latest version only
- Auto-cleanup: Weekly

### Tier 2: Snapshots (30-60 days)
- Location: `reports/snapshots/YYYY-MM-DD/`
- Retention: Dated snapshots
- Auto-cleanup: Every 60 days

### Tier 3: Archive (> 60 days)
- Location: `reports/archive/YYYY-QN/`
- Retention: Historical (12 months)
- Auto-cleanup: Annual

## Naming Convention

All report files **MUST** follow this pattern:

```
prefix-YYYY-MM-DD[-context][-vN].extension
```

Examples:
- âœ“ `coverage-2025-12-24.json`
- âœ“ `perf-2025-12-24-staging-v2.json`
- âœ“ `audit-2025-Q4.md`
- âœ— `coverage-latest.json` (no date)
- âœ— `report.md` (no date, no prefix)

## Auto-Cleanup Rules

**Every Friday 2 AM UTC:**
- Reports older than 60 days â†’ archive
- E2E videos older than 7 days â†’ delete
- Build artifacts older than 14 days â†’ delete

**Never auto-deleted:**
- reports/README.md
- reports/MANIFEST.md
- reports/archive/
- Anything with retention: indefinite

## Manual Management

### Archive old reports
```bash
npm run archive:reports
```

### Validate naming
```bash
npm run validate:reports
```

### Weekly triage
```bash
npm run triage:docs
```

[Rest of README as defined in prevention strategy document]
```

**Completion Criteria**:
- [ ] reports/README.md updated with lifecycle info
- [ ] Naming convention clearly documented
- [ ] Auto-cleanup rules listed
- [ ] npm scripts referenced

**Effort**: 1 hour

---

### Task 3.2: Update .claude/prevention/README.md

**Objective**: Index new prevention strategy in prevention directory

```markdown
# Add this section to .claude/prevention/README.md

## New: Documentation Orphan Prevention

**Status**: ACTIVE (December 2025)
**Documents**: 2 files

### [DOCUMENTATION-ORPHAN-PREVENTION.md](./DOCUMENTATION-ORPHAN-PREVENTION.md)

Complete prevention framework for handling documentation orphan accumulation.

**Covers:**
1. Generated file pollution (playwright-report/data/)
2. Old report accumulation (reports/ directory)
3. Archival discipline (.claude/ structure)
4. Weak enforcement (pre-commit hooks)

**Key Sections:**
- 3-layer prevention strategy (automation, architecture, discipline)
- .gitignore hardening
- Pre-commit hook implementation
- Automated cleanup GitHub Actions
- Report lifecycle management
- Weekly and monthly discipline protocols

**When to Use:**
- Before committing documentation files
- When designing report storage structure
- When setting up team documentation discipline
- During quarterly review of documentation health

### [DOCUMENTATION-ORPHAN-QUICK-REF.md](./DOCUMENTATION-ORPHAN-QUICK-REF.md)

Quick reference for daily documentation work.

**Contains:**
- 30-second pre-commit checklist
- File location decision tree
- Naming convention rules
- Retention time table
- Common problems & fixes

**When to Use:**
- Before committing any .md file
- When unsure where a file should go
- When debugging pre-commit hook failures
```

**Completion Criteria**:
- [ ] Entry added to .claude/prevention/README.md
- [ ] Links to new documents
- [ ] Clear "when to use" guidance

**Effort**: 30 minutes

---

### Task 3.3: Create Documentation Health Checklist

**Objective**: Embed in team workflows

**File**: `.claude/DOCUMENTATION_HEALTH_CHECKLIST.md`

```markdown
# Documentation Health Pre-Commit Checklist

Use this before committing any documentation file.

## Checklist (< 1 minute)

- [ ] **Date in filename**: YYYY-MM-DD format
- [ ] **Purpose clear**: Single topic, clear title
- [ ] **Right location**: Correct directory per guidelines
- [ ] **Linked from README**: Parent index updated
- [ ] **No secrets**: No credentials, keys, tokens
- [ ] **Links valid**: Internal links point to real files

## Decision Tree

```
What am I documenting?

â”œâ”€ Past incident/lesson learned?
â”‚  â””â”€ .claude/lessons/CL-TOPIC-NNN-title.md
â”‚
â”œâ”€ Prevention strategy?
â”‚  â””â”€ .claude/prevention/STRATEGY-TITLE.md
â”‚
â”œâ”€ Test/build results?
â”‚  â””â”€ reports/snapshots/YYYY-MM-DD/name.json
â”‚
â”œâ”€ Historical report?
â”‚  â””â”€ reports/archive/YYYY-QN/category/name.md
â”‚
â”œâ”€ Session notes?
â”‚  â””â”€ .claude/session-reports/YYYY-MM-DD-topic.md
â”‚
â”œâ”€ Temporary working notes?
â”‚  â””â”€ .claude/workings/name.md (NOT committed)
â”‚
â””â”€ Meeting decision?
   â””â”€ docs/decisions/ADR-NNN-title.md
```

## Pre-Commit Hook

This checklist is enforced by `.git/hooks/pre-commit`:
- Blocks orphaned generated files
- Blocks reports without dates
- Warns about TODO/DRAFT without dates

If hook rejects your file, fix and retry:
```bash
# Fix the issues
# Then retry
git add fixed-file.md
git commit -m "docs: ..."
```

---

**Questions?** See [DOCUMENTATION-ORPHAN-QUICK-REF.md](./.claude/prevention/DOCUMENTATION-ORPHAN-QUICK-REF.md)
```

**Completion Criteria**:
- [ ] Checklist created at .claude/DOCUMENTATION_HEALTH_CHECKLIST.md
- [ ] Linked from .claude/README.md
- [ ] Team notified

**Effort**: 30 minutes

---

### Task 3.4: Team Training & Communication

**Objective**: Ensure team knows new processes

**Actions**:

1. **Create team communication**:
   - Slack/Email summary: New documentation orphan prevention system is active
   - Link to DOCUMENTATION-ORPHAN-QUICK-REF.md
   - Explain pre-commit hook behavior
   - Show where to ask questions

2. **Add to onboarding**:
   - Link to quick reference in developer setup guide
   - Mention pre-commit hook during setup
   - Include in code review checklist

3. **Schedule training** (optional, 15 min):
   - Explain 3-layer prevention approach
   - Demo the pre-commit hook
   - Q&A

**Sample Slack/Email**:

```
Team - Documentation Orphan Prevention System is now active

We've implemented automated prevention of documentation orphan accumulation:

ðŸš« Pre-commit hook: Blocks orphaned generated files and reports without dates
ðŸ§¹ Weekly cleanup: Auto-archives old reports (Fridays 2 AM UTC)
ðŸ“‹ Validation: npm run validate:reports checks naming conventions

ðŸ“– New documentation:
- Quick Reference: .claude/prevention/DOCUMENTATION-ORPHAN-QUICK-REF.md
- Full Strategy: .claude/prevention/DOCUMENTATION-ORPHAN-PREVENTION.md

âš¡ Quick tips:
- Always date report files: coverage-2025-12-24.md
- Pre-commit hook will block orphaned files (expected behavior)
- Run `npm run triage:docs` weekly to check what needs archiving

Questions? See the quick ref or ask in #devops
```

**Completion Criteria**:
- [ ] Team communication sent
- [ ] Training completed (if scheduling)
- [ ] Team acknowledges understanding
- [ ] Quick reference bookmarked

**Effort**: 1 hour

---

### Task 3.5: Set Up Weekly Triage Schedule

**Objective**: Institutionalize documentation hygiene

**Actions**:

1. **Add to team calendar**:
   - Every Friday at 3 PM (team timezone)
   - Duration: 10 minutes
   - Title: "Documentation Triage"
   - Description: "Review reports, archive old docs, validate links"

2. **Create runbook**:

```markdown
# Weekly Documentation Triage (Friday 3 PM)

## Steps (10 minutes)

1. Run triage script (2 min)
   ```bash
   npm run triage:docs
   ```

2. Review report (2 min)
   - Check file: reports/triage-YYYY-WXX.md
   - Note any obvious issues

3. Archive candidates (3 min)
   - Move files marked "ARCHIVE?" to reports/archive/YYYY-QN/
   - Or note if questionable (ask team)

4. Validation (2 min)
   ```bash
   npm run validate:reports
   ```

5. Quick cleanup (1 min)
   - Remove any obvious duplicates
   - Update MANIFEST.md if anything changed

## Notes

- If validation fails, fix naming
- If files unclear what to do with, defer to next month's review
- Should take ~10 minutes
- Report to team if anything unusual found
```

**Completion Criteria**:
- [ ] Calendar reminder set (recurring, Fridays)
- [ ] Runbook created and shared
- [ ] Team member assigned as "triage owner" (rotating)
- [ ] First triage completed successfully

**Effort**: 1 hour

---

## Phase 4: Verification (Days 22-28)

### Task 4.1: Audit Implementation

**Objective**: Verify all components working together

```bash
# Checklist

â–¡ .gitignore changes
  - [ ] Rules present and valid
  - [ ] git check-ignore tests pass
  - [ ] No generated files committed

â–¡ Pre-commit hook
  - [ ] .git/hooks/pre-commit executable
  - [ ] Blocks orphaned files
  - [ ] Allows valid files
  - [ ] Team hasn't disabled it

â–¡ GitHub Actions
  - [ ] Workflow file exists: .github/workflows/orphan-cleanup.yml
  - [ ] Manual trigger works
  - [ ] Cleanup runs Fridays
  - [ ] Commits clean files weekly

â–¡ Scripts
  - [ ] scripts/pre-commit-orphan-guard.sh works
  - [ ] scripts/validate-report-naming.sh works
  - [ ] npm scripts added to package.json
  - [ ] Help text clear

â–¡ Documentation
  - [ ] reports/README.md updated
  - [ ] .claude/prevention/README.md updated
  - [ ] Checklists and quick refs in place
  - [ ] Team briefed

â–¡ Discipline
  - [ ] Weekly triage scheduled
  - [ ] First triage completed
  - [ ] Team follows pre-commit guidelines
  - [ ] No blocked commits due to implementation bugs

â–¡ Metrics
  - [ ] Zero orphaned generated files in recent commits
  - [ ] All reports in reports/ follow naming convention
  - [ ] reports/ directory < 10 files at root
  - [ ] Archive growing as expected
```

**Effort**: 2 hours

---

### Task 4.2: Document Lessons Learned

**Objective**: Capture implementation experience for future reference

**File**: `.claude/lessons/CL-DOCS-001-orphan-prevention-implementation.md`

```markdown
# CL-DOCS-001: Documentation Orphan Prevention Implementation

**Date**: 2025-12-24
**Status**: COMPLETED
**Type**: Prevention Strategy
**Effort**: 20-25 hours over 4 weeks

## Problem Addressed

Documentation orphan accumulation from three causes:
1. Generated files (playwright-report/data/) mixed with tracked
2. Old reports (reports/) accumulating without discipline
3. Weak enforcement (pre-commit warnings only)

## Solution Implemented

Three-layer prevention:
1. **Automation**: .gitignore hardening, pre-commit hooks, weekly cleanup
2. **Architecture**: Directory reorganization, naming conventions, lifecycle tiers
3. **Discipline**: Checklists, weekly triage, monthly reviews

## Key Lessons

âœ“ Pre-commit hooks are effective enforcement (blocks at commit time)
âœ“ Automation (GitHub Actions) reduces manual burden significantly
âœ“ Naming conventions catch orphans before they become problematic
âœ“ Weekly 10-minute triage better than big quarterly cleanup

âš  Team adoption requires clear documentation (quick ref essential)
âš  Retention policies must be automated (humans forget)
âš  Archive structure needs periodic review (prevent meta-orphans)

## What Worked Well

- .gitignore rules prevent 90%+ of orphans
- Pre-commit hook catches remainder at commit time
- GitHub Actions runs silently without team burden
- Quick reference is clear and actionable

## What Could Improve

- Could use more automation for archival (currently manual)
- Archive structure could be clearer (too many subdirs?)
- Team onboarding could be smoother (multiple docs to explain)

## Metrics (Post-Implementation)

- Orphaned generated files in commits: 0 (was frequent)
- Reports with proper dating: 100% (was 40%)
- Manual archival effort: Reduced 70%
- Team friction with hooks: Low (good communication helped)

## Related

- Prevention strategy: DOCUMENTATION-ORPHAN-PREVENTION.md
- Quick reference: DOCUMENTATION-ORPHAN-QUICK-REF.md
- Parent lesson: CL-MAINT-001-worktree-system-hygiene.md

## Recommendations for Future

1. Consider compressing very old archives (2-year lookback)
2. Automate some archival decisions (e.g., reports > 90 days auto-archive)
3. Monthly automated report on archive health
4. Quarterly review of directory structure

---

**Implementation Owner**: DevOps Team
**Review Frequency**: Quarterly
**Maintainer**: TBD
```

**Completion Criteria**:
- [ ] Lesson learned document created
- [ ] Added to .claude/lessons/
- [ ] Linked from CL-DOCS-001-* naming
- [ ] Team aware it's available for reference

**Effort**: 1 hour

---

## Success Criteria (After 4 Weeks)

### Quantitative Metrics

- [ ] **Zero orphaned generated files** in recent commits (git log last 50 commits)
- [ ] **100% of reports** in reports/ follow YYYY-MM-DD naming
- [ ] **<10 files** at reports/ root level
- [ ] **Weekly cleanup** runs successfully every Friday
- [ ] **0 pre-commit rejections** due to implementation bugs (only due to actual orphans)

### Qualitative Metrics

- [ ] Team reports **no friction** with pre-commit hook
- [ ] Weekly triage takes **<15 minutes** with no questions
- [ ] New team members can **follow guidelines** without asking
- [ ] No commits contain generated/orphaned files
- [ ] Archive is **organized and navigable**

### Team Feedback

- [ ] Team finds quick reference **helpful and clear**
- [ ] Pre-commit hook error messages **actionable**
- [ ] Documentation is **findable** (not buried)
- [ ] npm scripts are **easy to use**

---

## Estimated Timeline

| Phase | Duration | Start | End |
|-------|----------|-------|-----|
| 1: Foundation | 3-4 days | Today | +4 |
| 2: Automation | 1 week | +4 | +11 |
| 3: Discipline | 2 weeks | +11 | +25 |
| 4: Verification | 3 days | +25 | +28 |
| **Total** | **~4 weeks** | Today | 28 days |

---

## Rollback Plan (If Needed)

If implementation causes problems:

```bash
# Disable pre-commit hook
rm .git/hooks/pre-commit

# Revert .gitignore
git checkout HEAD -- .gitignore

# Disable GitHub Actions workflow
rm .github/workflows/orphan-cleanup.yml

# Restore prior state
git revert <commit-that-added-this>
```

However, this should not be necessary. The implementation:
- Blocks only obvious orphans (generated files, undated reports)
- Has clear error messages
- Allows team to organize first, then commit
- Doesn't delete anything automatically (only in archive)

---

## Questions & Escalation

| Issue | Owner | Resolution |
|-------|-------|-----------|
| Pre-commit hook rejects valid file | DevOps | Review .gitignore patterns, adjust if false positive |
| GitHub Actions cleanup deletes needed file | DevOps | Restore from git history: `git show <commit>:path > file` |
| Team confusion about where files go | Documentation | Point to DOCUMENTATION-ORPHAN-QUICK-REF.md decision tree |
| Performance (pre-commit slow) | DevOps | Optimize patterns, profile with git check-ignore timing |
| Retention policy changed | DevOps | Update github/workflows/orphan-cleanup.yml and .claude/prevention/README.md |

---

**Implementation Status**: PLANNED â†’ IN_PROGRESS â†’ COMPLETE
**Last Updated**: 2025-12-24
**Owner**: DevOps Team
